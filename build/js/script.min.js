document.getElementById("animation")&&lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",s=200,n=300,i=function(e,t){var i=new XMLHttpRequest;return i.timeout=1e4,i.responseType="json",i.addEventListener("load",(function(){!function(e){return e.status<s||e.status>n}(i)?e(i.response):t("Данные не загрузились. Причина: "+i.status+" "+i.statusText)})),i.addEventListener("error",(function(){t("Произошла ошибка соединения")})),i.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+i.timeout+"мс")})),i},o=function(e){e.remove()},c=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(o,2e3,t)};window.backend={load:function(s,n){var o=i(s,n||c);o.open(t,e),o.send()}}}(),jQuery,function(e,t){let s="",n="";const i=document.querySelector(".model-choice__brand-list"),o=document.querySelector(".model-choice__brand-choice"),c=document.querySelector(".model-choice__series-list"),a=document.querySelector(".model-choice__series-choice"),d=document.querySelector(".model-choice__select-brand"),l=document.querySelector(".model-choice__select-series");if(!i)return;let r=-1,m=-1;document.querySelector(".model-choice__series-wrapper"),document.querySelector("#series").content.querySelector(".model-choice__series-select");const u=document.querySelector(".model-choice__link"),p=e=>{let s="";return t.forEach(t=>{""===s&&-1!==e.toLowerCase().indexOf(t)&&(s=t)}),""===s?"":s+".html"},h=()=>{if(!i.classList.contains("show"))return i.classList.add("show"),void o.classList.add("opened");i.classList.contains("show")&&(i.classList.remove("show"),o.classList.remove("opened"))},_=()=>{if(!c.classList.contains("show"))return c.classList.add("show"),void a.classList.add("opened");c.classList.contains("show")&&(c.classList.remove("show"),a.classList.remove("opened"))},L=e=>{let t=e.target;t.classList.contains("model-choice__brand-choice")||t.classList.contains("model-choice__brand-item")||t.classList.contains("model-choice__brand-list")||!i.classList.contains("show")||(i.classList.remove("show"),o.classList.remove("opened")),t.classList.contains("model-choice__series-choice")||t.classList.contains("model-choice__series-item")||t.classList.contains("model-choice__series-list")||!c.classList.contains("show")||(c.classList.remove("show"),a.classList.remove("opened"))};e.load(e=>{let t=document.createDocumentFragment(),v=0;e.forEach(e=>{let s=document.createElement("li");s.textContent=e.title,s.classList.add("model-choice__brand-item"),s.setAttribute("data-id",v),v++,t.appendChild(s)}),i.appendChild(t);let b=document.createDocumentFragment();e.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__brand-option"),t.setAttribute("data-id",v),b.appendChild(t)}),d.appendChild(b);o.addEventListener("click",h),a.addEventListener("click",_),i.addEventListener("click",t=>{let s=t.target,d=+s.getAttribute("data-id");if(s.classList.contains("model-choice__brand-item")&&(r===d&&(i.classList.remove("show"),o.classList.remove("opened")),r!==d)){c.innerHTML="",a.textContent="Выбрать из списка",a.classList.remove("selected");let t=document.createDocumentFragment(),d=+s.getAttribute("data-id");e[d].series.forEach(e=>{let s=document.createElement("li");s.textContent=e.title,s.classList.add("model-choice__series-item"),t.appendChild(s)}),c.appendChild(t),r=d,o.textContent=s.textContent,n=s.textContent,o.classList.contains("selected")||o.classList.add("selected"),a.hasAttribute("disabled")&&a.removeAttribute("disabled"),i.classList.remove("show"),o.classList.remove("opened"),u.classList.add("disabled"),u.removeAttribute("href")}}),c.addEventListener("click",e=>{let t=e.target;t.classList.contains("model-choice__series-item")&&(a.textContent=t.textContent,a.classList.contains("selected")||a.classList.add("selected"),c.classList.remove("show"),a.classList.remove("opened"),u.classList.remove("disabled"),s=t.textContent,u.setAttribute("href",p(s)))}),d.addEventListener("change",t=>{m=t.target.selectedIndex-1,l.innerHTML="",a.textContent="Выбрать из списка",a.classList.remove("selected");let s=document.createElement("option");s.textContent="",s.setAttribute("disabled",""),s.setAttribute("selected",""),s.style.display="none",l.appendChild(s);let i=document.createDocumentFragment();l.hasAttribute("disabled")&&l.removeAttribute("disabled"),e[m].series.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__series-option"),i.appendChild(t)}),l.appendChild(i),o.textContent=t.target.value,n=t.target.value,o.classList.contains("selected")||o.classList.add("selected"),u.classList.add("disabled"),u.removeAttribute("href")}),l.addEventListener("change",e=>{a.textContent=e.target.value,a.classList.contains("selected")||a.classList.add("selected"),u.classList.remove("disabled"),s=e.target.value,u.setAttribute("href",p(s))}),u.addEventListener("click",e=>{e.preventDefault();let t=e.target.getAttribute("href");""!==t?document.location.href=t:alert("Инструкция по установке Wi-Fi контроллера для данной серии кондиционера в скором времени появится.")}),document.addEventListener("mousedown",L)})}(window.backend,window.PAGES),function(){const e=document.querySelector(".equipment__wrapper"),t=document.querySelector(".equipment__container");if(!e)return;(()=>{let s=document.createDocumentFragment(),n=e.cloneNode(!0);n.className="equipment__slide-wrapper",n.classList.add("swiper-wrapper");let i=document.createElement("div");i.classList.add("equipment__pagination"),i.classList.add("swiper-pagination"),s.appendChild(n),s.appendChild(i),t.appendChild(s),t.querySelectorAll(".equipment__item").forEach(e=>{e.classList.add("swiper-slide")}),new Swiper(".equipment__container",{pagination:{el:".equipment__pagination",type:"bullets"},loop:!0})})()}(),function(){const e=document.querySelector(".process__wrapper"),t=document.querySelector(".process__container");if(!e)return;(()=>{let s=document.createDocumentFragment(),n=e.cloneNode(!0);n.className="process__slide-wrapper",n.classList.add("swiper-wrapper");let i=document.createElement("div");i.classList.add("process__pagination"),i.classList.add("swiper-pagination");let o=document.createElement("div");o.className="process__number",o.textContent=1,s.appendChild(n),s.appendChild(i),s.appendChild(o),t.appendChild(s),t.querySelectorAll(".process__item").forEach(e=>{e.classList.add("swiper-slide")});(e=>{const s=t.querySelector(".process__number");e.on("slideChange",()=>{console.log(e.realIndex),s.textContent=e.realIndex+1})})(new Swiper(".process__container",{pagination:{el:".process__pagination",type:"bullets"},loop:!0}))})()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImJhY2tlbmQuanMiLCJzZWxlY3QuanMiLCJjaG9pY2UuanMiLCJlcXVpcG1lbnQuanMiLCJwcm9jZXNzLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJsb3R0aWUiLCJsb2FkQW5pbWF0aW9uIiwiY29udGFpbmVyIiwicmVuZGVyZXIiLCJsb29wIiwiYXV0b3BsYXkiLCJwYXRoIiwiUmVxVXJsIiwiUmVxTWV0aG9kIiwiUmVxU3RhdHVzIiwiY3JlYXRlUmVxdWVzdCIsIm9uTG9hZCIsIm9uRXJyb3IiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInRpbWVvdXQiLCJyZXNwb25zZVR5cGUiLCJhZGRFdmVudExpc3RlbmVyIiwic3RhdHVzIiwiaXNFcnJvclN0YXR1cyIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsInJlbW92ZUVsZW1lbnQiLCJlbGVtZW50IiwicmVtb3ZlIiwib25BbnlFcnJvciIsIm1lc3NhZ2UiLCJub2RlIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwicmlnaHQiLCJmb250U2l6ZSIsInRleHRDb250ZW50IiwiYm9keSIsImluc2VydEFkamFjZW50RWxlbWVudCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJiYWNrZW5kIiwibG9hZCIsInJlcSIsIm9wZW4iLCJzZW5kIiwialF1ZXJ5IiwiUEFHRVMiLCJzZXJpZXNOYW1lIiwiYnJhbmROYW1lIiwiYnJhbmRMaXN0IiwicXVlcnlTZWxlY3RvciIsImJyYW5kQnV0dG9uIiwic2VyaWVzTGlzdCIsInNlcmllc0J1dHRvbiIsImJyYW5kU2VsZWN0Iiwic2VyaWVzU2VsZWN0IiwiY3VycmVudEJyYW5kSWR4IiwiY3VycmVudE9wdGlvbklkeCIsImNvbnRlbnQiLCJsaW5rIiwiZ2V0SHJlZiIsInNlcmllcyIsImhyZWYiLCJmb3JFYWNoIiwicGFnZSIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsIm9uQnJhbmRDbGljayIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwib25TZXJpZXNDbGljayIsIm9uT3V0c2lkZUNsaWNrIiwiZXZ0IiwidGFyZ2V0IiwiYXJyIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaSIsIml0ZW0iLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImZyYWdtZW50MSIsIm5vZGUxIiwiaWR4IiwiZ2V0QXR0cmlidXRlIiwiaW5uZXJIVE1MIiwic2VyaWUiLCJoYXNBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZWxlY3RlZEluZGV4IiwiZGlzcGxheSIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJsb2NhdGlvbiIsImFsZXJ0Iiwid3JhcHBlciIsIndyYXBwZXJOb2RlIiwiY2xvbmVOb2RlIiwiY2xhc3NOYW1lIiwicGFnaW5hdGlvbk5vZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiU3dpcGVyIiwicGFnaW5hdGlvbiIsImVsIiwidHlwZSIsInJlbmRlclNsaWRlciIsIm51bWJlck5vZGUiLCJzd2lwZXIiLCJudW1iZXJGaWVsZCIsIm9uIiwiY29uc29sZSIsImxvZyIsInJlYWxJbmRleCIsImFkZE51bWJlcmluZyJdLCJtYXBwaW5ncyI6IkFBQ0FBLFNBQUFDLGVBQUEsY0FJQUMsT0FBQUMsY0FBQSxDQUNBQyxVQUFBSixTQUFBQyxlQUFBLGFBQ0FJLFNBQUEsTUFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLEtBQUEsY0NSQSxXQUNBLElBQUFDLEVBQ0EsMENBSUFDLEVBQ0EsTUFJQUMsRUFDQSxJQURBQSxFQUVBLElBVUFDLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLElBQUFDLGVBc0JBLE9BcEJBRCxFQUFBRSxRQVZBLElBV0FGLEVBQUFHLGFBQUEsT0FFQUgsRUFBQUksaUJBQUEsUUFBQSxZQVhBLFNBQUFKLEdBQ0EsT0FBQUEsRUFBQUssT0FBQVQsR0FDQUksRUFBQUssT0FBQVQsRUFVQVUsQ0FBQU4sR0FLQUYsRUFBQUUs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Q0F0QyxRQUFBZ0IsSUFDQUEsRUFBQVgsVUFBQUUsSUFBQSxrQkFaQSxJQUFBZ0MsT0FBQSx3QkFBQSxDQUNBQyxXQUFBLENBQ0FDLEdBQUEseUJBQ0FDLEtBQUEsV0FFQXBHLE1BQUEsS0ErQkFxRyxHQTdDQSxHQ0FBLFdBQ0EsTUFBQVYsRUFBQWpHLFNBQUFtRCxjQUFBLHFCQUNBL0MsRUFBQUosU0FBQW1ELGNBQUEsdUJBRUEsSUFBQThDLEVBQ0EsT0E2QkEsTUFDQSxJQUFBcEIsRUFBQTdFLFNBQUE4RSx5QkFFQW9CLEVBQUFELEVBQUFFLFdBQUEsR0FDQUQsRUFBQUUsVUFBQSx5QkFDQUYsRUFBQTdCLFVBQUFFLElBQUEsa0JBRUEsSUFBQThCLEVBQUFyRyxTQUFBOEIsY0FBQSxPQUNBdUUsRUFBQWhDLFVBQUFFLElBQUEsdUJBQ0E4QixFQUFBaEMsVUFBQUUsSUFBQSxxQkFFQSxJQUFBcUMsRUFBQTVHLFNBQUE4QixjQUFBLE9BQ0E4RSxFQUFBUixVQUFBLGtCQUNBUSxFQUFBeEUsWUFBQSxFQUVBeUMsRUFBQUssWUFBQWdCLEdBQ0FyQixFQUFBSyxZQUFBbUIsR0FDQXhCLEVBQUFLLFlBQUEwQixHQUVBeEcsRUFBQThFLFlBQUFMLEdBQ0F6RSxFQW5DQWtHLGlCQUFBLGtCQUNBdEMsUUFBQWdCLElBQ0FBLEVBQUFYLFVBQUFFLElBQUEsa0JBSUEsQ0FBQXNDLElBQ0EsTUFBQUMsRUFBQTFHLEVBQUErQyxjQUFBLG9CQUVBMEQsRUFBQUUsR0FBQSxjQUFBLEtBQ0FDLFFBQUFDLElBQUFKLEVBQUFLLFdBQ0FKLEVBQUExRSxZQUFBeUUsRUFBQUssVUFBQSxLQTJCQUMsQ0FoREEsSUFBQVosT0FBQSxzQkFBQSxDQUNBQyxXQUFBLENBQ0FDLEdBQUEsdUJBQ0FDLEtBQUEsV0FFQXBHLE1BQUEsTUE4Q0FxRyxHQTVEQSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb3R0aWUubG9hZEFuaW1hdGlvbih7XG4gICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uJyksIC8vIHRoZSBkb20gZWxlbWVudCB0aGF0IHdpbGwgY29udGFpbiB0aGUgYW5pbWF0aW9uXG4gICAgcmVuZGVyZXI6ICdzdmcnLFxuICAgIGxvb3A6IHRydWUsXG4gICAgYXV0b3BsYXk6IHRydWUsXG4gICAgcGF0aDogJ2RhdGEuanNvbicgLy8gdGhlIHBhdGggdG8gdGhlIGFuaW1hdGlvbiBqc29uXG4gIH0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFJlcVVybCA9IHtcbiAgICBHRVQ6ICdodHRwczovL3NwbGl0LmRhaWNoaWNsb3VkLnJ1L2JyYW5kcy9hbGwnLFxuICAgIC8vUE9TVDogJ2h0dHBzOi8vanMuZHVtcC5hY2FkZW15L2tla3N0YWdyYW0nXG4gIH07XG5cbiAgdmFyIFJlcU1ldGhvZCA9IHtcbiAgICBHRVQ6ICdHRVQnLFxuICAgIFBPU1Q6ICdQT1NUJ1xuICB9O1xuXG4gIHZhciBSZXFTdGF0dXMgPSB7XG4gICAgT0s6IDIwMCxcbiAgICBNVUxUSVBMRV9DSE9JQ0VTOiAzMDAsXG4gIH07XG5cbiAgdmFyIFRJTUVPVVQgPSAxMDAwMDtcblxuICB2YXIgaXNFcnJvclN0YXR1cyA9IGZ1bmN0aW9uICh4aHIpIHtcbiAgICByZXR1cm4geGhyLnN0YXR1cyA8IFJlcVN0YXR1cy5PS1xuICAgICAgfHwgeGhyLnN0YXR1cyA+IFJlcVN0YXR1cy5NVUxUSVBMRV9DSE9JQ0VTO1xuICB9O1xuXG4gIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci50aW1lb3V0ID0gVElNRU9VVDtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNFcnJvclN0YXR1cyh4aHIpKSB7XG4gICAgICAgIG9uRXJyb3IoJ9CU0LDQvdC90YvQtSDQvdC1INC30LDQs9GA0YPQt9C40LvQuNGB0YwuINCf0YDQuNGH0LjQvdCwOiAnICsgeGhyLnN0YXR1cyArICcgJyArIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvbkxvYWQoeGhyLnJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8nKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCd0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgb25FcnJvcign0JfQsNC/0YDQvtGBINC90LUg0YPRgdC/0LXQuyDQstGL0L/QvtC70L3QuNGC0YzRgdGPINC30LAgJyArIHhoci50aW1lb3V0ICsgJ9C80YEnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgdmFyIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gIH07XG5cbiAgdmFyIG9uQW55RXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbm9kZS5zdHlsZSA9ICd6LWluZGV4OiAxMDA7IG1hcmdpbjogMCBhdXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHJlZDsnO1xuICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG5vZGUuc3R5bGUubGVmdCA9IDA7XG4gICAgbm9kZS5zdHlsZS5yaWdodCA9IDA7XG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9ICczMHB4JztcblxuICAgIG5vZGUudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbm9kZSk7XG4gICAgd2luZG93LnNldFRpbWVvdXQocmVtb3ZlRWxlbWVudCwgMjAwMCwgbm9kZSk7XG4gIH07XG5cbiAgd2luZG93LmJhY2tlbmQgPSB7XG4gICAgbG9hZDogZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yIHx8IG9uQW55RXJyb3IpO1xuICAgICAgcmVxLm9wZW4oUmVxTWV0aG9kLkdFVCwgUmVxVXJsLkdFVCk7XG4gICAgICByZXEuc2VuZCgpO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlOiBmdW5jdGlvbiAoZGF0YSwgb25Mb2FkLCBvbkVycm9yKSB7XG4gICAgLy8gICB2YXIgcmVxID0gY3JlYXRlUmVxdWVzdChvbkxvYWQsIG9uRXJyb3IpO1xuICAgIC8vICAgcmVxLm9wZW4oUmVxTWV0aG9kLlBPU1QsIFJlcVVybC5QT1NUKTtcbiAgICAvLyAgIHJlcS5zZW5kKGRhdGEpO1xuICAgIC8vIH1cbiAgfTtcbn0pKCk7XG5cblxuXG5cbiIsIi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuLy8gICAvLyAkKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIC8vICQoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIGZ1bmN0aW9uIG1ha2VTZWxlY3QoZWxlbWVudCkge1xuLy8gICAgICQoZWxlbWVudCkuc2VsZWN0Mih7XG4vLyAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgICAgfSk7XG4vLyAgIH07XG5cblxuXG5cbi8vICAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xuXG4vLyAgIGNvbnNvbGUubG9nKHdpbmRvdy5tYWtlU2VsZWN0KTtcblxuLy8gfSk7XG5cblxuKGZ1bmN0aW9uKCQpIHtcbiAgLy8gZnVuY3Rpb24gbWFrZVNlbGVjdChlbGVtZW50Q2xhc3MpIHtcbiAgLy8gICAkKGVsZW1lbnRDbGFzcykuc2VsZWN0Mih7XG4gIC8vICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4gIC8vICAgfSk7XG4gIC8vIH07XG5cbiAgLy8gd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbiAoYmFja2VuZCwgUEFHRVMpIHtcbiAgLy8gY29uc3Qgc3BsaXRzID0gW1xuICAvLyAgIHtcbiAgLy8gICAgIFwiaWRcIjo3LFxuICAvLyAgICAgXCJ0aXRsZVwiOlwiQXhpb21hXCIsXG4gIC8vICAgICBcInNlcmllc1wiOltcbiAgLy8gICAgICAge1xuICAvLyAgICAgICAgIFwiaWRcIjo2MyxcbiAgLy8gICAgICAgICBcInRpdGxlXCI6XCJBU1hfQVwiXG4gIC8vICAgICAgIH0sXG4gIC8vICAgICAgIHtcbiAgLy8gICAgICAgICBcImlkXCI6NjIsXG4gIC8vICAgICAgICAgXCJ0aXRsZVwiOlwiQVNYX0FaXCJcbiAgLy8gICAgICAgfVxuICAvLyAgICAgXVxuICAvLyAgIH0sXG4gIC8vICAge1wiaWRcIjo2LFwidGl0bGVcIjpcIkRhaWNoaVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NDUsXCJ0aXRsZVwiOlwiQ2FyYm9uIERBX0RWUVwifSx7XCJpZFwiOjQ2LFwidGl0bGVcIjpcIkV2ZXJlc3QgREFfRVZRXCJ9LHtcImlkXCI6NDMsXCJ0aXRsZVwiOlwiUGVhayBEQV9BVlFTXCJ9LHtcImlkXCI6NDIsXCJ0aXRsZVwiOlwiWC10cmVtZSBQZWFrIERBX0FWUVNcIn1dfSxcbiAgLy8gICB7XCJpZFwiOjEsXCJ0aXRsZVwiOlwiRGFpa2luXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjoxMSxcInRpdGxlXCI6XCJDb21mb3JhIEZUWC1KXFwvR1ZcIn0se1wiaWRcIjoyNixcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtSzNcIn0se1wiaWRcIjoyNyxcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtTFwifSx7XCJpZFwiOjI4LFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYUC1NXCJ9LHtcImlkXCI6MjMsXCJ0aXRsZVwiOlwiRW11cmEgRlRYRy1MXCJ9LHtcImlkXCI6MTgsXCJ0aXRsZVwiOlwiRW11cmEgRlRYSi1NXCJ9LHtcImlkXCI6MjAsXCJ0aXRsZVwiOlwiRkxYUy1CXCJ9LHtcImlkXCI6MTYsXCJ0aXRsZVwiOlwiRlRYQi1CXCJ9LHtcImlkXCI6NjUsXCJ0aXRsZVwiOlwiRlRYUy1FXCJ9LHtcImlkXCI6NjQsXCJ0aXRsZVwiOlwiRlRYUy1KXFwvR1wifSx7XCJpZFwiOjIxLFwidGl0bGVcIjpcIkZWWE0tRlwifSx7XCJpZFwiOjIyLFwidGl0bGVcIjpcIkZWWFMtRlwifSx7XCJpZFwiOjE5LFwidGl0bGVcIjpcIk5leHVyYSBGVlhHLUtcIn0se1wiaWRcIjoyNCxcInRpdGxlXCI6XCJQZXJmZXJhIEZUWE0tTlwifSx7XCJpZFwiOjI1LFwidGl0bGVcIjpcIlBlcmZlcmEgRlRYUy1LXCJ9LHtcImlkXCI6MSxcInRpdGxlXCI6XCJTZW5zaXJhIEZUWEItQ1wifV19LFxuICAvLyAgIHtcImlkXCI6MixcInRpdGxlXCI6XCJLZW50YXRzdVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NDksXCJ0aXRsZVwiOlwiQnJhdm8gIEtTR0JfSEZBTlwifSx7XCJpZFwiOjUwLFwidGl0bGVcIjpcIkJyYXZvICBLU0dCQV9IWkFOXCJ9LHtcImlkXCI6NTYsXCJ0aXRsZVwiOlwiS01HQkFfSFpBTlwifSx7XCJpZFwiOjU3LFwidGl0bGVcIjpcIktNR0JCX0haQU5cIn0se1wiaWRcIjo1MixcInRpdGxlXCI6XCJUZWFtICBLU0dUX0haQU5cIn0se1wiaWRcIjo0NyxcInRpdGxlXCI6XCJUaXRhbiBHZW5lc2lzIEtTR1hcIn0se1wiaWRcIjo1MSxcInRpdGxlXCI6XCJUdXJpbiBLU0dVX0haQU5cIn1dfSxcbiAgLy8gICB7XCJpZFwiOjgsXCJ0aXRsZVwiOlwiTWlkZWFcIixcInNlcmllc1wiOlt7XCJpZFwiOjYxLFwidGl0bGVcIjpcIkJsYW5jIE1TTUFcIn0se1wiaWRcIjo2MCxcInRpdGxlXCI6XCJCbGFuYyBNU01BIEVSUCAoTUEpXCJ9LHtcImlkXCI6NTksXCJ0aXRsZVwiOlwiTWlzc2lvbiBNU01CIChNQilcIn0se1wiaWRcIjo1OCxcInRpdGxlXCI6XCJVbHRpbWF0ZSBDb21mb3J0IE1TTVQgKE1UKVwifV19XTtcblxuXG4gIGxldCBzZXJpZXNOYW1lID0gJyc7XG4gIGxldCBicmFuZE5hbWUgPSAnJztcbiAgbGV0IGxpbmtIcmVmID0gJyc7XG5cbiAgY29uc3QgYnJhbmRDbGFzcyA9ICcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnO1xuICBjb25zdCBzZXJpZXNDbGFzcyA9ICcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0JztcblxuICBjb25zdCBicmFuZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1saXN0Jyk7XG4gIGNvbnN0IGJyYW5kQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtY2hvaWNlJyk7XG4gIGNvbnN0IHNlcmllc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtbGlzdCcpO1xuICBjb25zdCBzZXJpZXNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtY2hvaWNlJyk7XG4gIGNvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VsZWN0LWJyYW5kJyk7XG4gIGNvbnN0IHNlcmllc1NlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3NlbGVjdC1zZXJpZXMnKTtcblxuICBpZiAoIWJyYW5kTGlzdCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBjdXJyZW50QnJhbmRJZHggPSAtMTtcbiAgbGV0IGN1cnJlbnRPcHRpb25JZHggPSAtMTtcblxuICAvL2NvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jyk7XG4gIGNvbnN0IHNlcmllc1dyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtd3JhcHBlcicpO1xuICBjb25zdCBzZXJpZXNUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXJpZXMnKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKTtcblxuICBjb25zdCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fbGluaycpO1xuXG4gIGNvbnN0IGdldEhyZWYgPSAoc2VyaWVzKSA9PiB7XG4gICAgbGV0IGhyZWYgPSAnJztcblxuICAgIFBBR0VTLmZvckVhY2goKHBhZ2UpID0+IHtcbiAgICAgIGlmIChocmVmID09PSAnJykge1xuICAgICAgICBpZiAoc2VyaWVzLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihwYWdlKSAhPT0gLTEpIHtcbiAgICAgICAgICBocmVmID0gcGFnZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGhyZWYgPT09ICcnID8gJycgOiBocmVmICsgJy5odG1sJztcbiAgfTtcblxuICBjb25zdCBvbkJyYW5kQ2xpY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFicmFuZExpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdvcGVuZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYnJhbmRMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuICAgIC8vIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtbGlzdCcpLm1DdXN0b21TY3JvbGxiYXIoe1xuICAgIC8vICAgc2V0SGVpZ2h0OiAxODksXG4gICAgLy8gICBhdXRvSGlkZVNjcm9sbGJhcjogZmFsc2UsXG4gICAgLy8gICB0aGVtZTogJ2RhcmsnLFxuICAgIC8vICAgbW91c2VXaGVlbFBpeGVsczogMjAwLFxuICAgIC8vICAgY29udGVudFRvdWNoU2Nyb2xsOiB0cnVlXG4gICAgLy8gfSk7XG4gIH07XG5cbiAgY29uc3Qgb25TZXJpZXNDbGljayA9ICgpID0+IHtcbiAgICBpZiAoIXNlcmllc0xpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuICAgICAgLy8gY29uc29sZS5sb2coc2VyaWVzTGlzdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzZXJpZXNMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBzZXJpZXNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25PdXRzaWRlQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAoXG4gICAgICAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1jaG9pY2UnKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpXG4gICAgICAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1saXN0JylcbiAgICAgICYmIGJyYW5kTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKVxuICAgICkge1xuICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1jaG9pY2UnKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWl0ZW0nKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWxpc3QnKVxuICAgICAgJiYgc2VyaWVzTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKVxuICAgICkge1xuICAgICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG1ha2VPcHRpb25Ob2RlID0gKGFycikgPT4ge1xuICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgbm9kZS50ZXh0Q29udGVudCA9IGl0ZW1bJ3RpdGxlJ107XG4gICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpKTtcbiAgICAgIGkrKztcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gICAgICAvLyBsZXQgc2VyaWVzU2VsZWN0ID0gc2VyaWVzVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgLy8gc2VyaWVzU2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgLy8gc2VyaWVzU2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsIGl0ZW1bJ3RpdGxlJ10pO1xuXG4gICAgICAvLyBpdGVtLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgICAgLy8gICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgLy8gICBub2RlLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBzZXJpZVsndGl0bGUnXSk7XG4gICAgICAvLyAgIG5vZGUudGV4dENvbnRlbnQgPSBzZXJpZVsndGl0bGUnXTtcbiAgICAgIC8vICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgLy8gfSk7XG5cbiAgICAgIC8vIHNlcmllc1dyYXBwZXIuYXBwZW5kQ2hpbGQoc2VyaWVzU2VsZWN0KTtcbiAgICB9KTtcblxuICAgIGJyYW5kTGlzdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cblxuICAgIGxldCBmcmFnbWVudDEgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgbGV0IGogPSAwO1xuXG4gICAgYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGxldCBub2RlMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgbm9kZTEudGV4dENvbnRlbnQgPSBpdGVtWyd0aXRsZSddO1xuICAgICAgbm9kZTEuY2xhc3NMaXN0LmFkZCgnbW9kZWwtY2hvaWNlX19icmFuZC1vcHRpb24nKTtcbiAgICAgIG5vZGUxLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGkpO1xuICAgICAgaisrO1xuICAgICAgZnJhZ21lbnQxLmFwcGVuZENoaWxkKG5vZGUxKTtcblxuICAgICAgLy8gbGV0IHNlcmllc1NlbGVjdCA9IHNlcmllc1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBpdGVtWyd0aXRsZSddKTtcblxuICAgICAgLy8gaXRlbS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAgIC8vICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIC8vICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgc2VyaWVbJ3RpdGxlJ10pO1xuICAgICAgLy8gICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAvLyAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIC8vIH0pO1xuXG4gICAgICAvLyBzZXJpZXNXcmFwcGVyLmFwcGVuZENoaWxkKHNlcmllc1NlbGVjdCk7XG4gICAgfSk7XG5cbiAgICBicmFuZFNlbGVjdC5hcHBlbmRDaGlsZChmcmFnbWVudDEpO1xuXG5cblxuICAgIGNvbnN0IG9uQnJhbmRJdGVtQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcbiAgICAgIGxldCBpZHggPSArdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuXG4gICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1pdGVtJykpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRCcmFuZElkeCA9PT0gaWR4KSB7XG4gICAgICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50QnJhbmRJZHggIT09IGlkeCkge1xuICAgICAgICAgIHNlcmllc0xpc3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICBzZXJpZXNCdXR0b24udGV4dENvbnRlbnQgPSAn0JLRi9Cx0YDQsNGC0Ywg0LjQtyDRgdC/0LjRgdC60LAnO1xuICAgICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgIGxldCBpZHggPSArdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuXG4gICAgICAgICAgYXJyW2lkeF0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAgICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWl0ZW0nKTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2VyaWVzTGlzdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgICAgY3VycmVudEJyYW5kSWR4ID0gaWR4O1xuXG4gICAgICAgICAgYnJhbmRCdXR0b24udGV4dENvbnRlbnQgPSB0YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgYnJhbmROYW1lID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICAgIGlmICghYnJhbmRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZXJpZXNCdXR0b24uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICBzZXJpZXNCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG5cbiAgICAgICAgICBsaW5rLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG9uQnJhbmRDaGFuZ2UgPSAoZXZ0KSA9PiB7XG4gICAgICBjdXJyZW50T3B0aW9uSWR4ID0gZXZ0LnRhcmdldC5zZWxlY3RlZEluZGV4IC0gMTtcbiAgICAgIHNlcmllc1NlbGVjdC5pbm5lckhUTUwgPSAnJztcblxuICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gJ9CS0YvQsdGA0LDRgtGMINC40Lcg0YHQv9C40YHQutCwJztcbiAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXG4gICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgbm9kZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJywgJycpO1xuICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgaWYgKHNlcmllc1NlbGVjdC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgc2VyaWVzU2VsZWN0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgIH1cblxuXG4gICAgICBhcnJbY3VycmVudE9wdGlvbklkeF0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBzZXJpZVsndGl0bGUnXTtcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1vcHRpb24nKTtcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICB9KTtcblxuICAgICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgYnJhbmRCdXR0b24udGV4dENvbnRlbnQgPSBldnQudGFyZ2V0LnZhbHVlO1xuICAgICAgYnJhbmROYW1lID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAgIGlmICghYnJhbmRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgb25TZXJpZXNJdGVtQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcblxuICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWl0ZW0nKSkge1xuICAgICAgICBzZXJpZXNCdXR0b24udGV4dENvbnRlbnQgPSB0YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgIGlmICghc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcblxuICAgICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIHNlcmllc05hbWUgPSB0YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgZ2V0SHJlZihzZXJpZXNOYW1lKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb25TZXJpZXNDaGFuZ2UgPSAoZXZ0KSA9PiB7XG4gICAgICBzZXJpZXNCdXR0b24udGV4dENvbnRlbnQgPSBldnQudGFyZ2V0LnZhbHVlO1xuICAgICAgaWYgKCFzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgfVxuXG4gICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICBzZXJpZXNOYW1lID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgZ2V0SHJlZihzZXJpZXNOYW1lKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb25MaW5rQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCBocmVmID0gZXZ0LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblxuICAgICAgaWYgKGhyZWYgPT09ICcnKSB7XG4gICAgICAgIGFsZXJ0KCfQmNC90YHRgtGA0YPQutGG0LjRjyDQv9C+INGD0YHRgtCw0L3QvtCy0LrQtSBXaS1GaSDQutC+0L3RgtGA0L7Qu9C70LXRgNCwINC00LvRjyDQtNCw0L3QvdC+0Lkg0YHQtdGA0LjQuCDQutC+0L3QtNC40YbQuNC+0L3QtdGA0LAg0LIg0YHQutC+0YDQvtC8INCy0YDQtdC80LXQvdC4INC/0L7Rj9Cy0LjRgtGB0Y8uJyk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgICB9O1xuXG4gICAgLy9sZXQgc3BsaXRzRGF0YSA9IGJhY2tlbmQubG9hZChnZXREYXRhKTtcblxuICAgIC8vYnJhbmRTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZU9wdGlvbk5vZGUoc3BsaXRzKSk7XG4gICAgLy9tYWtlT3B0aW9uTm9kZShzcGxpdHMpO1xuICAgIC8vYmFja2VuZC5sb2FkKG1ha2VPcHRpb25Ob2RlKTtcblxuXG4gICAgLy8gbWFrZVNlbGVjdChicmFuZENsYXNzKTtcbiAgICAvLyBtYWtlU2VsZWN0KHNlcmllc0NsYXNzKTtcblxuICAgIC8vIGpRdWVyeShicmFuZENsYXNzKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgLy8galF1ZXJ5KGJyYW5kQ2xhc3MpLnNlbGVjdDIoJ2Nsb3NlJyk7XG5cblxuICAgIC8vIGNvbnN0IHNlcmllc1NlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG5cblxuICAgIC8vIGNvbnN0IGhpZGVTZXJpZXMgPSAoKSA9PiB7XG4gICAgLy8gICBzZXJpZXNTZWxlY3RzLmZvckVhY2goKHNlbGVjdCkgPT4ge1xuICAgIC8vICAgICBpZiAoIXNlbGVjdC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgLy8gICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIC8vICAgICAgIHNlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0pXG4gICAgLy8gfTtcblxuICAgIC8vIGNvbnN0IHNob3dTZXJpZXMgPSAoaWR4KSA9PiB7XG4gICAgLy8gICBzZXJpZXNTZWxlY3RzW2lkeF0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgLy8gICBzZXJpZXNTZWxlY3RzW2lkeF0uc2V0QXR0cmlidXRlKCdpZCcsICdzZXJpZXMtc2VsZWN0Jyk7XG4gICAgLy8gfTtcblxuICAgIC8vIGpRdWVyeShicmFuZENsYXNzKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIC8vICAgbGV0IGlkeCA9ICtqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS5hdHRyKCdkYXRhLWlkJyk7XG5cbiAgICAvLyAgIGhpZGVTZXJpZXMoKTtcbiAgICAvLyAgIHNob3dTZXJpZXMoaWR4ICsgMSk7XG5cbiAgICAvLyAgIGpRdWVyeSgnI3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgLy8gICBqUXVlcnkoJyNzZXJpZXMtc2VsZWN0Jykuc2VsZWN0MignY2xvc2UnKTtcblxuICAgIC8vICAgalF1ZXJ5KCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgIC8vIH0pO1xuXG4gICAgLy8galF1ZXJ5KHNlcmllc0NsYXNzKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIC8vICAgaWYgKGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7XG4gICAgLy8gICAgIGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAvLyAgIH1cblxuICAgIC8vICAgbGV0IHZhbHVlID0galF1ZXJ5KGV2dC50YXJnZXQpLmNoaWxkcmVuKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgLy8gICBzZXJpZXNOYW1lID0gdmFsdWU7XG5cblxuICAgIC8vICAgbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBzZXJpZXNOYW1lKTtcblxuICAgIC8vICAgalF1ZXJ5KCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgLy8gfSk7XG5cbiAgICAvL1Jlc2l6ZS5pbml0KCk7XG4gICAgLy9SZXNpemUuYWRkTGlzdGVuZXIoKTtcblxuICAgIGJyYW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CcmFuZENsaWNrKTtcbiAgICBzZXJpZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblNlcmllc0NsaWNrKTtcbiAgICBicmFuZExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJyYW5kSXRlbUNsaWNrKTtcbiAgICBzZXJpZXNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TZXJpZXNJdGVtQ2xpY2spO1xuICAgIGJyYW5kU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQnJhbmRDaGFuZ2UpO1xuICAgIHNlcmllc1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvblNlcmllc0NoYW5nZSk7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uTGlua0NsaWNrKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk91dHNpZGVDbGljayk7XG4gIH07XG5cbiAgYmFja2VuZC5sb2FkKG1ha2VPcHRpb25Ob2RlKTtcblxufSkod2luZG93LmJhY2tlbmQsIHdpbmRvdy5QQUdFUyk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVxdWlwbWVudF9fd3JhcHBlcicpO1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXF1aXBtZW50X19jb250YWluZXInKTtcblxuICBpZighd3JhcHBlcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGluaXRTd2lwZXIgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTd2lwZXIoJy5lcXVpcG1lbnRfX2NvbnRhaW5lcicsIHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuZXF1aXBtZW50X19wYWdpbmF0aW9uJyxcbiAgICAgICAgdHlwZTogJ2J1bGxldHMnLFxuICAgICAgfSxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkU2xpZGVDbGFzcyA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IGl0ZW1zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZXF1aXBtZW50X19pdGVtJyk7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2xpZGUnKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJTbGlkZXIgPSAoKSA9PiB7XG4gICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgbGV0IHdyYXBwZXJOb2RlID0gd3JhcHBlci5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgd3JhcHBlck5vZGUuY2xhc3NOYW1lID0gJ2VxdWlwbWVudF9fc2xpZGUtd3JhcHBlcic7XG4gICAgd3JhcHBlck5vZGUuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXdyYXBwZXInKTtcblxuICAgIGxldCBwYWdpbmF0aW9uTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHBhZ2luYXRpb25Ob2RlLmNsYXNzTGlzdC5hZGQoJ2VxdWlwbWVudF9fcGFnaW5hdGlvbicpO1xuICAgIHBhZ2luYXRpb25Ob2RlLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1wYWdpbmF0aW9uJyk7XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh3cmFwcGVyTm9kZSk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocGFnaW5hdGlvbk5vZGUpO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICBhZGRTbGlkZUNsYXNzKGNvbnRhaW5lcik7XG5cbiAgICBpbml0U3dpcGVyKCk7XG4gIH07XG5cbiAgcmVuZGVyU2xpZGVyKCk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzX193cmFwcGVyJyk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzX19jb250YWluZXInKTtcblxuICBpZiAoIXdyYXBwZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBpbml0U3dpcGVyID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgU3dpcGVyKCcucHJvY2Vzc19fY29udGFpbmVyJywge1xuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5wcm9jZXNzX19wYWdpbmF0aW9uJyxcbiAgICAgICAgdHlwZTogJ2J1bGxldHMnLFxuICAgICAgfSxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkU2xpZGVDbGFzcyA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IGl0ZW1zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvY2Vzc19faXRlbScpO1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXNsaWRlJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkTnVtYmVyaW5nID0gKHN3aXBlcikgPT4ge1xuICAgIGNvbnN0IG51bWJlckZpZWxkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzX19udW1iZXInKTtcblxuICAgIHN3aXBlci5vbignc2xpZGVDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhzd2lwZXIucmVhbEluZGV4KTtcbiAgICAgIG51bWJlckZpZWxkLnRleHRDb250ZW50ID0gc3dpcGVyLnJlYWxJbmRleCArIDE7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyU2xpZGVyID0gKCkgPT4ge1xuICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIGxldCB3cmFwcGVyTm9kZSA9IHdyYXBwZXIuY2xvbmVOb2RlKHRydWUpO1xuICAgIHdyYXBwZXJOb2RlLmNsYXNzTmFtZSA9ICdwcm9jZXNzX19zbGlkZS13cmFwcGVyJztcbiAgICB3cmFwcGVyTm9kZS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItd3JhcHBlcicpO1xuXG4gICAgbGV0IHBhZ2luYXRpb25Ob2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcGFnaW5hdGlvbk5vZGUuY2xhc3NMaXN0LmFkZCgncHJvY2Vzc19fcGFnaW5hdGlvbicpO1xuICAgIHBhZ2luYXRpb25Ob2RlLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1wYWdpbmF0aW9uJyk7XG5cbiAgICBsZXQgbnVtYmVyTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG51bWJlck5vZGUuY2xhc3NOYW1lID0gJ3Byb2Nlc3NfX251bWJlcic7XG4gICAgbnVtYmVyTm9kZS50ZXh0Q29udGVudCA9IDE7XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh3cmFwcGVyTm9kZSk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocGFnaW5hdGlvbk5vZGUpO1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG51bWJlck5vZGUpO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICBhZGRTbGlkZUNsYXNzKGNvbnRhaW5lcik7XG5cbiAgICBjb25zdCBwcm9jZXNzU3dpcGVyID0gaW5pdFN3aXBlcigpO1xuICAgIGFkZE51bWJlcmluZyhwcm9jZXNzU3dpcGVyKTtcbiAgfTtcblxuICByZW5kZXJTbGlkZXIoKTtcbn0pKCk7XG4iXX0=
