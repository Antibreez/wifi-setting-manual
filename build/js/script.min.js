lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",s=200,n=300,i=function(e,t){var i=new XMLHttpRequest;return i.timeout=1e4,i.responseType="json",i.addEventListener("load",(function(){!function(e){return e.status<s||e.status>n}(i)?e(i.response):t("Данные не загрузились. Причина: "+i.status+" "+i.statusText)})),i.addEventListener("error",(function(){t("Произошла ошибка соединения")})),i.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+i.timeout+"мс")})),i},o=function(e){e.remove()},c=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(o,2e3,t)};window.backend={load:function(s,n){var o=i(s,n||c);o.open(t,e),o.send()}}}(),function(e){window.makeSelect=function(t){e(t).select2({minimumResultsForSearch:-1})}}(jQuery),function(){const e=document.querySelector(".model-choice__brand-select"),t=document.querySelectorAll(".model-choice__series-select");let s=-1;const n=e=>{e.classList.remove("select2-hidden-accessible"),e.removeAttribute("aria-hidden"),e.removeAttribute("tabindex")},i=e=>{e.classList.add("select2-hidden-accessible"),e.setAttribute("aria-hedden","true"),e.setAttribute("tabindex","-1")},o=()=>window.matchMedia("(max-width: 479px)").matches;let c=!o;const d=()=>{o()&&c&&(c=!1,n(e),-1!==s&&n(t[s]),a()),o()||c||(c=!0,i(e),-1!==s&&i(t[s]),l())},a=()=>{e.addEventListener("change",r)},l=()=>{e.removeEventListener("change",r)},r=e=>{-1!==s&&i(t[s]),s=e.target.selectedIndex,n(t[s])};window.Resize={addListener:()=>{window.addEventListener("resize",d)},init:()=>{o()&&(n(e),a())}}}(),function(e){let t="#";const s=document.querySelector(".model-choice__brand-list"),n=document.querySelector(".model-choice__brand-choice"),i=document.querySelector(".model-choice__series-list"),o=document.querySelector(".model-choice__series-choice"),c=document.querySelector(".model-choice__select-brand"),d=document.querySelector(".model-choice__select-series");let a=-1,l=-1;document.querySelector(".model-choice__series-wrapper"),document.querySelector("#series").content.querySelector(".model-choice__series-select");const r=document.querySelector(".model-choice__link"),m=()=>{if(!s.classList.contains("show"))return s.classList.add("show"),void n.classList.add("opened");s.classList.contains("show")&&(s.classList.remove("show"),n.classList.remove("opened"))},u=()=>{if(!i.classList.contains("show"))return i.classList.add("show"),void o.classList.add("opened");i.classList.contains("show")&&(i.classList.remove("show"),o.classList.remove("opened"))},h=e=>{let t=e.target;t.classList.contains("model-choice__brand-choice")||t.classList.contains("model-choice__brand-item")||t.classList.contains("model-choice__brand-list")||!s.classList.contains("show")||(s.classList.remove("show"),n.classList.remove("opened")),t.classList.contains("model-choice__series-choice")||t.classList.contains("model-choice__series-item")||t.classList.contains("model-choice__series-list")||!i.classList.contains("show")||(i.classList.remove("show"),o.classList.remove("opened"))};e.load(e=>{let L=document.createDocumentFragment(),v=0;e.forEach(e=>{let t=document.createElement("li");t.textContent=e.title,t.classList.add("model-choice__brand-item"),t.setAttribute("data-id",v),v++,L.appendChild(t)}),s.appendChild(L);let p=document.createDocumentFragment();e.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__brand-option"),t.setAttribute("data-id",v),p.appendChild(t)}),c.appendChild(p);n.addEventListener("click",m),o.addEventListener("click",u),s.addEventListener("click",t=>{let c=t.target,d=+c.getAttribute("data-id");if(c.classList.contains("model-choice__brand-item")&&(a===d&&(s.classList.remove("show"),n.classList.remove("opened")),a!==d)){i.innerHTML="",o.textContent="Выбрать из списка",o.classList.remove("selected");let t=document.createDocumentFragment(),d=+c.getAttribute("data-id");e[d].series.forEach(e=>{let s=document.createElement("li");s.textContent=e.title,s.classList.add("model-choice__series-item"),t.appendChild(s)}),i.appendChild(t),a=d,n.textContent=c.textContent,n.classList.contains("selected")||n.classList.add("selected"),o.hasAttribute("disabled")&&o.removeAttribute("disabled"),s.classList.remove("show"),n.classList.remove("opened"),r.classList.add("disabled"),r.removeAttribute("href")}}),i.addEventListener("click",e=>{let s=e.target;s.classList.contains("model-choice__series-item")&&(o.textContent=s.textContent,o.classList.contains("selected")||o.classList.add("selected"),i.classList.remove("show"),o.classList.remove("opened"),r.classList.remove("disabled"),t=s.textContent,r.setAttribute("href",t))}),c.addEventListener("change",t=>{l=t.target.selectedIndex-1,d.innerHTML="",o.textContent="Выбрать из списка",o.classList.remove("selected");let s=document.createElement("option");s.textContent="&nbsp;",s.setAttribute("disabled",""),s.style.display="none",d.appendChild(s);let i=document.createDocumentFragment();d.hasAttribute("disabled")&&d.removeAttribute("disabled"),e[l].series.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__series-option"),i.appendChild(t)}),d.appendChild(i),n.textContent=t.target.value,n.classList.contains("selected")||n.classList.add("selected"),r.classList.add("disabled"),r.removeAttribute("href")}),d.addEventListener("change",e=>{o.textContent=e.target.value,o.classList.contains("selected")||o.classList.add("selected"),r.classList.remove("disabled"),t=e.target.value,r.setAttribute("href",t)}),document.addEventListener("mousedown",h)})}(window.backend);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImJhY2tlbmQuanMiLCJzZWxlY3QuanMiLCJyZXNpemUuanMiLCJjaG9pY2UuanMiXSwibmFtZXMiOlsibG90dGllIiwibG9hZEFuaW1hdGlvbiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW5kZXJlciIsImxvb3AiLCJhdXRvcGxheSIsInBhdGgiLCJSZXFVcmwiLCJSZXFNZXRob2QiLCJSZXFTdGF0dXMiLCJjcmVhdGVSZXF1ZXN0Iiwib25Mb2FkIiwib25FcnJvciIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0dXMiLCJpc0Vycm9yU3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0IiwicmVtb3ZlRWxlbWVudCIsImVsZW1lbnQiLCJyZW1vdmUiLCJvbkFueUVycm9yIiwibWVzc2FnZSIsIm5vZGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImZvbnRTaXplIiwidGV4dENvbnRlbnQiLCJib2R5IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50Iiwid2luZG93Iiwic2V0VGltZW91dCIsImJhY2tlbmQiLCJsb2FkIiwicmVxIiwib3BlbiIsInNlbmQiLCIkIiwibWFrZVNlbGVjdCIsImVsZW1lbnRDbGFzcyIsInNlbGVjdDIiLCJtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCIsImpRdWVyeSIsImJyYW5kU2VsZWN0IiwicXVlcnlTZWxlY3RvciIsInNlcmllc1NlbGVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaWR4IiwicmVtb3ZlQ2xhc3MiLCJpdGVtIiwiY2xhc3NMaXN0IiwicmVtb3ZlQXR0cmlidXRlIiwiYWRkQ2xhc3MiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaXNPdXRPZk1vYmlsZSIsIm9uUmVzaXplIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIm9uQnJhbmRDaGFuZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0Iiwic2VsZWN0ZWRJbmRleCIsIlJlc2l6ZSIsImFkZExpc3RlbmVyIiwiaW5pdCIsImxpbmtIcmVmIiwiYnJhbmRMaXN0IiwiYnJhbmRCdXR0b24iLCJzZXJpZXNMaXN0Iiwic2VyaWVzQnV0dG9uIiwic2VyaWVzU2VsZWN0IiwiY3VycmVudEJyYW5kSWR4IiwiY3VycmVudE9wdGlvbklkeCIsImNvbnRlbnQiLCJsaW5rIiwib25CcmFuZENsaWNrIiwiY29udGFpbnMiLCJvblNlcmllc0NsaWNrIiwib25PdXRzaWRlQ2xpY2siLCJhcnIiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpIiwiZm9yRWFjaCIsImFwcGVuZENoaWxkIiwiZnJhZ21lbnQxIiwibm9kZTEiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJzZXJpZXMiLCJzZXJpZSIsImhhc0F0dHJpYnV0ZSIsImRpc3BsYXkiLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkFBQ0FBLE9BQUFDLGNBQUEsQ0FDQUMsVUFBQUMsU0FBQUMsZUFBQSxhQUNBQyxTQUFBLE1BQ0FDLE1BQUEsRUFDQUMsVUFBQSxFQUNBQyxLQUFBLGNDSkEsV0FDQSxJQUFBQyxFQUNBLDBDQUlBQyxFQUNBLE1BSUFDLEVBQ0EsSUFEQUEsRUFFQSxJQVVBQyxFQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQSxJQUFBQyxlQXNCQSxPQXBCQUQsRUFBQUUsUUFWQSxJQVdBRixFQUFBRyxhQUFBLE9BRUFILEVBQUFJLGlCQUFBLFFBQUEsWUFYQSxTQUFBSixHQUNBLE9BQUFBLEVBQUFLLE9BQUFULEdBQ0FJLEVBQUFLLE9BQUFULEVBVUFVLENBQUFOLEdBS0FGLEVBQUFFLEVBQUFPLFVBSkFSLEVBQUEsbUNBQUFDLEVBQUFLLE9BQUEsSUFBQUwsRUFBQVEsZUFPQVIsRUFB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QUFBLFlBQUF5RSxLQXBWQSxDQXlWQXJELE9BQUFFIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICBsb3R0aWUubG9hZEFuaW1hdGlvbih7XG4gICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uJyksIC8vIHRoZSBkb20gZWxlbWVudCB0aGF0IHdpbGwgY29udGFpbiB0aGUgYW5pbWF0aW9uXG4gICAgcmVuZGVyZXI6ICdzdmcnLFxuICAgIGxvb3A6IHRydWUsXG4gICAgYXV0b3BsYXk6IHRydWUsXG4gICAgcGF0aDogJ2RhdGEuanNvbicgLy8gdGhlIHBhdGggdG8gdGhlIGFuaW1hdGlvbiBqc29uXG4gIH0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFJlcVVybCA9IHtcbiAgICBHRVQ6ICdodHRwczovL3NwbGl0LmRhaWNoaWNsb3VkLnJ1L2JyYW5kcy9hbGwnLFxuICAgIC8vUE9TVDogJ2h0dHBzOi8vanMuZHVtcC5hY2FkZW15L2tla3N0YWdyYW0nXG4gIH07XG5cbiAgdmFyIFJlcU1ldGhvZCA9IHtcbiAgICBHRVQ6ICdHRVQnLFxuICAgIFBPU1Q6ICdQT1NUJ1xuICB9O1xuXG4gIHZhciBSZXFTdGF0dXMgPSB7XG4gICAgT0s6IDIwMCxcbiAgICBNVUxUSVBMRV9DSE9JQ0VTOiAzMDAsXG4gIH07XG5cbiAgdmFyIFRJTUVPVVQgPSAxMDAwMDtcblxuICB2YXIgaXNFcnJvclN0YXR1cyA9IGZ1bmN0aW9uICh4aHIpIHtcbiAgICByZXR1cm4geGhyLnN0YXR1cyA8IFJlcVN0YXR1cy5PS1xuICAgICAgfHwgeGhyLnN0YXR1cyA+IFJlcVN0YXR1cy5NVUxUSVBMRV9DSE9JQ0VTO1xuICB9O1xuXG4gIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci50aW1lb3V0ID0gVElNRU9VVDtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNFcnJvclN0YXR1cyh4aHIpKSB7XG4gICAgICAgIG9uRXJyb3IoJ9CU0LDQvdC90YvQtSDQvdC1INC30LDQs9GA0YPQt9C40LvQuNGB0YwuINCf0YDQuNGH0LjQvdCwOiAnICsgeGhyLnN0YXR1cyArICcgJyArIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvbkxvYWQoeGhyLnJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8nKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCd0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgb25FcnJvcign0JfQsNC/0YDQvtGBINC90LUg0YPRgdC/0LXQuyDQstGL0L/QvtC70L3QuNGC0YzRgdGPINC30LAgJyArIHhoci50aW1lb3V0ICsgJ9C80YEnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgdmFyIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gIH07XG5cbiAgdmFyIG9uQW55RXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbm9kZS5zdHlsZSA9ICd6LWluZGV4OiAxMDA7IG1hcmdpbjogMCBhdXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHJlZDsnO1xuICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG5vZGUuc3R5bGUubGVmdCA9IDA7XG4gICAgbm9kZS5zdHlsZS5yaWdodCA9IDA7XG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9ICczMHB4JztcblxuICAgIG5vZGUudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbm9kZSk7XG4gICAgd2luZG93LnNldFRpbWVvdXQocmVtb3ZlRWxlbWVudCwgMjAwMCwgbm9kZSk7XG4gIH07XG5cbiAgd2luZG93LmJhY2tlbmQgPSB7XG4gICAgbG9hZDogZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yIHx8IG9uQW55RXJyb3IpO1xuICAgICAgcmVxLm9wZW4oUmVxTWV0aG9kLkdFVCwgUmVxVXJsLkdFVCk7XG4gICAgICByZXEuc2VuZCgpO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlOiBmdW5jdGlvbiAoZGF0YSwgb25Mb2FkLCBvbkVycm9yKSB7XG4gICAgLy8gICB2YXIgcmVxID0gY3JlYXRlUmVxdWVzdChvbkxvYWQsIG9uRXJyb3IpO1xuICAgIC8vICAgcmVxLm9wZW4oUmVxTWV0aG9kLlBPU1QsIFJlcVVybC5QT1NUKTtcbiAgICAvLyAgIHJlcS5zZW5kKGRhdGEpO1xuICAgIC8vIH1cbiAgfTtcbn0pKCk7XG5cblxuXG5cbiIsIi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuLy8gICAvLyAkKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIC8vICQoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIGZ1bmN0aW9uIG1ha2VTZWxlY3QoZWxlbWVudCkge1xuLy8gICAgICQoZWxlbWVudCkuc2VsZWN0Mih7XG4vLyAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgICAgfSk7XG4vLyAgIH07XG5cblxuXG5cbi8vICAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xuXG4vLyAgIGNvbnNvbGUubG9nKHdpbmRvdy5tYWtlU2VsZWN0KTtcblxuLy8gfSk7XG5cblxuKGZ1bmN0aW9uKCQpIHtcbiAgZnVuY3Rpb24gbWFrZVNlbGVjdChlbGVtZW50Q2xhc3MpIHtcbiAgICAkKGVsZW1lbnRDbGFzcykuc2VsZWN0Mih7XG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4gICAgfSk7XG4gIH07XG5cbiAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jyk7XG4gIGNvbnN0IHNlcmllc1NlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG4gIGNvbnN0IGhpZGluZ0NsYXNzID0gJ3NlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUnO1xuXG4gIGxldCBpZHggPSAtMTtcblxuICBjb25zdCByZW1vdmVDbGFzcyA9IChpdGVtKSA9PiB7XG4gICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKGhpZGluZ0NsYXNzKTtcbiAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcbiAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgfTtcblxuICBjb25zdCBhZGRDbGFzcyA9IChpdGVtKSA9PiB7XG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKGhpZGluZ0NsYXNzKTtcbiAgICBpdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1oZWRkZW4nLCAndHJ1ZScpO1xuICAgIGl0ZW0uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICB9O1xuXG4gIGNvbnN0IGlzTW9iaWxlID0gKCkgPT4ge1xuICAgIHJldHVybiAgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQ3OXB4KScpLm1hdGNoZXM7XG4gIH07XG5cbiAgbGV0IGlzT3V0T2ZNb2JpbGUgPSAhaXNNb2JpbGU7XG5cbiAgY29uc3Qgb25SZXNpemUgPSAoKSA9PiB7XG4gICAgaWYgKGlzTW9iaWxlKCkgJiYgaXNPdXRPZk1vYmlsZSkge1xuICAgICAgaXNPdXRPZk1vYmlsZSA9IGZhbHNlO1xuXG4gICAgICByZW1vdmVDbGFzcyhicmFuZFNlbGVjdCk7XG5cbiAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgIHJlbW92ZUNsYXNzKHNlcmllc1NlbGVjdHNbaWR4XSk7XG4gICAgICB9XG5cbiAgICAgIGFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgaWYgKCFpc01vYmlsZSgpICYmICFpc091dE9mTW9iaWxlKSB7XG4gICAgICBpc091dE9mTW9iaWxlID0gdHJ1ZTtcblxuICAgICAgYWRkQ2xhc3MoYnJhbmRTZWxlY3QpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBhZGRDbGFzcyhzZXJpZXNTZWxlY3RzW2lkeF0pO1xuICAgICAgfVxuXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFkZEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGJyYW5kU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQnJhbmRDaGFuZ2UpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGJyYW5kU2VsZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQnJhbmRDaGFuZ2UpO1xuICB9O1xuXG4gIGNvbnN0IG9uQnJhbmRDaGFuZ2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgIGFkZENsYXNzKHNlcmllc1NlbGVjdHNbaWR4XSk7XG4gICAgfVxuXG4gICAgaWR4ID0gZXZ0LnRhcmdldC5zZWxlY3RlZEluZGV4O1xuXG4gICAgcmVtb3ZlQ2xhc3Moc2VyaWVzU2VsZWN0c1tpZHhdKTtcbiAgfTtcblxuICBcblxuICB3aW5kb3cuUmVzaXplID0ge1xuICAgIGFkZExpc3RlbmVyOiAoKSA9PiB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xuICAgIH0sXG5cbiAgICBpbml0OiAoKSA9PiB7XG4gICAgICBpZiAoaXNNb2JpbGUoKSkge1xuICAgICAgICByZW1vdmVDbGFzcyhicmFuZFNlbGVjdCk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFxufSkoKTtcbiIsIihmdW5jdGlvbiAoYmFja2VuZCkge1xuICAvLyBjb25zdCBzcGxpdHMgPSBbXG4gIC8vICAge1xuICAvLyAgICAgXCJpZFwiOjcsXG4gIC8vICAgICBcInRpdGxlXCI6XCJBeGlvbWFcIixcbiAgLy8gICAgIFwic2VyaWVzXCI6W1xuICAvLyAgICAgICB7XG4gIC8vICAgICAgICAgXCJpZFwiOjYzLFxuICAvLyAgICAgICAgIFwidGl0bGVcIjpcIkFTWF9BXCJcbiAgLy8gICAgICAgfSxcbiAgLy8gICAgICAge1xuICAvLyAgICAgICAgIFwiaWRcIjo2MixcbiAgLy8gICAgICAgICBcInRpdGxlXCI6XCJBU1hfQVpcIlxuICAvLyAgICAgICB9XG4gIC8vICAgICBdXG4gIC8vICAgfSxcbiAgLy8gICB7XCJpZFwiOjYsXCJ0aXRsZVwiOlwiRGFpY2hpXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjo0NSxcInRpdGxlXCI6XCJDYXJib24gREFfRFZRXCJ9LHtcImlkXCI6NDYsXCJ0aXRsZVwiOlwiRXZlcmVzdCBEQV9FVlFcIn0se1wiaWRcIjo0MyxcInRpdGxlXCI6XCJQZWFrIERBX0FWUVNcIn0se1wiaWRcIjo0MixcInRpdGxlXCI6XCJYLXRyZW1lIFBlYWsgREFfQVZRU1wifV19LFxuICAvLyAgIHtcImlkXCI6MSxcInRpdGxlXCI6XCJEYWlraW5cIixcInNlcmllc1wiOlt7XCJpZFwiOjExLFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYLUpcXC9HVlwifSx7XCJpZFwiOjI2LFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYUC1LM1wifSx7XCJpZFwiOjI3LFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYUC1MXCJ9LHtcImlkXCI6MjgsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLU1cIn0se1wiaWRcIjoyMyxcInRpdGxlXCI6XCJFbXVyYSBGVFhHLUxcIn0se1wiaWRcIjoxOCxcInRpdGxlXCI6XCJFbXVyYSBGVFhKLU1cIn0se1wiaWRcIjoyMCxcInRpdGxlXCI6XCJGTFhTLUJcIn0se1wiaWRcIjoxNixcInRpdGxlXCI6XCJGVFhCLUJcIn0se1wiaWRcIjo2NSxcInRpdGxlXCI6XCJGVFhTLUVcIn0se1wiaWRcIjo2NCxcInRpdGxlXCI6XCJGVFhTLUpcXC9HXCJ9LHtcImlkXCI6MjEsXCJ0aXRsZVwiOlwiRlZYTS1GXCJ9LHtcImlkXCI6MjIsXCJ0aXRsZVwiOlwiRlZYUy1GXCJ9LHtcImlkXCI6MTksXCJ0aXRsZVwiOlwiTmV4dXJhIEZWWEctS1wifSx7XCJpZFwiOjI0LFwidGl0bGVcIjpcIlBlcmZlcmEgRlRYTS1OXCJ9LHtcImlkXCI6MjUsXCJ0aXRsZVwiOlwiUGVyZmVyYSBGVFhTLUtcIn0se1wiaWRcIjoxLFwidGl0bGVcIjpcIlNlbnNpcmEgRlRYQi1DXCJ9XX0sXG4gIC8vICAge1wiaWRcIjoyLFwidGl0bGVcIjpcIktlbnRhdHN1XCIsXCJzZXJpZXNcIjpbe1wiaWRcIjo0OSxcInRpdGxlXCI6XCJCcmF2byAgS1NHQl9IRkFOXCJ9LHtcImlkXCI6NTAsXCJ0aXRsZVwiOlwiQnJhdm8gIEtTR0JBX0haQU5cIn0se1wiaWRcIjo1NixcInRpdGxlXCI6XCJLTUdCQV9IWkFOXCJ9LHtcImlkXCI6NTcsXCJ0aXRsZVwiOlwiS01HQkJfSFpBTlwifSx7XCJpZFwiOjUyLFwidGl0bGVcIjpcIlRlYW0gIEtTR1RfSFpBTlwifSx7XCJpZFwiOjQ3LFwidGl0bGVcIjpcIlRpdGFuIEdlbmVzaXMgS1NHWFwifSx7XCJpZFwiOjUxLFwidGl0bGVcIjpcIlR1cmluIEtTR1VfSFpBTlwifV19LFxuICAvLyAgIHtcImlkXCI6OCxcInRpdGxlXCI6XCJNaWRlYVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NjEsXCJ0aXRsZVwiOlwiQmxhbmMgTVNNQVwifSx7XCJpZFwiOjYwLFwidGl0bGVcIjpcIkJsYW5jIE1TTUEgRVJQIChNQSlcIn0se1wiaWRcIjo1OSxcInRpdGxlXCI6XCJNaXNzaW9uIE1TTUIgKE1CKVwifSx7XCJpZFwiOjU4LFwidGl0bGVcIjpcIlVsdGltYXRlIENvbWZvcnQgTVNNVCAoTVQpXCJ9XX1dO1xuXG4gIGxldCBsaW5rSHJlZiA9ICcjJztcblxuICBjb25zdCBicmFuZENsYXNzID0gJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCc7XG4gIGNvbnN0IHNlcmllc0NsYXNzID0gJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnO1xuXG4gIGNvbnN0IGJyYW5kTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLWxpc3QnKTtcbiAgY29uc3QgYnJhbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1jaG9pY2UnKTtcbiAgY29uc3Qgc2VyaWVzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1saXN0Jyk7XG4gIGNvbnN0IHNlcmllc0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1jaG9pY2UnKTtcbiAgY29uc3QgYnJhbmRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZWxlY3QtYnJhbmQnKTtcbiAgY29uc3Qgc2VyaWVzU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VsZWN0LXNlcmllcycpO1xuXG4gIGxldCBjdXJyZW50QnJhbmRJZHggPSAtMTtcbiAgbGV0IGN1cnJlbnRPcHRpb25JZHggPSAtMTtcblxuICAvL2NvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jyk7XG4gIGNvbnN0IHNlcmllc1dyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtd3JhcHBlcicpO1xuICBjb25zdCBzZXJpZXNUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXJpZXMnKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKTtcblxuICBjb25zdCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fbGluaycpO1xuXG4gIGNvbnN0IG9uQnJhbmRDbGljayA9ICgpID0+IHtcbiAgICBpZiAoIWJyYW5kTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xuICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChicmFuZExpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9XG4gICAgLy8galF1ZXJ5KCcubW9kZWwtY2hvaWNlX19icmFuZC1saXN0JykubUN1c3RvbVNjcm9sbGJhcih7XG4gICAgLy8gICBzZXRIZWlnaHQ6IDE4OSxcbiAgICAvLyAgIGF1dG9IaWRlU2Nyb2xsYmFyOiBmYWxzZSxcbiAgICAvLyAgIHRoZW1lOiAnZGFyaycsXG4gICAgLy8gICBtb3VzZVdoZWVsUGl4ZWxzOiAyMDAsXG4gICAgLy8gICBjb250ZW50VG91Y2hTY3JvbGw6IHRydWVcbiAgICAvLyB9KTtcbiAgfTtcblxuICBjb25zdCBvblNlcmllc0NsaWNrID0gKCkgPT4ge1xuICAgIGlmICghc2VyaWVzTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xuICAgICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhzZXJpZXNMaXN0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSAtIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNlcmllc0xpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvbk91dHNpZGVDbGljayA9IChldnQpID0+IHtcbiAgICBsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcblxuICAgIGlmIChcbiAgICAgICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWNob2ljZScpXG4gICAgICAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1pdGVtJylcbiAgICAgICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWxpc3QnKVxuICAgICAgJiYgYnJhbmRMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpXG4gICAgKSB7XG4gICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWNob2ljZScpXG4gICAgICAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19zZXJpZXMtaXRlbScpXG4gICAgICAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19zZXJpZXMtbGlzdCcpXG4gICAgICAmJiBzZXJpZXNMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpXG4gICAgKSB7XG4gICAgICBzZXJpZXNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgbWFrZU9wdGlvbk5vZGUgPSAoYXJyKSA9PiB7XG4gICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGxldCBpID0gMDtcblxuICAgIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBub2RlLnRleHRDb250ZW50ID0gaXRlbVsndGl0bGUnXTtcbiAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnbW9kZWwtY2hvaWNlX19icmFuZC1pdGVtJyk7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGkpO1xuICAgICAgaSsrO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICAgIC8vIGxldCBzZXJpZXNTZWxlY3QgPSBzZXJpZXNUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAvLyBzZXJpZXNTZWxlY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAvLyBzZXJpZXNTZWxlY3Quc2V0QXR0cmlidXRlKCduYW1lJywgaXRlbVsndGl0bGUnXSk7XG5cbiAgICAgIC8vIGl0ZW0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAvLyAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAvLyAgIG5vZGUuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHNlcmllWyd0aXRsZSddKTtcbiAgICAgIC8vICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgICAgLy8gICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAvLyB9KTtcblxuICAgICAgLy8gc2VyaWVzV3JhcHBlci5hcHBlbmRDaGlsZChzZXJpZXNTZWxlY3QpO1xuICAgIH0pO1xuXG4gICAgYnJhbmRMaXN0LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuXG4gICAgbGV0IGZyYWdtZW50MSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBsZXQgaiA9IDA7XG5cbiAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgbGV0IG5vZGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBub2RlMS50ZXh0Q29udGVudCA9IGl0ZW1bJ3RpdGxlJ107XG4gICAgICBub2RlMS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX2JyYW5kLW9wdGlvbicpO1xuICAgICAgbm9kZTEuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaSk7XG4gICAgICBqKys7XG4gICAgICBmcmFnbWVudDEuYXBwZW5kQ2hpbGQobm9kZTEpO1xuXG4gICAgICAvLyBsZXQgc2VyaWVzU2VsZWN0ID0gc2VyaWVzVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgLy8gc2VyaWVzU2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgLy8gc2VyaWVzU2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsIGl0ZW1bJ3RpdGxlJ10pO1xuXG4gICAgICAvLyBpdGVtLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgICAgLy8gICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgLy8gICBub2RlLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBzZXJpZVsndGl0bGUnXSk7XG4gICAgICAvLyAgIG5vZGUudGV4dENvbnRlbnQgPSBzZXJpZVsndGl0bGUnXTtcbiAgICAgIC8vICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgLy8gfSk7XG5cbiAgICAgIC8vIHNlcmllc1dyYXBwZXIuYXBwZW5kQ2hpbGQoc2VyaWVzU2VsZWN0KTtcbiAgICB9KTtcblxuICAgIGJyYW5kU2VsZWN0LmFwcGVuZENoaWxkKGZyYWdtZW50MSk7XG5cblxuXG4gICAgY29uc3Qgb25CcmFuZEl0ZW1DbGljayA9IChldnQpID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuICAgICAgbGV0IGlkeCA9ICt0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG5cbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWl0ZW0nKSkge1xuICAgICAgICBpZiAoY3VycmVudEJyYW5kSWR4ID09PSBpZHgpIHtcbiAgICAgICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGN1cnJlbnRCcmFuZElkeCAhPT0gaWR4KSB7XG4gICAgICAgICAgc2VyaWVzTGlzdC5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICAgIHNlcmllc0J1dHRvbi50ZXh0Q29udGVudCA9ICfQktGL0LHRgNCw0YLRjCDQuNC3INGB0L/QuNGB0LrQsCc7XG4gICAgICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG5cbiAgICAgICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgICAgbGV0IGlkeCA9ICt0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG5cbiAgICAgICAgICBhcnJbaWR4XS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAgICAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBzZXJpZVsndGl0bGUnXTtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnbW9kZWwtY2hvaWNlX19zZXJpZXMtaXRlbScpO1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzZXJpZXNMaXN0LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgICBjdXJyZW50QnJhbmRJZHggPSBpZHg7XG5cbiAgICAgICAgICBicmFuZEJ1dHRvbi50ZXh0Q29udGVudCA9IHRhcmdldC50ZXh0Q29udGVudDtcbiAgICAgICAgICBpZiAoIWJyYW5kQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VyaWVzQnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgc2VyaWVzQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvbkJyYW5kQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgICAgY3VycmVudE9wdGlvbklkeCA9IGV2dC50YXJnZXQuc2VsZWN0ZWRJbmRleCAtIDE7XG4gICAgICBzZXJpZXNTZWxlY3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgIHNlcmllc0J1dHRvbi50ZXh0Q29udGVudCA9ICfQktGL0LHRgNCw0YLRjCDQuNC3INGB0L/QuNGB0LrQsCc7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSAnJm5ic3A7JztcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgIGlmIChzZXJpZXNTZWxlY3QuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgIHNlcmllc1NlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICB9XG5cblxuICAgICAgYXJyW2N1cnJlbnRPcHRpb25JZHhdLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnbW9kZWwtY2hvaWNlX19zZXJpZXMtb3B0aW9uJyk7XG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgfSk7XG5cbiAgICAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIGJyYW5kQnV0dG9uLnRleHRDb250ZW50ID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAgIGlmICghYnJhbmRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgb25TZXJpZXNJdGVtQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcblxuICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWl0ZW0nKSkge1xuICAgICAgICBzZXJpZXNCdXR0b24udGV4dENvbnRlbnQgPSB0YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgIGlmICghc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcblxuICAgICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIGxpbmtIcmVmID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGxpbmtIcmVmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvblNlcmllc0NoYW5nZSA9IChldnQpID0+IHtcbiAgICAgIHNlcmllc0J1dHRvbi50ZXh0Q29udGVudCA9IGV2dC50YXJnZXQudmFsdWU7XG4gICAgICBpZiAoIXNlcmllc0J1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgIGxpbmtIcmVmID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgbGlua0hyZWYpO1xuICAgIH1cblxuICAgIC8vbGV0IHNwbGl0c0RhdGEgPSBiYWNrZW5kLmxvYWQoZ2V0RGF0YSk7XG5cbiAgICAvL2JyYW5kU2VsZWN0LmFwcGVuZENoaWxkKG1ha2VPcHRpb25Ob2RlKHNwbGl0cykpO1xuICAgIC8vbWFrZU9wdGlvbk5vZGUoc3BsaXRzKTtcbiAgICAvL2JhY2tlbmQubG9hZChtYWtlT3B0aW9uTm9kZSk7XG5cblxuICAgIC8vIG1ha2VTZWxlY3QoYnJhbmRDbGFzcyk7XG4gICAgLy8gbWFrZVNlbGVjdChzZXJpZXNDbGFzcyk7XG5cbiAgICAvLyBqUXVlcnkoYnJhbmRDbGFzcykuc2VsZWN0Mignb3BlbicpO1xuICAgIC8vIGpRdWVyeShicmFuZENsYXNzKS5zZWxlY3QyKCdjbG9zZScpO1xuXG5cbiAgICAvLyBjb25zdCBzZXJpZXNTZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuXG5cbiAgICAvLyBjb25zdCBoaWRlU2VyaWVzID0gKCkgPT4ge1xuICAgIC8vICAgc2VyaWVzU2VsZWN0cy5mb3JFYWNoKChzZWxlY3QpID0+IHtcbiAgICAvLyAgICAgaWYgKCFzZWxlY3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgIC8vICAgICAgIHNlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAvLyAgICAgICBzZWxlY3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9KVxuICAgIC8vIH07XG5cbiAgICAvLyBjb25zdCBzaG93U2VyaWVzID0gKGlkeCkgPT4ge1xuICAgIC8vICAgc2VyaWVzU2VsZWN0c1tpZHhdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIC8vICAgc2VyaWVzU2VsZWN0c1tpZHhdLnNldEF0dHJpYnV0ZSgnaWQnLCAnc2VyaWVzLXNlbGVjdCcpO1xuICAgIC8vIH07XG5cbiAgICAvLyBqUXVlcnkoYnJhbmRDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAvLyAgIGxldCBpZHggPSAralF1ZXJ5KCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3Qgb3B0aW9uOnNlbGVjdGVkJykuYXR0cignZGF0YS1pZCcpO1xuXG4gICAgLy8gICBoaWRlU2VyaWVzKCk7XG4gICAgLy8gICBzaG93U2VyaWVzKGlkeCArIDEpO1xuXG4gICAgLy8gICBqUXVlcnkoJyNzZXJpZXMtc2VsZWN0Jykuc2VsZWN0Mignb3BlbicpO1xuICAgIC8vICAgalF1ZXJ5KCcjc2VyaWVzLXNlbGVjdCcpLnNlbGVjdDIoJ2Nsb3NlJyk7XG5cbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgLy8gICBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIGpRdWVyeShzZXJpZXNDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAvLyAgIGlmIChsaW5rLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkge1xuICAgIC8vICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgLy8gICB9XG5cbiAgICAvLyAgIGxldCB2YWx1ZSA9IGpRdWVyeShldnQudGFyZ2V0KS5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpO1xuICAgIC8vICAgbGlua0hyZWYgPSB2YWx1ZTtcblxuXG4gICAgLy8gICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGxpbmtIcmVmKTtcblxuICAgIC8vICAgalF1ZXJ5KCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgLy8gfSk7XG5cbiAgICAvL1Jlc2l6ZS5pbml0KCk7XG4gICAgLy9SZXNpemUuYWRkTGlzdGVuZXIoKTtcblxuICAgIGJyYW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CcmFuZENsaWNrKTtcbiAgICBzZXJpZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblNlcmllc0NsaWNrKTtcbiAgICBicmFuZExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJyYW5kSXRlbUNsaWNrKTtcbiAgICBzZXJpZXNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TZXJpZXNJdGVtQ2xpY2spO1xuICAgIGJyYW5kU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQnJhbmRDaGFuZ2UpO1xuICAgIHNlcmllc1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvblNlcmllc0NoYW5nZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25PdXRzaWRlQ2xpY2spO1xuICB9O1xuXG4gIGJhY2tlbmQubG9hZChtYWtlT3B0aW9uTm9kZSk7XG5cbn0pKHdpbmRvdy5iYWNrZW5kKTtcbiJdfQ==
