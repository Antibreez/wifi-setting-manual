lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",s=200,i=300,n=function(e,t){var n=new XMLHttpRequest;return n.timeout=1e4,n.responseType="json",n.addEventListener("load",(function(){!function(e){return e.status<s||e.status>i}(n)?e(n.response):t("Данные не загрузились. Причина: "+n.status+" "+n.statusText)})),n.addEventListener("error",(function(){t("Произошла ошибка соединения")})),n.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+n.timeout+"мс")})),n},o=function(e){e.remove()},c=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(o,2e3,t)};window.backend={load:function(s,i){var o=n(s,i||c);o.open(t,e),o.send()}}}(),function(e){window.makeSelect=function(t){e(t).select2({minimumResultsForSearch:-1})}}(jQuery),function(){const e=document.querySelector(".model-choice__brand-select"),t=document.querySelectorAll(".model-choice__series-select");let s=-1;const i=e=>{e.classList.remove("select2-hidden-accessible"),e.removeAttribute("aria-hidden"),e.removeAttribute("tabindex")},n=e=>{e.classList.add("select2-hidden-accessible"),e.setAttribute("aria-hedden","true"),e.setAttribute("tabindex","-1")},o=()=>window.matchMedia("(max-width: 479px)").matches;let c=!o;const d=()=>{o()&&c&&(c=!1,i(e),-1!==s&&i(t[s]),a()),o()||c||(c=!0,n(e),-1!==s&&n(t[s]),l())},a=()=>{e.addEventListener("change",r)},l=()=>{e.removeEventListener("change",r)},r=e=>{-1!==s&&n(t[s]),s=e.target.selectedIndex,i(t[s])};window.Resize={addListener:()=>{window.addEventListener("resize",d)},init:()=>{o()&&(i(e),a())}}}(),function(e){let t="#";const s=document.querySelector(".model-choice__brand-list"),i=document.querySelector(".model-choice__brand-choice"),n=document.querySelector(".model-choice__series-list"),o=document.querySelector(".model-choice__series-choice"),c=document.querySelector(".model-choice__select-brand"),d=document.querySelector(".model-choice__select-series");let a=-1,l=-1;document.querySelector(".model-choice__series-wrapper"),document.querySelector("#series").content.querySelector(".model-choice__series-select");const r=document.querySelector(".model-choice__link"),m=()=>{if(!s.classList.contains("show"))return s.classList.add("show"),void i.classList.add("opened");s.classList.contains("show")&&(s.classList.remove("show"),i.classList.remove("opened"))},u=()=>{if(!n.classList.contains("show"))return n.classList.add("show"),void o.classList.add("opened");n.classList.contains("show")&&(n.classList.remove("show"),o.classList.remove("opened"))},h=e=>{let t=e.target;t.classList.contains("model-choice__brand-choice")||t.classList.contains("model-choice__brand-item")||t.classList.contains("model-choice__brand-list")||!s.classList.contains("show")||(s.classList.remove("show"),i.classList.remove("opened")),t.classList.contains("model-choice__series-choice")||t.classList.contains("model-choice__series-item")||t.classList.contains("model-choice__series-list")||!n.classList.contains("show")||(n.classList.remove("show"),o.classList.remove("opened"))};e.load(e=>{let L=document.createDocumentFragment(),v=0;e.forEach(e=>{let t=document.createElement("li");t.textContent=e.title,t.classList.add("model-choice__brand-item"),t.setAttribute("data-id",v),v++,L.appendChild(t)}),s.appendChild(L);let p=document.createDocumentFragment();e.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__brand-option"),t.setAttribute("data-id",v),p.appendChild(t)}),c.appendChild(p);i.addEventListener("click",m),o.addEventListener("click",u),s.addEventListener("click",t=>{let c=t.target,d=+c.getAttribute("data-id");if(c.classList.contains("model-choice__brand-item")&&(a===d&&(s.classList.remove("show"),i.classList.remove("opened")),a!==d)){n.innerHTML="",o.textContent="Выбрать из списка",o.classList.remove("selected");let t=document.createDocumentFragment(),d=+c.getAttribute("data-id");e[d].series.forEach(e=>{let s=document.createElement("li");s.textContent=e.title,s.classList.add("model-choice__series-item"),t.appendChild(s)}),n.appendChild(t),a=d,i.textContent=c.textContent,i.classList.contains("selected")||i.classList.add("selected"),o.hasAttribute("disabled")&&o.removeAttribute("disabled"),s.classList.remove("show"),i.classList.remove("opened"),r.classList.add("disabled"),r.removeAttribute("href")}}),n.addEventListener("click",e=>{let s=e.target;s.classList.contains("model-choice__series-item")&&(o.textContent=s.textContent,o.classList.contains("selected")||o.classList.add("selected"),n.classList.remove("show"),o.classList.remove("opened"),r.classList.remove("disabled"),t=s.textContent,r.setAttribute("href",t))}),c.addEventListener("change",t=>{l=t.target.selectedIndex-1,d.innerHTML="",o.textContent="Выбрать из списка",o.classList.remove("selected");let s=document.createElement("option");s.textContent="Выбрать из списка",s.setAttribute("disabled",""),s.style.display="none",d.appendChild(s);let n=document.createDocumentFragment();d.hasAttribute("disabled")&&d.removeAttribute("disabled"),e[l].series.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__series-option"),n.appendChild(t)}),d.appendChild(n),i.textContent=t.target.value,i.classList.contains("selected")||i.classList.add("selected"),r.classList.add("disabled"),r.removeAttribute("href")}),d.addEventListener("change",e=>{o.textContent=e.target.value,o.classList.contains("selected")||o.classList.add("selected"),r.classList.remove("disabled"),t=e.target.value,r.setAttribute("href",t)}),document.addEventListener("mousedown",h)})}(window.backend);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImJhY2tlbmQuanMiLCJzZWxlY3QuanMiLCJyZXNpemUuanMiLCJjaG9pY2UuanMiXSwibmFtZXMiOlsibG90dGllIiwibG9hZEFuaW1hdGlvbiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW5kZXJlciIsImxvb3AiLCJhdXRvcGxheSIsInBhdGgiLCJSZXFVcmwiLCJSZXFNZXRob2QiLCJSZXFTdGF0dXMiLCJjcmVhdGVSZXF1ZXN0Iiwib25Mb2FkIiwib25FcnJvciIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0dXMiLCJpc0Vycm9yU3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0IiwicmVtb3ZlRWxlbWVudCIsImVsZW1lbnQiLCJyZW1vdmUiLCJvbkFueUVycm9yIiwibWVzc2FnZSIsIm5vZGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImZvbnRTaXplIiwidGV4dENvbnRlbnQiLCJib2R5IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50Iiwid2luZG93Iiwic2V0VGltZW91dCIsImJhY2tlbmQiLCJsb2FkIiwicmVxIiwib3BlbiIsInNlbmQiLCIkIiwibWFrZVNlbGVjdCIsImVsZW1lbnRDbGFzcyIsInNlbGVjdDIiLCJtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCIsImpRdWVyeSIsImJyYW5kU2VsZWN0IiwicXVlcnlTZWxlY3RvciIsInNlcmllc1NlbGVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaWR4IiwicmVtb3ZlQ2xhc3MiLCJpdGVtIiwiY2xhc3NMaXN0IiwicmVtb3ZlQXR0cmlidXRlIiwiYWRkQ2xhc3MiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaXNPdXRPZk1vYmlsZSIsIm9uUmVzaXplIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIm9uQnJhbmRDaGFuZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0Iiwic2VsZWN0ZWRJbmRleCIsIlJlc2l6ZSIsImFkZExpc3RlbmVyIiwiaW5pdCIsImxpbmtIcmVmIiwiYnJhbmRMaXN0IiwiYnJhbmRCdXR0b24iLCJzZXJpZXNMaXN0Iiwic2VyaWVzQnV0dG9uIiwic2VyaWVzU2VsZWN0IiwiY3VycmVudEJyYW5kSWR4IiwiY3VycmVudE9wdGlvbklkeCIsImNvbnRlbnQiLCJsaW5rIiwib25CcmFuZENsaWNrIiwiY29udGFpbnMiLCJvblNlcmllc0NsaWNrIiwib25PdXRzaWRlQ2xpY2siLCJhcnIiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpIiwiZm9yRWFjaCIsImFwcGVuZENoaWxkIiwiZnJhZ21lbnQxIiwibm9kZTEiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJzZXJpZXMiLCJzZXJpZSIsImhhc0F0dHJpYnV0ZSIsImRpc3BsYXkiLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkFBQ0FBLE9BQUFDLGNBQUEsQ0FDQUMsVUFBQUMsU0FBQUMsZUFBQSxhQUNBQyxTQUFBLE1BQ0FDLE1BQUEsRUFDQUMsVUFBQSxFQUNBQyxLQUFBLGNDSkEsV0FDQSxJQUFBQyxFQUNBLDBDQUlBQyxFQUNBLE1BSUFDLEVBQ0EsSUFEQUEsRUFFQSxJQVVBQyxFQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQSxJQUFBQyxlQXNCQSxPQXBCQUQsRUFBQUUsUUFWQSxJQVdBRixFQUFBRyxhQUFBLE9BRUFILEVBQUFJLGlCQUFBLFFBQUEsWUFYQSxTQUFBSixHQUNBLE9BQUFBLEVBQUFLLE9BQUFULEdBQ0FJLEVBQUFLLE9BQUFULEVBVUFVLENBQUFOLEdBS0FGLEVBQUFFLEVBQUFPLFVBSkFSLEVBQUEsbUNBQUFDLEVBQUFLLE9BQUEsSUFBQUwsRUFBQVEsZUFPQVIsRUFB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QkFBQSxZQUFBeUUsS0FwVkEsQ0F5VkFyRCxPQUFBRSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgbG90dGllLmxvYWRBbmltYXRpb24oe1xuICAgIGNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuaW1hdGlvbicpLCAvLyB0aGUgZG9tIGVsZW1lbnQgdGhhdCB3aWxsIGNvbnRhaW4gdGhlIGFuaW1hdGlvblxuICAgIHJlbmRlcmVyOiAnc3ZnJyxcbiAgICBsb29wOiB0cnVlLFxuICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgIHBhdGg6ICdkYXRhLmpzb24nIC8vIHRoZSBwYXRoIHRvIHRoZSBhbmltYXRpb24ganNvblxuICB9KTtcbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBSZXFVcmwgPSB7XG4gICAgR0VUOiAnaHR0cHM6Ly9zcGxpdC5kYWljaGljbG91ZC5ydS9icmFuZHMvYWxsJyxcbiAgICAvL1BPU1Q6ICdodHRwczovL2pzLmR1bXAuYWNhZGVteS9rZWtzdGFncmFtJ1xuICB9O1xuXG4gIHZhciBSZXFNZXRob2QgPSB7XG4gICAgR0VUOiAnR0VUJyxcbiAgICBQT1NUOiAnUE9TVCdcbiAgfTtcblxuICB2YXIgUmVxU3RhdHVzID0ge1xuICAgIE9LOiAyMDAsXG4gICAgTVVMVElQTEVfQ0hPSUNFUzogMzAwLFxuICB9O1xuXG4gIHZhciBUSU1FT1VUID0gMTAwMDA7XG5cbiAgdmFyIGlzRXJyb3JTdGF0dXMgPSBmdW5jdGlvbiAoeGhyKSB7XG4gICAgcmV0dXJuIHhoci5zdGF0dXMgPCBSZXFTdGF0dXMuT0tcbiAgICAgIHx8IHhoci5zdGF0dXMgPiBSZXFTdGF0dXMuTVVMVElQTEVfQ0hPSUNFUztcbiAgfTtcblxuICB2YXIgY3JlYXRlUmVxdWVzdCA9IGZ1bmN0aW9uIChvbkxvYWQsIG9uRXJyb3IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICB4aHIudGltZW91dCA9IFRJTUVPVVQ7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzRXJyb3JTdGF0dXMoeGhyKSkge1xuICAgICAgICBvbkVycm9yKCfQlNCw0L3QvdGL0LUg0L3QtSDQt9Cw0LPRgNGD0LfQuNC70LjRgdGMLiDQn9GA0LjRh9C40L3QsDogJyArIHhoci5zdGF0dXMgKyAnICcgKyB4aHIuc3RhdHVzVGV4dCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb25Mb2FkKHhoci5yZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICBvbkVycm9yKCfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINGB0L7QtdC00LjQvdC10L3QuNGPJyk7XG4gICAgfSk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigndGltZW91dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9CX0LDQv9GA0L7RgSDQvdC1INGD0YHQv9C10Lsg0LLRi9C/0L7Qu9C90LjRgtGM0YHRjyDQt9CwICcgKyB4aHIudGltZW91dCArICfQvNGBJyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4geGhyO1xuICB9O1xuXG4gIHZhciByZW1vdmVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnJlbW92ZSgpO1xuICB9O1xuXG4gIHZhciBvbkFueUVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vZGUuc3R5bGUgPSAnei1pbmRleDogMTAwOyBtYXJnaW46IDAgYXV0bzsgdGV4dC1hbGlnbjogY2VudGVyOyBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7JztcbiAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBub2RlLnN0eWxlLmxlZnQgPSAwO1xuICAgIG5vZGUuc3R5bGUucmlnaHQgPSAwO1xuICAgIG5vZGUuc3R5bGUuZm9udFNpemUgPSAnMzBweCc7XG5cbiAgICBub2RlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIG5vZGUpO1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJlbW92ZUVsZW1lbnQsIDIwMDAsIG5vZGUpO1xuICB9O1xuXG4gIHdpbmRvdy5iYWNrZW5kID0ge1xuICAgIGxvYWQ6IGZ1bmN0aW9uIChvbkxvYWQsIG9uRXJyb3IpIHtcbiAgICAgIHZhciByZXEgPSBjcmVhdGVSZXF1ZXN0KG9uTG9hZCwgb25FcnJvciB8fCBvbkFueUVycm9yKTtcbiAgICAgIHJlcS5vcGVuKFJlcU1ldGhvZC5HRVQsIFJlcVVybC5HRVQpO1xuICAgICAgcmVxLnNlbmQoKTtcbiAgICB9LFxuXG4gICAgLy8gc2F2ZTogZnVuY3Rpb24gKGRhdGEsIG9uTG9hZCwgb25FcnJvcikge1xuICAgIC8vICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yKTtcbiAgICAvLyAgIHJlcS5vcGVuKFJlcU1ldGhvZC5QT1NULCBSZXFVcmwuUE9TVCk7XG4gICAgLy8gICByZXEuc2VuZChkYXRhKTtcbiAgICAvLyB9XG4gIH07XG59KSgpO1xuXG5cblxuXG4iLCIvLyAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbi8vICAgLy8gJCgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jykuc2VsZWN0Mih7XG4vLyAgIC8vICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuLy8gICAvLyB9KTtcblxuLy8gICAvLyAkKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jykuc2VsZWN0Mih7XG4vLyAgIC8vICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuLy8gICAvLyB9KTtcblxuLy8gICBmdW5jdGlvbiBtYWtlU2VsZWN0KGVsZW1lbnQpIHtcbi8vICAgICAkKGVsZW1lbnQpLnNlbGVjdDIoe1xuLy8gICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuLy8gICAgIH0pO1xuLy8gICB9O1xuXG5cblxuXG4vLyAgIHdpbmRvdy5tYWtlU2VsZWN0ID0gbWFrZVNlbGVjdDtcblxuLy8gICBjb25zb2xlLmxvZyh3aW5kb3cubWFrZVNlbGVjdCk7XG5cbi8vIH0pO1xuXG5cbihmdW5jdGlvbigkKSB7XG4gIGZ1bmN0aW9uIG1ha2VTZWxlY3QoZWxlbWVudENsYXNzKSB7XG4gICAgJChlbGVtZW50Q2xhc3MpLnNlbGVjdDIoe1xuICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuICAgIH0pO1xuICB9O1xuXG4gIHdpbmRvdy5tYWtlU2VsZWN0ID0gbWFrZVNlbGVjdDtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICBjb25zdCBicmFuZFNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCcpO1xuICBjb25zdCBzZXJpZXNTZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuICBjb25zdCBoaWRpbmdDbGFzcyA9ICdzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlJztcblxuICBsZXQgaWR4ID0gLTE7XG5cbiAgY29uc3QgcmVtb3ZlQ2xhc3MgPSAoaXRlbSkgPT4ge1xuICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShoaWRpbmdDbGFzcyk7XG4gICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG4gICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gIH07XG5cbiAgY29uc3QgYWRkQ2xhc3MgPSAoaXRlbSkgPT4ge1xuICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChoaWRpbmdDbGFzcyk7XG4gICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGVkZGVuJywgJ3RydWUnKTtcbiAgICBpdGVtLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgfTtcblxuICBjb25zdCBpc01vYmlsZSA9ICgpID0+IHtcbiAgICByZXR1cm4gIHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA0NzlweCknKS5tYXRjaGVzO1xuICB9O1xuXG4gIGxldCBpc091dE9mTW9iaWxlID0gIWlzTW9iaWxlO1xuXG4gIGNvbnN0IG9uUmVzaXplID0gKCkgPT4ge1xuICAgIGlmIChpc01vYmlsZSgpICYmIGlzT3V0T2ZNb2JpbGUpIHtcbiAgICAgIGlzT3V0T2ZNb2JpbGUgPSBmYWxzZTtcblxuICAgICAgcmVtb3ZlQ2xhc3MoYnJhbmRTZWxlY3QpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICByZW1vdmVDbGFzcyhzZXJpZXNTZWxlY3RzW2lkeF0pO1xuICAgICAgfVxuXG4gICAgICBhZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGlmICghaXNNb2JpbGUoKSAmJiAhaXNPdXRPZk1vYmlsZSkge1xuICAgICAgaXNPdXRPZk1vYmlsZSA9IHRydWU7XG5cbiAgICAgIGFkZENsYXNzKGJyYW5kU2VsZWN0KTtcblxuICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgYWRkQ2xhc3Moc2VyaWVzU2VsZWN0c1tpZHhdKTtcbiAgICAgIH1cblxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBhZGRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBicmFuZFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkJyYW5kQ2hhbmdlKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBicmFuZFNlbGVjdC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkJyYW5kQ2hhbmdlKTtcbiAgfTtcblxuICBjb25zdCBvbkJyYW5kQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICBhZGRDbGFzcyhzZXJpZXNTZWxlY3RzW2lkeF0pO1xuICAgIH1cblxuICAgIGlkeCA9IGV2dC50YXJnZXQuc2VsZWN0ZWRJbmRleDtcblxuICAgIHJlbW92ZUNsYXNzKHNlcmllc1NlbGVjdHNbaWR4XSk7XG4gIH07XG5cbiAgXG5cbiAgd2luZG93LlJlc2l6ZSA9IHtcbiAgICBhZGRMaXN0ZW5lcjogKCkgPT4ge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbiAgICB9LFxuXG4gICAgaW5pdDogKCkgPT4ge1xuICAgICAgaWYgKGlzTW9iaWxlKCkpIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3MoYnJhbmRTZWxlY3QpO1xuICAgICAgICBhZGRFdmVudExpc3RlbmVycygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKGJhY2tlbmQpIHtcbiAgLy8gY29uc3Qgc3BsaXRzID0gW1xuICAvLyAgIHtcbiAgLy8gICAgIFwiaWRcIjo3LFxuICAvLyAgICAgXCJ0aXRsZVwiOlwiQXhpb21hXCIsXG4gIC8vICAgICBcInNlcmllc1wiOltcbiAgLy8gICAgICAge1xuICAvLyAgICAgICAgIFwiaWRcIjo2MyxcbiAgLy8gICAgICAgICBcInRpdGxlXCI6XCJBU1hfQVwiXG4gIC8vICAgICAgIH0sXG4gIC8vICAgICAgIHtcbiAgLy8gICAgICAgICBcImlkXCI6NjIsXG4gIC8vICAgICAgICAgXCJ0aXRsZVwiOlwiQVNYX0FaXCJcbiAgLy8gICAgICAgfVxuICAvLyAgICAgXVxuICAvLyAgIH0sXG4gIC8vICAge1wiaWRcIjo2LFwidGl0bGVcIjpcIkRhaWNoaVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NDUsXCJ0aXRsZVwiOlwiQ2FyYm9uIERBX0RWUVwifSx7XCJpZFwiOjQ2LFwidGl0bGVcIjpcIkV2ZXJlc3QgREFfRVZRXCJ9LHtcImlkXCI6NDMsXCJ0aXRsZVwiOlwiUGVhayBEQV9BVlFTXCJ9LHtcImlkXCI6NDIsXCJ0aXRsZVwiOlwiWC10cmVtZSBQZWFrIERBX0FWUVNcIn1dfSxcbiAgLy8gICB7XCJpZFwiOjEsXCJ0aXRsZVwiOlwiRGFpa2luXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjoxMSxcInRpdGxlXCI6XCJDb21mb3JhIEZUWC1KXFwvR1ZcIn0se1wiaWRcIjoyNixcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtSzNcIn0se1wiaWRcIjoyNyxcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtTFwifSx7XCJpZFwiOjI4LFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYUC1NXCJ9LHtcImlkXCI6MjMsXCJ0aXRsZVwiOlwiRW11cmEgRlRYRy1MXCJ9LHtcImlkXCI6MTgsXCJ0aXRsZVwiOlwiRW11cmEgRlRYSi1NXCJ9LHtcImlkXCI6MjAsXCJ0aXRsZVwiOlwiRkxYUy1CXCJ9LHtcImlkXCI6MTYsXCJ0aXRsZVwiOlwiRlRYQi1CXCJ9LHtcImlkXCI6NjUsXCJ0aXRsZVwiOlwiRlRYUy1FXCJ9LHtcImlkXCI6NjQsXCJ0aXRsZVwiOlwiRlRYUy1KXFwvR1wifSx7XCJpZFwiOjIxLFwidGl0bGVcIjpcIkZWWE0tRlwifSx7XCJpZFwiOjIyLFwidGl0bGVcIjpcIkZWWFMtRlwifSx7XCJpZFwiOjE5LFwidGl0bGVcIjpcIk5leHVyYSBGVlhHLUtcIn0se1wiaWRcIjoyNCxcInRpdGxlXCI6XCJQZXJmZXJhIEZUWE0tTlwifSx7XCJpZFwiOjI1LFwidGl0bGVcIjpcIlBlcmZlcmEgRlRYUy1LXCJ9LHtcImlkXCI6MSxcInRpdGxlXCI6XCJTZW5zaXJhIEZUWEItQ1wifV19LFxuICAvLyAgIHtcImlkXCI6MixcInRpdGxlXCI6XCJLZW50YXRzdVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NDksXCJ0aXRsZVwiOlwiQnJhdm8gIEtTR0JfSEZBTlwifSx7XCJpZFwiOjUwLFwidGl0bGVcIjpcIkJyYXZvICBLU0dCQV9IWkFOXCJ9LHtcImlkXCI6NTYsXCJ0aXRsZVwiOlwiS01HQkFfSFpBTlwifSx7XCJpZFwiOjU3LFwidGl0bGVcIjpcIktNR0JCX0haQU5cIn0se1wiaWRcIjo1MixcInRpdGxlXCI6XCJUZWFtICBLU0dUX0haQU5cIn0se1wiaWRcIjo0NyxcInRpdGxlXCI6XCJUaXRhbiBHZW5lc2lzIEtTR1hcIn0se1wiaWRcIjo1MSxcInRpdGxlXCI6XCJUdXJpbiBLU0dVX0haQU5cIn1dfSxcbiAgLy8gICB7XCJpZFwiOjgsXCJ0aXRsZVwiOlwiTWlkZWFcIixcInNlcmllc1wiOlt7XCJpZFwiOjYxLFwidGl0bGVcIjpcIkJsYW5jIE1TTUFcIn0se1wiaWRcIjo2MCxcInRpdGxlXCI6XCJCbGFuYyBNU01BIEVSUCAoTUEpXCJ9LHtcImlkXCI6NTksXCJ0aXRsZVwiOlwiTWlzc2lvbiBNU01CIChNQilcIn0se1wiaWRcIjo1OCxcInRpdGxlXCI6XCJVbHRpbWF0ZSBDb21mb3J0IE1TTVQgKE1UKVwifV19XTtcblxuICBsZXQgbGlua0hyZWYgPSAnIyc7XG5cbiAgY29uc3QgYnJhbmRDbGFzcyA9ICcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnO1xuICBjb25zdCBzZXJpZXNDbGFzcyA9ICcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0JztcblxuICBjb25zdCBicmFuZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1saXN0Jyk7XG4gIGNvbnN0IGJyYW5kQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtY2hvaWNlJyk7XG4gIGNvbnN0IHNlcmllc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtbGlzdCcpO1xuICBjb25zdCBzZXJpZXNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtY2hvaWNlJyk7XG4gIGNvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VsZWN0LWJyYW5kJyk7XG4gIGNvbnN0IHNlcmllc1NlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3NlbGVjdC1zZXJpZXMnKTtcblxuICBsZXQgY3VycmVudEJyYW5kSWR4ID0gLTE7XG4gIGxldCBjdXJyZW50T3B0aW9uSWR4ID0gLTE7XG5cbiAgLy9jb25zdCBicmFuZFNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCcpO1xuICBjb25zdCBzZXJpZXNXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VyaWVzLXdyYXBwZXInKTtcbiAgY29uc3Qgc2VyaWVzVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VyaWVzJykuY29udGVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG5cbiAgY29uc3QgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX2xpbmsnKTtcblxuICBjb25zdCBvbkJyYW5kQ2xpY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFicmFuZExpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdvcGVuZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYnJhbmRMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuICAgIC8vIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtbGlzdCcpLm1DdXN0b21TY3JvbGxiYXIoe1xuICAgIC8vICAgc2V0SGVpZ2h0OiAxODksXG4gICAgLy8gICBhdXRvSGlkZVNjcm9sbGJhcjogZmFsc2UsXG4gICAgLy8gICB0aGVtZTogJ2RhcmsnLFxuICAgIC8vICAgbW91c2VXaGVlbFBpeGVsczogMjAwLFxuICAgIC8vICAgY29udGVudFRvdWNoU2Nyb2xsOiB0cnVlXG4gICAgLy8gfSk7XG4gIH07XG5cbiAgY29uc3Qgb25TZXJpZXNDbGljayA9ICgpID0+IHtcbiAgICBpZiAoIXNlcmllc0xpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuICAgICAgLy8gY29uc29sZS5sb2coc2VyaWVzTGlzdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzZXJpZXNMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBzZXJpZXNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgb25PdXRzaWRlQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAoXG4gICAgICAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1jaG9pY2UnKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpXG4gICAgICAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1saXN0JylcbiAgICAgICYmIGJyYW5kTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKVxuICAgICkge1xuICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1jaG9pY2UnKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWl0ZW0nKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWxpc3QnKVxuICAgICAgJiYgc2VyaWVzTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKVxuICAgICkge1xuICAgICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG1ha2VPcHRpb25Ob2RlID0gKGFycikgPT4ge1xuICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgbm9kZS50ZXh0Q29udGVudCA9IGl0ZW1bJ3RpdGxlJ107XG4gICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpKTtcbiAgICAgIGkrKztcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gICAgICAvLyBsZXQgc2VyaWVzU2VsZWN0ID0gc2VyaWVzVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgLy8gc2VyaWVzU2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgLy8gc2VyaWVzU2VsZWN0LnNldEF0dHJpYnV0ZSgnbmFtZScsIGl0ZW1bJ3RpdGxlJ10pO1xuXG4gICAgICAvLyBpdGVtLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgICAgLy8gICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgLy8gICBub2RlLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBzZXJpZVsndGl0bGUnXSk7XG4gICAgICAvLyAgIG5vZGUudGV4dENvbnRlbnQgPSBzZXJpZVsndGl0bGUnXTtcbiAgICAgIC8vICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgLy8gfSk7XG5cbiAgICAgIC8vIHNlcmllc1dyYXBwZXIuYXBwZW5kQ2hpbGQoc2VyaWVzU2VsZWN0KTtcbiAgICB9KTtcblxuICAgIGJyYW5kTGlzdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cblxuICAgIGxldCBmcmFnbWVudDEgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgbGV0IGogPSAwO1xuXG4gICAgYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGxldCBub2RlMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgbm9kZTEudGV4dENvbnRlbnQgPSBpdGVtWyd0aXRsZSddO1xuICAgICAgbm9kZTEuY2xhc3NMaXN0LmFkZCgnbW9kZWwtY2hvaWNlX19icmFuZC1vcHRpb24nKTtcbiAgICAgIG5vZGUxLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGkpO1xuICAgICAgaisrO1xuICAgICAgZnJhZ21lbnQxLmFwcGVuZENoaWxkKG5vZGUxKTtcblxuICAgICAgLy8gbGV0IHNlcmllc1NlbGVjdCA9IHNlcmllc1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBpdGVtWyd0aXRsZSddKTtcblxuICAgICAgLy8gaXRlbS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAgIC8vICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIC8vICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgc2VyaWVbJ3RpdGxlJ10pO1xuICAgICAgLy8gICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAvLyAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIC8vIH0pO1xuXG4gICAgICAvLyBzZXJpZXNXcmFwcGVyLmFwcGVuZENoaWxkKHNlcmllc1NlbGVjdCk7XG4gICAgfSk7XG5cbiAgICBicmFuZFNlbGVjdC5hcHBlbmRDaGlsZChmcmFnbWVudDEpO1xuXG5cblxuICAgIGNvbnN0IG9uQnJhbmRJdGVtQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgICBsZXQgdGFyZ2V0ID0gZXZ0LnRhcmdldDtcbiAgICAgIGxldCBpZHggPSArdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuXG4gICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1pdGVtJykpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRCcmFuZElkeCA9PT0gaWR4KSB7XG4gICAgICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXJyZW50QnJhbmRJZHggIT09IGlkeCkge1xuICAgICAgICAgIHNlcmllc0xpc3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICBzZXJpZXNCdXR0b24udGV4dENvbnRlbnQgPSAn0JLRi9Cx0YDQsNGC0Ywg0LjQtyDRgdC/0LjRgdC60LAnO1xuICAgICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgIGxldCBpZHggPSArdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuXG4gICAgICAgICAgYXJyW2lkeF0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAgICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWl0ZW0nKTtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2VyaWVzTGlzdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgICAgY3VycmVudEJyYW5kSWR4ID0gaWR4O1xuXG4gICAgICAgICAgYnJhbmRCdXR0b24udGV4dENvbnRlbnQgPSB0YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgaWYgKCFicmFuZEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlcmllc0J1dHRvbi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgIHNlcmllc0J1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcblxuICAgICAgICAgIGxpbmsuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcbiAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb25CcmFuZENoYW5nZSA9IChldnQpID0+IHtcbiAgICAgIGN1cnJlbnRPcHRpb25JZHggPSBldnQudGFyZ2V0LnNlbGVjdGVkSW5kZXggLSAxO1xuICAgICAgc2VyaWVzU2VsZWN0LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICBzZXJpZXNCdXR0b24udGV4dENvbnRlbnQgPSAn0JLRi9Cx0YDQsNGC0Ywg0LjQtyDRgdC/0LjRgdC60LAnO1xuICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG5cbiAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBub2RlLnRleHRDb250ZW50ID0gXCLQktGL0LHRgNCw0YLRjCDQuNC3INGB0L/QuNGB0LrQsFwiO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgaWYgKHNlcmllc1NlbGVjdC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgc2VyaWVzU2VsZWN0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgIH1cblxuXG4gICAgICBhcnJbY3VycmVudE9wdGlvbklkeF0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBzZXJpZVsndGl0bGUnXTtcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1vcHRpb24nKTtcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICB9KTtcblxuICAgICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgYnJhbmRCdXR0b24udGV4dENvbnRlbnQgPSBldnQudGFyZ2V0LnZhbHVlO1xuICAgICAgaWYgKCFicmFuZEJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgIH1cblxuICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgbGluay5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICB9XG5cbiAgICBjb25zdCBvblNlcmllc0l0ZW1DbGljayA9IChldnQpID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuXG4gICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19zZXJpZXMtaXRlbScpKSB7XG4gICAgICAgIHNlcmllc0J1dHRvbi50ZXh0Q29udGVudCA9IHRhcmdldC50ZXh0Q29udGVudDtcbiAgICAgICAgaWYgKCFzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXJpZXNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuXG4gICAgICAgIGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgbGlua0hyZWYgPSB0YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgbGlua0hyZWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG9uU2VyaWVzQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAgIGlmICghc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgIH1cblxuICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgbGlua0hyZWYgPSBldnQudGFyZ2V0LnZhbHVlO1xuICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBsaW5rSHJlZik7XG4gICAgfVxuXG4gICAgLy9sZXQgc3BsaXRzRGF0YSA9IGJhY2tlbmQubG9hZChnZXREYXRhKTtcblxuICAgIC8vYnJhbmRTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZU9wdGlvbk5vZGUoc3BsaXRzKSk7XG4gICAgLy9tYWtlT3B0aW9uTm9kZShzcGxpdHMpO1xuICAgIC8vYmFja2VuZC5sb2FkKG1ha2VPcHRpb25Ob2RlKTtcblxuXG4gICAgLy8gbWFrZVNlbGVjdChicmFuZENsYXNzKTtcbiAgICAvLyBtYWtlU2VsZWN0KHNlcmllc0NsYXNzKTtcblxuICAgIC8vIGpRdWVyeShicmFuZENsYXNzKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgLy8galF1ZXJ5KGJyYW5kQ2xhc3MpLnNlbGVjdDIoJ2Nsb3NlJyk7XG5cblxuICAgIC8vIGNvbnN0IHNlcmllc1NlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG5cblxuICAgIC8vIGNvbnN0IGhpZGVTZXJpZXMgPSAoKSA9PiB7XG4gICAgLy8gICBzZXJpZXNTZWxlY3RzLmZvckVhY2goKHNlbGVjdCkgPT4ge1xuICAgIC8vICAgICBpZiAoIXNlbGVjdC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgLy8gICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIC8vICAgICAgIHNlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH0pXG4gICAgLy8gfTtcblxuICAgIC8vIGNvbnN0IHNob3dTZXJpZXMgPSAoaWR4KSA9PiB7XG4gICAgLy8gICBzZXJpZXNTZWxlY3RzW2lkeF0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgLy8gICBzZXJpZXNTZWxlY3RzW2lkeF0uc2V0QXR0cmlidXRlKCdpZCcsICdzZXJpZXMtc2VsZWN0Jyk7XG4gICAgLy8gfTtcblxuICAgIC8vIGpRdWVyeShicmFuZENsYXNzKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIC8vICAgbGV0IGlkeCA9ICtqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS5hdHRyKCdkYXRhLWlkJyk7XG5cbiAgICAvLyAgIGhpZGVTZXJpZXMoKTtcbiAgICAvLyAgIHNob3dTZXJpZXMoaWR4ICsgMSk7XG5cbiAgICAvLyAgIGpRdWVyeSgnI3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgLy8gICBqUXVlcnkoJyNzZXJpZXMtc2VsZWN0Jykuc2VsZWN0MignY2xvc2UnKTtcblxuICAgIC8vICAgalF1ZXJ5KCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgIC8vIH0pO1xuXG4gICAgLy8galF1ZXJ5KHNlcmllc0NsYXNzKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIC8vICAgaWYgKGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7XG4gICAgLy8gICAgIGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAvLyAgIH1cblxuICAgIC8vICAgbGV0IHZhbHVlID0galF1ZXJ5KGV2dC50YXJnZXQpLmNoaWxkcmVuKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgLy8gICBsaW5rSHJlZiA9IHZhbHVlO1xuXG5cbiAgICAvLyAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgbGlua0hyZWYpO1xuXG4gICAgLy8gICBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAvLyB9KTtcblxuICAgIC8vUmVzaXplLmluaXQoKTtcbiAgICAvL1Jlc2l6ZS5hZGRMaXN0ZW5lcigpO1xuXG4gICAgYnJhbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJyYW5kQ2xpY2spO1xuICAgIHNlcmllc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU2VyaWVzQ2xpY2spO1xuICAgIGJyYW5kTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQnJhbmRJdGVtQ2xpY2spO1xuICAgIHNlcmllc0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblNlcmllc0l0ZW1DbGljayk7XG4gICAgYnJhbmRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25CcmFuZENoYW5nZSk7XG4gICAgc2VyaWVzU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uU2VyaWVzQ2hhbmdlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk91dHNpZGVDbGljayk7XG4gIH07XG5cbiAgYmFja2VuZC5sb2FkKG1ha2VPcHRpb25Ob2RlKTtcblxufSkod2luZG93LmJhY2tlbmQpO1xuIl19
