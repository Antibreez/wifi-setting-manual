lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",i=200,s=300,l=function(e,t){var l=new XMLHttpRequest;return l.timeout=1e4,l.responseType="json",l.addEventListener("load",(function(){!function(e){return e.status<i||e.status>s}(l)?e(l.response):t("Данные не загрузились. Причина: "+l.status+" "+l.statusText)})),l.addEventListener("error",(function(){t("Произошла ошибка соединения")})),l.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+l.timeout+"мс")})),l},d=function(e){e.remove()},n=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(d,2e3,t)};window.backend={load:function(i,s){var d=l(i,s||n);d.open(t,e),d.send()}}}(),function(e){window.makeSelect=function(t){e(t).select2({minimumResultsForSearch:-1})}}(jQuery),function(e){let t="#";const i=".model-choice__brand-select",s=document.querySelector(".model-choice__brand-select"),l=document.querySelector(".model-choice__series-wrapper"),d=document.querySelector("#series").content.querySelector(".model-choice__series-select"),n=document.querySelector(".model-choice__link");(e=>{let t=document.createDocumentFragment(),i=0;e.forEach(e=>{let s=document.createElement("option");s.setAttribute("value",e.title),s.textContent=e.title,s.setAttribute("data-id",i),i++,t.appendChild(s);let n=d.cloneNode(!0);n.classList.add("hidden"),n.setAttribute("name",e.title),e.series.forEach(e=>{let t=document.createElement("option");t.setAttribute("value",e.title),t.textContent=e.title,n.appendChild(t)}),l.appendChild(n)}),s.appendChild(t)})([{id:7,title:"Axioma",series:[{id:63,title:"ASX_A"},{id:62,title:"ASX_AZ"}]},{id:6,title:"Daichi",series:[{id:45,title:"Carbon DA_DVQ"},{id:46,title:"Everest DA_EVQ"},{id:43,title:"Peak DA_AVQS"},{id:42,title:"X-treme Peak DA_AVQS"}]},{id:1,title:"Daikin",series:[{id:11,title:"Comfora FTX-J/GV"},{id:26,title:"Comfora FTXP-K3"},{id:27,title:"Comfora FTXP-L"},{id:28,title:"Comfora FTXP-M"},{id:23,title:"Emura FTXG-L"},{id:18,title:"Emura FTXJ-M"},{id:20,title:"FLXS-B"},{id:16,title:"FTXB-B"},{id:65,title:"FTXS-E"},{id:64,title:"FTXS-J/G"},{id:21,title:"FVXM-F"},{id:22,title:"FVXS-F"},{id:19,title:"Nexura FVXG-K"},{id:24,title:"Perfera FTXM-N"},{id:25,title:"Perfera FTXS-K"},{id:1,title:"Sensira FTXB-C"}]},{id:2,title:"Kentatsu",series:[{id:49,title:"Bravo  KSGB_HFAN"},{id:50,title:"Bravo  KSGBA_HZAN"},{id:56,title:"KMGBA_HZAN"},{id:57,title:"KMGBB_HZAN"},{id:52,title:"Team  KSGT_HZAN"},{id:47,title:"Titan Genesis KSGX"},{id:51,title:"Turin KSGU_HZAN"}]},{id:8,title:"Midea",series:[{id:61,title:"Blanc MSMA"},{id:60,title:"Blanc MSMA ERP (MA)"},{id:59,title:"Mission MSMB (MB)"},{id:58,title:"Ultimate Comfort MSMT (MT)"}]}]),e(i),e(".model-choice__series-select"),jQuery(i).select2("open"),jQuery(i).select2("close");const o=document.querySelectorAll(".model-choice__series-select");jQuery(i).on("change",(function(e){let t=+jQuery(".model-choice__brand-select option:selected").attr("data-id");o.forEach(e=>{e.classList.contains("hidden")||(e.classList.add("hidden"),e.removeAttribute("id"))}),(e=>{o[e].classList.remove("hidden"),o[e].setAttribute("id","series-select")})(t+1),jQuery("#series-select").select2("open"),jQuery("#series-select").select2("close"),jQuery(".model-choice__brand-select").addClass("selected"),jQuery(".model-choice__series-select").removeClass("selected")})),jQuery(".model-choice__series-select").on("change",(function(e){n.classList.contains("disabled")&&n.classList.remove("disabled");let i=jQuery(e.target).children("option:selected").text();t=i,n.setAttribute("href",t),jQuery(".model-choice__series-select").addClass("selected")}))}(window.makeSelect),function(){const e=document.querySelector(".model-choice__brand-select"),t=document.querySelectorAll(".model-choice__series-select");let i=-1;const s=e=>{e.classList.remove("select2-hidden-accessible"),e.removeAttribute("aria-hidden"),e.removeAttribute("tabindex")},l=e=>{e.classList.add("select2-hidden-accessible"),e.setAttribute("aria-hedden","true"),e.setAttribute("tabindex","-1")},d=()=>window.matchMedia("(max-width: 479px)").matches;let n=!d;const o=()=>{e.addEventListener("change",r)},c=()=>{e.removeEventListener("change",r)},r=e=>{-1!==i&&l(t[i]),i=e.target.selectedIndex,s(t[i])};d()&&(s(e),o()),window.addEventListener("resize",()=>{d()&&n&&(n=!1,s(e),-1!==i&&s(t[i]),o()),d()||n||(n=!0,l(e),-1!==i&&l(t[i]),c())})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImJhY2tlbmQuanMiLCJzZWxlY3QuanMiLCJjaG9pY2UuanMiLCJyZXNpemUuanMiXSwibmFtZXMiOlsibG90dGllIiwibG9hZEFuaW1hdGlvbiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW5kZXJlciIsImxvb3AiLCJhdXRvcGxheSIsInBhdGgiLCJSZXFVcmwiLCJSZXFNZXRob2QiLCJSZXFTdGF0dXMiLCJjcmVhdGVSZXF1ZXN0Iiwib25Mb2FkIiwib25FcnJvciIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0dXMiLCJpc0Vycm9yU3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0IiwicmVtb3ZlRWxlbWVudCIsImVsZW1lbnQiLCJyZW1vdmUiLCJvbkFueUVycm9yIiwibWVzc2FnZSIsIm5vZGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImZvbnRTaXplIiwidGV4dENvbnRlbnQiLCJib2R5IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50Iiwid2luZG93Iiwic2V0VGltZW91dCIsImJhY2tlbmQiLCJsb2FkIiwicmVxIiwib3BlbiIsInNlbmQiLCIkIiwibWFrZVNlbGVjdCIsImVsZW1lbnRDbGFzcyIsInNlbGVjdDIiLCJtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCIsImpRdWVyeSIsImxpbmtIcmVmIiwiYnJhbmRDbGFzcyIsImJyYW5kU2VsZWN0IiwicXVlcnlTZWxlY3RvciIsInNlcmllc1dyYXBwZXIiLCJzZXJpZXNUZW1wbGF0ZSIsImNvbnRlbnQiLCJsaW5rIiwiYXJyIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaSIsImZvckVhY2giLCJpdGVtIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJzZXJpZXNTZWxlY3QiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXJpZXMiLCJzZXJpZSIsIm1ha2VPcHRpb25Ob2RlIiwiaWQiLCJ0aXRsZSIsInNlcmllc1NlbGVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwib24iLCJldnQiLCJpZHgiLCJhdHRyIiwic2VsZWN0IiwiY29udGFpbnMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzaG93U2VyaWVzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInZhbHVlIiwidGFyZ2V0IiwiY2hpbGRyZW4iLCJ0ZXh0IiwiaXNNb2JpbGUiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImlzT3V0T2ZNb2JpbGUiLCJhZGRFdmVudExpc3RlbmVycyIsIm9uQnJhbmRDaGFuZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZWxlY3RlZEluZGV4Il0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBQUMsY0FBQSxDQUNBQyxVQUFBQyxTQUFBQyxlQUFBLGFBQ0FDLFNBQUEsTUFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLEtBQUEsY0NKQSxXQUNBLElBQUFDLEVBQ0EsMENBSUFDLEVBQ0EsTUFJQUMsRUFDQSxJQURBQSxFQUVBLElBVUFDLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLElBQUFDLGVBc0JBLE9BcEJBRCxFQUFBRSxRQVZBLElBV0FGLEVBQUFHLGFBQUEsT0FFQUgsRUFBQUksaUJBQUEsUUFBQSxZQVhBLFNBQUFKLEdBQ0EsT0FBQUEsRUFBQUssT0FBQVQsR0FDQUksRUFBQUssT0FBQVQsRUFVQVUsQ0FBQU4sR0FLQUYsRUFBQUUsRUFBQU8sVUFKQVIsRUFBQSxtQ0FBQUMsRUFBQUssT0FBQSxJQUFBTCxFQUFBUSxlQU9BUixFQUFBSSxpQkFBQSxTQUFBLFdBQ0FMLEVBQUEsa0NBR0FDLEVBQUFJLGlCQUFBLFdBQUEsV0FDQUwsRUFBQSxrQ0FBQUMsRUFBQUUsUUFBQSxTQUdBRixHQUdBUyxFQUFBLFNBQUFDLEdBQ0FBLEVBQUFD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T0FBQSxZQUdBLElBQUErRCxFQUFBdEMsT0FBQTZCLEVBQUFVLFFBQUFDLFNBQUEsbUJBQUFDLE9BQ0F4QyxFQUFBcUMsRUFHQTlCLEVBQUFPLGFBQUEsT0FBQWQsR0FFQUQsT0FBQSxnQ0FBQW9DLFNBQUEsZUFoSEEsQ0FtSEFoRCxPQUFBUSxZQ25IQSxXQUNBLE1BQUFPLEVBQUFuRCxTQUFBb0QsY0FBQSwrQkFDQXNCLEVBQUExRSxTQUFBMkUsaUJBQUEsZ0NBR0EsSUFBQUcsR0FBQSxFQUVBLE1BQUFPLEVBQUF2QixJQUNBQSxFQUFBSyxVQUFBNUMsT0FMQSw2QkFNQXVDLEVBQUFvQixnQkFBQSxlQUNBcEIsRUFBQW9CLGdCQUFBLGFBR0FFLEVBQUF0QixJQUNBQSxFQUFBSyxVQUFBQyxJQVhBLDZCQVlBTixFQUFBQyxhQUFBLGNBQUEsUUFDQUQsRUFBQUMsYUFBQSxXQUFBLE9BR0EyQixFQUFBLElBQ0F0RCxPQUFBdUQsV0FBQSxzQkFBQUMsUUFHQSxJQUFBQyxHQUFBSCxFQUVBLE1BMEJBSSxFQUFBLEtBQ0EzQyxFQUFBbkMsaUJBQUEsU0FBQStFLElBR0FDLEVBQUEsS0FDQTdDLEVBQUE4QyxvQkFBQSxTQUFBRixJQUdBQSxFQUFBbEIsS0FDQSxJQUFBQyxHQUNBTSxFQUFBVixFQUFBSSxJQUdBQSxFQUFBRCxFQUFBVSxPQUFBVyxjQUVBYixFQUFBWCxFQUFBSSxLQUdBWSxNQUNBTCxFQUFBbEMsR0FDQTJDLEtBR0ExRCxPQUFBcEIsaUJBQUEsU0FqREEsS0FDQTBFLEtBQUFHLElBQ0FBLEdBQUEsRUFFQVIsRUFBQWxDLElBRUEsSUFBQTJCLEdBQ0FPLEVBQUFYLEVBQUFJLElBR0FnQixLQUdBSixLQUFBRyxJQUNBQSxHQUFBLEVBRUFULEVBQUFqQyxJQUVBLElBQUEyQixHQUNBTSxFQUFBVixFQUFBSSxJQUdBa0IsT0EvQ0EiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gIGxvdHRpZS5sb2FkQW5pbWF0aW9uKHtcbiAgICBjb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmltYXRpb24nKSwgLy8gdGhlIGRvbSBlbGVtZW50IHRoYXQgd2lsbCBjb250YWluIHRoZSBhbmltYXRpb25cbiAgICByZW5kZXJlcjogJ3N2ZycsXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICBwYXRoOiAnZGF0YS5qc29uJyAvLyB0aGUgcGF0aCB0byB0aGUgYW5pbWF0aW9uIGpzb25cbiAgfSk7XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgUmVxVXJsID0ge1xuICAgIEdFVDogJ2h0dHBzOi8vc3BsaXQuZGFpY2hpY2xvdWQucnUvYnJhbmRzL2FsbCcsXG4gICAgLy9QT1NUOiAnaHR0cHM6Ly9qcy5kdW1wLmFjYWRlbXkva2Vrc3RhZ3JhbSdcbiAgfTtcblxuICB2YXIgUmVxTWV0aG9kID0ge1xuICAgIEdFVDogJ0dFVCcsXG4gICAgUE9TVDogJ1BPU1QnXG4gIH07XG5cbiAgdmFyIFJlcVN0YXR1cyA9IHtcbiAgICBPSzogMjAwLFxuICAgIE1VTFRJUExFX0NIT0lDRVM6IDMwMCxcbiAgfTtcblxuICB2YXIgVElNRU9VVCA9IDEwMDAwO1xuXG4gIHZhciBpc0Vycm9yU3RhdHVzID0gZnVuY3Rpb24gKHhocikge1xuICAgIHJldHVybiB4aHIuc3RhdHVzIDwgUmVxU3RhdHVzLk9LXG4gICAgICB8fCB4aHIuc3RhdHVzID4gUmVxU3RhdHVzLk1VTFRJUExFX0NIT0lDRVM7XG4gIH07XG5cbiAgdmFyIGNyZWF0ZVJlcXVlc3QgPSBmdW5jdGlvbiAob25Mb2FkLCBvbkVycm9yKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgeGhyLnRpbWVvdXQgPSBUSU1FT1VUO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpc0Vycm9yU3RhdHVzKHhocikpIHtcbiAgICAgICAgb25FcnJvcign0JTQsNC90L3Ri9C1INC90LUg0LfQsNCz0YDRg9C30LjQu9C40YHRjC4g0J/RgNC40YfQuNC90LA6ICcgKyB4aHIuc3RhdHVzICsgJyAnICsgeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG9uTG9hZCh4aHIucmVzcG9uc2UpO1xuICAgIH0pO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgb25FcnJvcign0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCDRgdC+0LXQtNC40L3QtdC90LjRjycpO1xuICAgIH0pO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWVvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBvbkVycm9yKCfQl9Cw0L/RgNC+0YEg0L3QtSDRg9GB0L/QtdC7INCy0YvQv9C+0LvQvdC40YLRjNGB0Y8g0LfQsCAnICsgeGhyLnRpbWVvdXQgKyAn0LzRgScpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHhocjtcbiAgfTtcblxuICB2YXIgcmVtb3ZlRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgfTtcblxuICB2YXIgb25BbnlFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBub2RlLnN0eWxlID0gJ3otaW5kZXg6IDEwMDsgbWFyZ2luOiAwIGF1dG87IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZC1jb2xvcjogcmVkOyc7XG4gICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgbm9kZS5zdHlsZS5sZWZ0ID0gMDtcbiAgICBub2RlLnN0eWxlLnJpZ2h0ID0gMDtcbiAgICBub2RlLnN0eWxlLmZvbnRTaXplID0gJzMwcHgnO1xuXG4gICAgbm9kZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBub2RlKTtcbiAgICB3aW5kb3cuc2V0VGltZW91dChyZW1vdmVFbGVtZW50LCAyMDAwLCBub2RlKTtcbiAgfTtcblxuICB3aW5kb3cuYmFja2VuZCA9IHtcbiAgICBsb2FkOiBmdW5jdGlvbiAob25Mb2FkLCBvbkVycm9yKSB7XG4gICAgICB2YXIgcmVxID0gY3JlYXRlUmVxdWVzdChvbkxvYWQsIG9uRXJyb3IgfHwgb25BbnlFcnJvcik7XG4gICAgICByZXEub3BlbihSZXFNZXRob2QuR0VULCBSZXFVcmwuR0VUKTtcbiAgICAgIHJlcS5zZW5kKCk7XG4gICAgfSxcblxuICAgIC8vIHNhdmU6IGZ1bmN0aW9uIChkYXRhLCBvbkxvYWQsIG9uRXJyb3IpIHtcbiAgICAvLyAgIHZhciByZXEgPSBjcmVhdGVSZXF1ZXN0KG9uTG9hZCwgb25FcnJvcik7XG4gICAgLy8gICByZXEub3BlbihSZXFNZXRob2QuUE9TVCwgUmVxVXJsLlBPU1QpO1xuICAgIC8vICAgcmVxLnNlbmQoZGF0YSk7XG4gICAgLy8gfVxuICB9O1xufSkoKTtcblxuXG5cblxuIiwiLy8gJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4vLyAgIC8vICQoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCcpLnNlbGVjdDIoe1xuLy8gICAvLyAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiAtMSxcbi8vICAgLy8gfSk7XG5cbi8vICAgLy8gJCgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLnNlbGVjdDIoe1xuLy8gICAvLyAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiAtMSxcbi8vICAgLy8gfSk7XG5cbi8vICAgZnVuY3Rpb24gbWFrZVNlbGVjdChlbGVtZW50KSB7XG4vLyAgICAgJChlbGVtZW50KS5zZWxlY3QyKHtcbi8vICAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiAtMSxcbi8vICAgICB9KTtcbi8vICAgfTtcblxuXG5cblxuLy8gICB3aW5kb3cubWFrZVNlbGVjdCA9IG1ha2VTZWxlY3Q7XG5cbi8vICAgY29uc29sZS5sb2cod2luZG93Lm1ha2VTZWxlY3QpO1xuXG4vLyB9KTtcblxuXG4oZnVuY3Rpb24oJCkge1xuICBmdW5jdGlvbiBtYWtlU2VsZWN0KGVsZW1lbnRDbGFzcykge1xuICAgICQoZWxlbWVudENsYXNzKS5zZWxlY3QyKHtcbiAgICAgIG1pbmltdW1SZXN1bHRzRm9yU2VhcmNoOiAtMSxcbiAgICB9KTtcbiAgfTtcblxuICB3aW5kb3cubWFrZVNlbGVjdCA9IG1ha2VTZWxlY3Q7XG59KShqUXVlcnkpO1xuIiwiKGZ1bmN0aW9uIChtYWtlU2VsZWN0KSB7XG4gIGNvbnN0IHNwbGl0cyA9IFtcbiAgICB7XG4gICAgICBcImlkXCI6NyxcbiAgICAgIFwidGl0bGVcIjpcIkF4aW9tYVwiLFxuICAgICAgXCJzZXJpZXNcIjpbXG4gICAgICAgIHtcbiAgICAgICAgICBcImlkXCI6NjMsXG4gICAgICAgICAgXCJ0aXRsZVwiOlwiQVNYX0FcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgXCJpZFwiOjYyLFxuICAgICAgICAgIFwidGl0bGVcIjpcIkFTWF9BWlwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcImlkXCI6NixcInRpdGxlXCI6XCJEYWljaGlcIixcInNlcmllc1wiOlt7XCJpZFwiOjQ1LFwidGl0bGVcIjpcIkNhcmJvbiBEQV9EVlFcIn0se1wiaWRcIjo0NixcInRpdGxlXCI6XCJFdmVyZXN0IERBX0VWUVwifSx7XCJpZFwiOjQzLFwidGl0bGVcIjpcIlBlYWsgREFfQVZRU1wifSx7XCJpZFwiOjQyLFwidGl0bGVcIjpcIlgtdHJlbWUgUGVhayBEQV9BVlFTXCJ9XX0sXG4gICAge1wiaWRcIjoxLFwidGl0bGVcIjpcIkRhaWtpblwiLFwic2VyaWVzXCI6W3tcImlkXCI6MTEsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFgtSlxcL0dWXCJ9LHtcImlkXCI6MjYsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLUszXCJ9LHtcImlkXCI6MjcsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLUxcIn0se1wiaWRcIjoyOCxcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtTVwifSx7XCJpZFwiOjIzLFwidGl0bGVcIjpcIkVtdXJhIEZUWEctTFwifSx7XCJpZFwiOjE4LFwidGl0bGVcIjpcIkVtdXJhIEZUWEotTVwifSx7XCJpZFwiOjIwLFwidGl0bGVcIjpcIkZMWFMtQlwifSx7XCJpZFwiOjE2LFwidGl0bGVcIjpcIkZUWEItQlwifSx7XCJpZFwiOjY1LFwidGl0bGVcIjpcIkZUWFMtRVwifSx7XCJpZFwiOjY0LFwidGl0bGVcIjpcIkZUWFMtSlxcL0dcIn0se1wiaWRcIjoyMSxcInRpdGxlXCI6XCJGVlhNLUZcIn0se1wiaWRcIjoyMixcInRpdGxlXCI6XCJGVlhTLUZcIn0se1wiaWRcIjoxOSxcInRpdGxlXCI6XCJOZXh1cmEgRlZYRy1LXCJ9LHtcImlkXCI6MjQsXCJ0aXRsZVwiOlwiUGVyZmVyYSBGVFhNLU5cIn0se1wiaWRcIjoyNSxcInRpdGxlXCI6XCJQZXJmZXJhIEZUWFMtS1wifSx7XCJpZFwiOjEsXCJ0aXRsZVwiOlwiU2Vuc2lyYSBGVFhCLUNcIn1dfSxcbiAgICB7XCJpZFwiOjIsXCJ0aXRsZVwiOlwiS2VudGF0c3VcIixcInNlcmllc1wiOlt7XCJpZFwiOjQ5LFwidGl0bGVcIjpcIkJyYXZvICBLU0dCX0hGQU5cIn0se1wiaWRcIjo1MCxcInRpdGxlXCI6XCJCcmF2byAgS1NHQkFfSFpBTlwifSx7XCJpZFwiOjU2LFwidGl0bGVcIjpcIktNR0JBX0haQU5cIn0se1wiaWRcIjo1NyxcInRpdGxlXCI6XCJLTUdCQl9IWkFOXCJ9LHtcImlkXCI6NTIsXCJ0aXRsZVwiOlwiVGVhbSAgS1NHVF9IWkFOXCJ9LHtcImlkXCI6NDcsXCJ0aXRsZVwiOlwiVGl0YW4gR2VuZXNpcyBLU0dYXCJ9LHtcImlkXCI6NTEsXCJ0aXRsZVwiOlwiVHVyaW4gS1NHVV9IWkFOXCJ9XX0sXG4gICAge1wiaWRcIjo4LFwidGl0bGVcIjpcIk1pZGVhXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjo2MSxcInRpdGxlXCI6XCJCbGFuYyBNU01BXCJ9LHtcImlkXCI6NjAsXCJ0aXRsZVwiOlwiQmxhbmMgTVNNQSBFUlAgKE1BKVwifSx7XCJpZFwiOjU5LFwidGl0bGVcIjpcIk1pc3Npb24gTVNNQiAoTUIpXCJ9LHtcImlkXCI6NTgsXCJ0aXRsZVwiOlwiVWx0aW1hdGUgQ29tZm9ydCBNU01UIChNVClcIn1dfV07XG5cbiAgbGV0IGxpbmtIcmVmID0gJyMnO1xuXG4gIGNvbnN0IGJyYW5kQ2xhc3MgPSAnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0JztcbiAgY29uc3Qgc2VyaWVzQ2xhc3MgPSAnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCc7XG5cbiAgY29uc3QgYnJhbmRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKTtcbiAgY29uc3Qgc2VyaWVzV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy13cmFwcGVyJyk7XG4gIGNvbnN0IHNlcmllc1RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlcmllcycpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19saW5rJyk7XG5cbiAgY29uc3QgbWFrZU9wdGlvbk5vZGUgPSAoYXJyKSA9PiB7XG4gICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGxldCBpID0gMDtcblxuICAgIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgaXRlbVsndGl0bGUnXSk7XG4gICAgICBub2RlLnRleHRDb250ZW50ID0gaXRlbVsndGl0bGUnXTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaSk7XG4gICAgICBpKys7XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcblxuICAgICAgbGV0IHNlcmllc1NlbGVjdCA9IHNlcmllc1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIHNlcmllc1NlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIHNlcmllc1NlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBpdGVtWyd0aXRsZSddKTtcblxuICAgICAgaXRlbS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgc2VyaWVbJ3RpdGxlJ10pO1xuICAgICAgICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXJpZXNXcmFwcGVyLmFwcGVuZENoaWxkKHNlcmllc1NlbGVjdCk7XG4gICAgfSk7XG5cbiAgICBicmFuZFNlbGVjdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIH07XG5cbiAgLy9icmFuZFNlbGVjdC5hcHBlbmRDaGlsZChtYWtlT3B0aW9uTm9kZShzcGxpdHMpKTtcbiAgbWFrZU9wdGlvbk5vZGUoc3BsaXRzKTtcblxuICBtYWtlU2VsZWN0KGJyYW5kQ2xhc3MpO1xuICBtYWtlU2VsZWN0KHNlcmllc0NsYXNzKTtcblxuICBqUXVlcnkoYnJhbmRDbGFzcykuc2VsZWN0Mignb3BlbicpO1xuICBqUXVlcnkoYnJhbmRDbGFzcykuc2VsZWN0MignY2xvc2UnKTtcblxuXG4gIGNvbnN0IHNlcmllc1NlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG5cblxuICBjb25zdCBoaWRlU2VyaWVzID0gKCkgPT4ge1xuICAgIHNlcmllc1NlbGVjdHMuZm9yRWFjaCgoc2VsZWN0KSA9PiB7XG4gICAgICBpZiAoIXNlbGVjdC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgIHNlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgc2VsZWN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgIH1cbiAgICB9KVxuICB9O1xuXG4gIGNvbnN0IHNob3dTZXJpZXMgPSAoaWR4KSA9PiB7XG4gICAgc2VyaWVzU2VsZWN0c1tpZHhdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHNlcmllc1NlbGVjdHNbaWR4XS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Nlcmllcy1zZWxlY3QnKTtcbiAgfTtcblxuICBqUXVlcnkoYnJhbmRDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBsZXQgaWR4ID0gK2pRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0IG9wdGlvbjpzZWxlY3RlZCcpLmF0dHIoJ2RhdGEtaWQnKTtcblxuICAgIGhpZGVTZXJpZXMoKTtcbiAgICBzaG93U2VyaWVzKGlkeCArIDEpO1xuXG4gICAgalF1ZXJ5KCcjc2VyaWVzLXNlbGVjdCcpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICBqUXVlcnkoJyNzZXJpZXMtc2VsZWN0Jykuc2VsZWN0MignY2xvc2UnKTtcblxuICAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgalF1ZXJ5KCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gIH0pO1xuXG4gIGpRdWVyeShzZXJpZXNDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBpZiAobGluay5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHtcbiAgICAgIGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG5cbiAgICBsZXQgdmFsdWUgPSBqUXVlcnkoZXZ0LnRhcmdldCkuY2hpbGRyZW4oJ29wdGlvbjpzZWxlY3RlZCcpLnRleHQoKTtcbiAgICBsaW5rSHJlZiA9IHZhbHVlO1xuXG5cbiAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGxpbmtIcmVmKTtcblxuICAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICB9KTtcblxufSkod2luZG93Lm1ha2VTZWxlY3QpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgYnJhbmRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKTtcbiAgY29uc3Qgc2VyaWVzU2VsZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKTtcbiAgY29uc3QgaGlkaW5nQ2xhc3MgPSAnc2VsZWN0Mi1oaWRkZW4tYWNjZXNzaWJsZSc7XG5cbiAgbGV0IGlkeCA9IC0xO1xuXG4gIGNvbnN0IHJlbW92ZUNsYXNzID0gKGl0ZW0pID0+IHtcbiAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoaGlkaW5nQ2xhc3MpO1xuICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICB9O1xuXG4gIGNvbnN0IGFkZENsYXNzID0gKGl0ZW0pID0+IHtcbiAgICBpdGVtLmNsYXNzTGlzdC5hZGQoaGlkaW5nQ2xhc3MpO1xuICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdhcmlhLWhlZGRlbicsICd0cnVlJyk7XG4gICAgaXRlbS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG4gIH07XG5cbiAgY29uc3QgaXNNb2JpbGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuICB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNDc5cHgpJykubWF0Y2hlcztcbiAgfTtcblxuICBsZXQgaXNPdXRPZk1vYmlsZSA9ICFpc01vYmlsZTtcblxuICBjb25zdCBvblJlc2l6ZSA9ICgpID0+IHtcbiAgICBpZiAoaXNNb2JpbGUoKSAmJiBpc091dE9mTW9iaWxlKSB7XG4gICAgICBpc091dE9mTW9iaWxlID0gZmFsc2U7XG5cbiAgICAgIHJlbW92ZUNsYXNzKGJyYW5kU2VsZWN0KTtcblxuICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgcmVtb3ZlQ2xhc3Moc2VyaWVzU2VsZWN0c1tpZHhdKTtcbiAgICAgIH1cblxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzTW9iaWxlKCkgJiYgIWlzT3V0T2ZNb2JpbGUpIHtcbiAgICAgIGlzT3V0T2ZNb2JpbGUgPSB0cnVlO1xuXG4gICAgICBhZGRDbGFzcyhicmFuZFNlbGVjdCk7XG5cbiAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgIGFkZENsYXNzKHNlcmllc1NlbGVjdHNbaWR4XSk7XG4gICAgICB9XG5cbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYWRkRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgYnJhbmRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25CcmFuZENoYW5nZSk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgYnJhbmRTZWxlY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25CcmFuZENoYW5nZSk7XG4gIH07XG5cbiAgY29uc3Qgb25CcmFuZENoYW5nZSA9IChldnQpID0+IHtcbiAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgYWRkQ2xhc3Moc2VyaWVzU2VsZWN0c1tpZHhdKTtcbiAgICB9XG5cbiAgICBpZHggPSBldnQudGFyZ2V0LnNlbGVjdGVkSW5kZXg7XG5cbiAgICByZW1vdmVDbGFzcyhzZXJpZXNTZWxlY3RzW2lkeF0pO1xuICB9O1xuXG4gIGlmIChpc01vYmlsZSgpKSB7XG4gICAgcmVtb3ZlQ2xhc3MoYnJhbmRTZWxlY3QpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xufSkoKTtcbiJdfQ==
