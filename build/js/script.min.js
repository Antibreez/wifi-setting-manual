document.getElementById("animation")&&lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",s=200,n=300,i=function(e,t){var i=new XMLHttpRequest;return i.timeout=1e4,i.responseType="json",i.addEventListener("load",(function(){!function(e){return e.status<s||e.status>n}(i)?e(i.response):t("Данные не загрузились. Причина: "+i.status+" "+i.statusText)})),i.addEventListener("error",(function(){t("Произошла ошибка соединения")})),i.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+i.timeout+"мс")})),i},o=function(e){e.remove()},c=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(o,2e3,t)};window.backend={load:function(s,n){var o=i(s,n||c);o.open(t,e),o.send()}}}(),jQuery,function(e){console.log(document.location.search);let t="",s="";const n=document.querySelector(".model-choice__brand-list"),i=document.querySelector(".model-choice__brand-choice"),o=document.querySelector(".model-choice__series-list"),c=document.querySelector(".model-choice__series-choice"),a=document.querySelector(".model-choice__select-brand"),d=document.querySelector(".model-choice__select-series");if(!n)return;let l=-1,r=-1;document.querySelector(".model-choice__series-wrapper"),document.querySelector("#series").content.querySelector(".model-choice__series-select");const m=document.querySelector(".model-choice__link"),u=()=>{if(!n.classList.contains("show"))return n.classList.add("show"),void i.classList.add("opened");n.classList.contains("show")&&(n.classList.remove("show"),i.classList.remove("opened"))},p=()=>{if(!o.classList.contains("show"))return o.classList.add("show"),void c.classList.add("opened");o.classList.contains("show")&&(o.classList.remove("show"),c.classList.remove("opened"))},h=e=>{let t=e.target;t.classList.contains("model-choice__brand-choice")||t.classList.contains("model-choice__brand-item")||t.classList.contains("model-choice__brand-list")||!n.classList.contains("show")||(n.classList.remove("show"),i.classList.remove("opened")),t.classList.contains("model-choice__series-choice")||t.classList.contains("model-choice__series-item")||t.classList.contains("model-choice__series-list")||!o.classList.contains("show")||(o.classList.remove("show"),c.classList.remove("opened"))};e.load(e=>{let L=document.createDocumentFragment(),_=0;e.forEach(e=>{let t=document.createElement("li");t.textContent=e.title,t.classList.add("model-choice__brand-item"),t.setAttribute("data-id",_),_++,L.appendChild(t)}),n.appendChild(L);let v=document.createDocumentFragment();e.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__brand-option"),t.setAttribute("data-id",_),v.appendChild(t)}),a.appendChild(v);i.addEventListener("click",u),c.addEventListener("click",p),n.addEventListener("click",t=>{let a=t.target,d=+a.getAttribute("data-id");if(a.classList.contains("model-choice__brand-item")&&(l===d&&(n.classList.remove("show"),i.classList.remove("opened")),l!==d)){o.innerHTML="",c.textContent="Выбрать из списка",c.classList.remove("selected");let t=document.createDocumentFragment(),d=+a.getAttribute("data-id");e[d].series.forEach(e=>{let s=document.createElement("li");s.textContent=e.title,s.classList.add("model-choice__series-item"),t.appendChild(s)}),o.appendChild(t),l=d,i.textContent=a.textContent,s=a.textContent,i.classList.contains("selected")||i.classList.add("selected"),c.hasAttribute("disabled")&&c.removeAttribute("disabled"),n.classList.remove("show"),i.classList.remove("opened"),m.classList.add("disabled"),m.removeAttribute("href")}}),o.addEventListener("click",e=>{let n=e.target;n.classList.contains("model-choice__series-item")&&(c.textContent=n.textContent,c.classList.contains("selected")||c.classList.add("selected"),o.classList.remove("show"),c.classList.remove("opened"),m.classList.remove("disabled"),t=n.textContent,m.setAttribute("href","installation.html?&"+s+"&"+t))}),a.addEventListener("change",t=>{r=t.target.selectedIndex-1,d.innerHTML="",c.textContent="Выбрать из списка",c.classList.remove("selected");let n=document.createElement("option");n.textContent="",n.setAttribute("disabled",""),n.setAttribute("selected",""),n.style.display="none",d.appendChild(n);let o=document.createDocumentFragment();d.hasAttribute("disabled")&&d.removeAttribute("disabled"),e[r].series.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__series-option"),o.appendChild(t)}),d.appendChild(o),i.textContent=t.target.value,s=t.target.value,i.classList.contains("selected")||i.classList.add("selected"),m.classList.add("disabled"),m.removeAttribute("href")}),d.addEventListener("change",e=>{c.textContent=e.target.value,c.classList.contains("selected")||c.classList.add("selected"),m.classList.remove("disabled"),t=e.target.value,m.setAttribute("href","installation.html?&"+s+"&"+t)}),document.addEventListener("mousedown",h)})}(window.backend),function(){const e=document.querySelector(".equipment__wrapper"),t=document.querySelector(".equipment__container");(()=>{let s=document.createDocumentFragment(),n=e.cloneNode(!0);n.className="equipment__slide-wrapper",n.classList.add("swiper-wrapper");let i=document.createElement("div");i.classList.add("equipment__pagination"),i.classList.add("swiper-pagination"),s.appendChild(n),s.appendChild(i),t.appendChild(s),t.querySelectorAll(".equipment__item").forEach(e=>{e.classList.add("swiper-slide")}),new Swiper(".equipment__container",{pagination:{el:".equipment__pagination",type:"bullets"},loop:!0})})()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImJhY2tlbmQuanMiLCJzZWxlY3QuanMiLCJjaG9pY2UuanMiLCJlcXVpcG1lbnQuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImxvdHRpZSIsImxvYWRBbmltYXRpb24iLCJjb250YWluZXIiLCJyZW5kZXJlciIsImxvb3AiLCJhdXRvcGxheSIsInBhdGgiLCJSZXFVcmwiLCJSZXFNZXRob2QiLCJSZXFTdGF0dXMiLCJjcmVhdGVSZXF1ZXN0Iiwib25Mb2FkIiwib25FcnJvciIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0dXMiLCJpc0Vycm9yU3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0IiwicmVtb3ZlRWxlbWVudCIsImVsZW1lbnQiLCJyZW1vdmUiLCJvbkFueUVycm9yIiwibWVzc2FnZSIsIm5vZGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImZvbnRTaXplIiwidGV4dENvbnRlbnQiLCJib2R5IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50Iiwid2luZG93Iiwic2V0VGltZW91dCIsImJhY2tlbmQiLCJsb2FkIiwicmVxIiwib3BlbiIsInNlbmQiLCJqUXVlcnkiLCJjb25zb2xlIiwibG9nIiwibG9jYXRpb24iLCJzZWFyY2giLCJzZXJpZXNOYW1lIiwiYnJhbmROYW1lIiwiYnJhbmRMaXN0IiwicXVlcnlTZWxlY3RvciIsImJyYW5kQnV0dG9uIiwic2VyaWVzTGlzdCIsInNlcmllc0J1dHRvbiIsImJyYW5kU2VsZWN0Iiwic2VyaWVzU2VsZWN0IiwiY3VycmVudEJyYW5kSWR4IiwiY3VycmVudE9wdGlvbklkeCIsImNvbnRlbnQiLCJsaW5rIiwib25CcmFuZENsaWNrIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJhZGQiLCJvblNlcmllc0NsaWNrIiwib25PdXRzaWRlQ2xpY2siLCJldnQiLCJ0YXJnZXQiLCJhcnIiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpIiwiZm9yRWFjaCIsIml0ZW0iLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImZyYWdtZW50MSIsIm5vZGUxIiwiaWR4IiwiZ2V0QXR0cmlidXRlIiwiaW5uZXJIVE1MIiwic2VyaWVzIiwic2VyaWUiLCJoYXNBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZWxlY3RlZEluZGV4IiwiZGlzcGxheSIsInZhbHVlIiwid3JhcHBlciIsIndyYXBwZXJOb2RlIiwiY2xvbmVOb2RlIiwiY2xhc3NOYW1lIiwicGFnaW5hdGlvbk5vZGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiU3dpcGVyIiwicGFnaW5hdGlvbiIsImVsIiwidHlwZSIsInJlbmRlclNsaWRlciJdLCJtYXBwaW5ncyI6IkFBQ0FBLFNBQUFDLGVBQUEsY0FJQUMsT0FBQUMsY0FBQSxDQUNBQyxVQUFBSixTQUFBQyxlQUFBLGFBQ0FJLFNBQUEsTUFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLEtBQUEsY0NSQSxXQUNBLElBQUFDLEVBQ0EsMENBSUFDLEVBQ0EsTUFJQUMsRUFDQSxJQURBQSxFQUVBLElBVUFDLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLElBQUFDLGVBc0JBLE9BcEJBRCxFQUFBRSxRQVZBLElBV0FGLEVBQUFHLGFBQUEsT0FFQUgsRUFBQUksaUJBQUEsUUFBQSxZQVhBLFNBQUFKLEdBQ0EsT0FBQUEsRUFBQUssT0FBQVQsR0FDQUksRUFBQUssT0FBQVQsRUFVQVUsQ0FBQU4sR0FLQUYsRUFBQUUsRUFBQU8sVUFKQVIsRUFBQSxtQ0FBQUMsRUFBQUssT0FBQSxJQUFBTCxFQUFBUSxlQU9BUixFQUFBSSxpQkFBQSxTQUFBLFdBQ0FMLEVBQUEsa0NBR0FDLEVBQUFJLGlCQUFBLFdBQUEsV0FDQUwsRUFBQSxrQ0FBQUMsRUFBQUUsUUFBQSxTQUdBRixHQUdBUyxFQUFBLFNB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QUEsWUFDQXlCLEVBQUFtQixFQUFBQyxPQUFBb0IsTUFDQTVCLEVBQUFlLGFBQUEsT0FBQSxzQkFBQTFCLEVBQUEsSUFBQUQsS0FzRUFuRCxTQUFBbUIsaUJBQUEsWUFBQWtELEtBOVZBLENBbVdBOUIsT0FBQUUsU0NuV0EsV0FDQSxNQUFBbUQsRUFBQTVGLFNBQUFzRCxjQUFBLHVCQUNBbEQsRUFBQUosU0FBQXNELGNBQUEseUJBbUJBLE1BQ0EsSUFBQW1CLEVBQUF6RSxTQUFBMEUseUJBRUFtQixFQUFBRCxFQUFBRSxXQUFBLEdBQ0FELEVBQUFFLFVBQUEsMkJBQ0FGLEVBQUE1QixVQUFBRSxJQUFBLGtCQUVBLElBQUE2QixFQUFBaEcsU0FBQThCLGNBQUEsT0FDQWtFLEVBQUEvQixVQUFBRSxJQUFBLHlCQUNBNkIsRUFBQS9CLFVBQUFFLElBQUEscUJBRUFNLEVBQUFNLFlBQUFjLEdBQ0FwQixFQUFBTSxZQUFBaUIsR0FFQTVGLEVBQUEyRSxZQUFBTixHQUNBckUsRUFyQkE2RixpQkFBQSxvQkFDQXJCLFFBQUFDLElBQ0FBLEVBQUFaLFVBQUFFLElBQUEsa0JBWkEsSUFBQStCLE9BQUEsd0JBQUEsQ0FDQUMsV0FBQSxDQUNBQyxHQUFBLHlCQUNBQyxLQUFBLFdBRUEvRixNQUFBLEtBK0JBZ0csR0F6Q0EiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuaW1hdGlvbicpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbG90dGllLmxvYWRBbmltYXRpb24oe1xuICAgIGNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuaW1hdGlvbicpLCAvLyB0aGUgZG9tIGVsZW1lbnQgdGhhdCB3aWxsIGNvbnRhaW4gdGhlIGFuaW1hdGlvblxuICAgIHJlbmRlcmVyOiAnc3ZnJyxcbiAgICBsb29wOiB0cnVlLFxuICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgIHBhdGg6ICdkYXRhLmpzb24nIC8vIHRoZSBwYXRoIHRvIHRoZSBhbmltYXRpb24ganNvblxuICB9KTtcbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBSZXFVcmwgPSB7XG4gICAgR0VUOiAnaHR0cHM6Ly9zcGxpdC5kYWljaGljbG91ZC5ydS9icmFuZHMvYWxsJyxcbiAgICAvL1BPU1Q6ICdodHRwczovL2pzLmR1bXAuYWNhZGVteS9rZWtzdGFncmFtJ1xuICB9O1xuXG4gIHZhciBSZXFNZXRob2QgPSB7XG4gICAgR0VUOiAnR0VUJyxcbiAgICBQT1NUOiAnUE9TVCdcbiAgfTtcblxuICB2YXIgUmVxU3RhdHVzID0ge1xuICAgIE9LOiAyMDAsXG4gICAgTVVMVElQTEVfQ0hPSUNFUzogMzAwLFxuICB9O1xuXG4gIHZhciBUSU1FT1VUID0gMTAwMDA7XG5cbiAgdmFyIGlzRXJyb3JTdGF0dXMgPSBmdW5jdGlvbiAoeGhyKSB7XG4gICAgcmV0dXJuIHhoci5zdGF0dXMgPCBSZXFTdGF0dXMuT0tcbiAgICAgIHx8IHhoci5zdGF0dXMgPiBSZXFTdGF0dXMuTVVMVElQTEVfQ0hPSUNFUztcbiAgfTtcblxuICB2YXIgY3JlYXRlUmVxdWVzdCA9IGZ1bmN0aW9uIChvbkxvYWQsIG9uRXJyb3IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICB4aHIudGltZW91dCA9IFRJTUVPVVQ7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlzRXJyb3JTdGF0dXMoeGhyKSkge1xuICAgICAgICBvbkVycm9yKCfQlNCw0L3QvdGL0LUg0L3QtSDQt9Cw0LPRgNGD0LfQuNC70LjRgdGMLiDQn9GA0LjRh9C40L3QsDogJyArIHhoci5zdGF0dXMgKyAnICcgKyB4aHIuc3RhdHVzVGV4dCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb25Mb2FkKHhoci5yZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICBvbkVycm9yKCfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINGB0L7QtdC00LjQvdC10L3QuNGPJyk7XG4gICAgfSk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcigndGltZW91dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9CX0LDQv9GA0L7RgSDQvdC1INGD0YHQv9C10Lsg0LLRi9C/0L7Qu9C90LjRgtGM0YHRjyDQt9CwICcgKyB4aHIudGltZW91dCArICfQvNGBJyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4geGhyO1xuICB9O1xuXG4gIHZhciByZW1vdmVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnJlbW92ZSgpO1xuICB9O1xuXG4gIHZhciBvbkFueUVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5vZGUuc3R5bGUgPSAnei1pbmRleDogMTAwOyBtYXJnaW46IDAgYXV0bzsgdGV4dC1hbGlnbjogY2VudGVyOyBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7JztcbiAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBub2RlLnN0eWxlLmxlZnQgPSAwO1xuICAgIG5vZGUuc3R5bGUucmlnaHQgPSAwO1xuICAgIG5vZGUuc3R5bGUuZm9udFNpemUgPSAnMzBweCc7XG5cbiAgICBub2RlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIG5vZGUpO1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJlbW92ZUVsZW1lbnQsIDIwMDAsIG5vZGUpO1xuICB9O1xuXG4gIHdpbmRvdy5iYWNrZW5kID0ge1xuICAgIGxvYWQ6IGZ1bmN0aW9uIChvbkxvYWQsIG9uRXJyb3IpIHtcbiAgICAgIHZhciByZXEgPSBjcmVhdGVSZXF1ZXN0KG9uTG9hZCwgb25FcnJvciB8fCBvbkFueUVycm9yKTtcbiAgICAgIHJlcS5vcGVuKFJlcU1ldGhvZC5HRVQsIFJlcVVybC5HRVQpO1xuICAgICAgcmVxLnNlbmQoKTtcbiAgICB9LFxuXG4gICAgLy8gc2F2ZTogZnVuY3Rpb24gKGRhdGEsIG9uTG9hZCwgb25FcnJvcikge1xuICAgIC8vICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yKTtcbiAgICAvLyAgIHJlcS5vcGVuKFJlcU1ldGhvZC5QT1NULCBSZXFVcmwuUE9TVCk7XG4gICAgLy8gICByZXEuc2VuZChkYXRhKTtcbiAgICAvLyB9XG4gIH07XG59KSgpO1xuXG5cblxuXG4iLCIvLyAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbi8vICAgLy8gJCgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jykuc2VsZWN0Mih7XG4vLyAgIC8vICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuLy8gICAvLyB9KTtcblxuLy8gICAvLyAkKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jykuc2VsZWN0Mih7XG4vLyAgIC8vICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuLy8gICAvLyB9KTtcblxuLy8gICBmdW5jdGlvbiBtYWtlU2VsZWN0KGVsZW1lbnQpIHtcbi8vICAgICAkKGVsZW1lbnQpLnNlbGVjdDIoe1xuLy8gICAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuLy8gICAgIH0pO1xuLy8gICB9O1xuXG5cblxuXG4vLyAgIHdpbmRvdy5tYWtlU2VsZWN0ID0gbWFrZVNlbGVjdDtcblxuLy8gICBjb25zb2xlLmxvZyh3aW5kb3cubWFrZVNlbGVjdCk7XG5cbi8vIH0pO1xuXG5cbihmdW5jdGlvbigkKSB7XG4gIC8vIGZ1bmN0aW9uIG1ha2VTZWxlY3QoZWxlbWVudENsYXNzKSB7XG4gIC8vICAgJChlbGVtZW50Q2xhc3MpLnNlbGVjdDIoe1xuICAvLyAgICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xLFxuICAvLyAgIH0pO1xuICAvLyB9O1xuXG4gIC8vIHdpbmRvdy5tYWtlU2VsZWN0ID0gbWFrZVNlbGVjdDtcbn0pKGpRdWVyeSk7XG4iLCIoZnVuY3Rpb24gKGJhY2tlbmQpIHtcbiAgLy8gY29uc3Qgc3BsaXRzID0gW1xuICAvLyAgIHtcbiAgLy8gICAgIFwiaWRcIjo3LFxuICAvLyAgICAgXCJ0aXRsZVwiOlwiQXhpb21hXCIsXG4gIC8vICAgICBcInNlcmllc1wiOltcbiAgLy8gICAgICAge1xuICAvLyAgICAgICAgIFwiaWRcIjo2MyxcbiAgLy8gICAgICAgICBcInRpdGxlXCI6XCJBU1hfQVwiXG4gIC8vICAgICAgIH0sXG4gIC8vICAgICAgIHtcbiAgLy8gICAgICAgICBcImlkXCI6NjIsXG4gIC8vICAgICAgICAgXCJ0aXRsZVwiOlwiQVNYX0FaXCJcbiAgLy8gICAgICAgfVxuICAvLyAgICAgXVxuICAvLyAgIH0sXG4gIC8vICAge1wiaWRcIjo2LFwidGl0bGVcIjpcIkRhaWNoaVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NDUsXCJ0aXRsZVwiOlwiQ2FyYm9uIERBX0RWUVwifSx7XCJpZFwiOjQ2LFwidGl0bGVcIjpcIkV2ZXJlc3QgREFfRVZRXCJ9LHtcImlkXCI6NDMsXCJ0aXRsZVwiOlwiUGVhayBEQV9BVlFTXCJ9LHtcImlkXCI6NDIsXCJ0aXRsZVwiOlwiWC10cmVtZSBQZWFrIERBX0FWUVNcIn1dfSxcbiAgLy8gICB7XCJpZFwiOjEsXCJ0aXRsZVwiOlwiRGFpa2luXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjoxMSxcInRpdGxlXCI6XCJDb21mb3JhIEZUWC1KXFwvR1ZcIn0se1wiaWRcIjoyNixcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtSzNcIn0se1wiaWRcIjoyNyxcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtTFwifSx7XCJpZFwiOjI4LFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYUC1NXCJ9LHtcImlkXCI6MjMsXCJ0aXRsZVwiOlwiRW11cmEgRlRYRy1MXCJ9LHtcImlkXCI6MTgsXCJ0aXRsZVwiOlwiRW11cmEgRlRYSi1NXCJ9LHtcImlkXCI6MjAsXCJ0aXRsZVwiOlwiRkxYUy1CXCJ9LHtcImlkXCI6MTYsXCJ0aXRsZVwiOlwiRlRYQi1CXCJ9LHtcImlkXCI6NjUsXCJ0aXRsZVwiOlwiRlRYUy1FXCJ9LHtcImlkXCI6NjQsXCJ0aXRsZVwiOlwiRlRYUy1KXFwvR1wifSx7XCJpZFwiOjIxLFwidGl0bGVcIjpcIkZWWE0tRlwifSx7XCJpZFwiOjIyLFwidGl0bGVcIjpcIkZWWFMtRlwifSx7XCJpZFwiOjE5LFwidGl0bGVcIjpcIk5leHVyYSBGVlhHLUtcIn0se1wiaWRcIjoyNCxcInRpdGxlXCI6XCJQZXJmZXJhIEZUWE0tTlwifSx7XCJpZFwiOjI1LFwidGl0bGVcIjpcIlBlcmZlcmEgRlRYUy1LXCJ9LHtcImlkXCI6MSxcInRpdGxlXCI6XCJTZW5zaXJhIEZUWEItQ1wifV19LFxuICAvLyAgIHtcImlkXCI6MixcInRpdGxlXCI6XCJLZW50YXRzdVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NDksXCJ0aXRsZVwiOlwiQnJhdm8gIEtTR0JfSEZBTlwifSx7XCJpZFwiOjUwLFwidGl0bGVcIjpcIkJyYXZvICBLU0dCQV9IWkFOXCJ9LHtcImlkXCI6NTYsXCJ0aXRsZVwiOlwiS01HQkFfSFpBTlwifSx7XCJpZFwiOjU3LFwidGl0bGVcIjpcIktNR0JCX0haQU5cIn0se1wiaWRcIjo1MixcInRpdGxlXCI6XCJUZWFtICBLU0dUX0haQU5cIn0se1wiaWRcIjo0NyxcInRpdGxlXCI6XCJUaXRhbiBHZW5lc2lzIEtTR1hcIn0se1wiaWRcIjo1MSxcInRpdGxlXCI6XCJUdXJpbiBLU0dVX0haQU5cIn1dfSxcbiAgLy8gICB7XCJpZFwiOjgsXCJ0aXRsZVwiOlwiTWlkZWFcIixcInNlcmllc1wiOlt7XCJpZFwiOjYxLFwidGl0bGVcIjpcIkJsYW5jIE1TTUFcIn0se1wiaWRcIjo2MCxcInRpdGxlXCI6XCJCbGFuYyBNU01BIEVSUCAoTUEpXCJ9LHtcImlkXCI6NTksXCJ0aXRsZVwiOlwiTWlzc2lvbiBNU01CIChNQilcIn0se1wiaWRcIjo1OCxcInRpdGxlXCI6XCJVbHRpbWF0ZSBDb21mb3J0IE1TTVQgKE1UKVwifV19XTtcblxuICBjb25zb2xlLmxvZyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpO1xuXG4gIGxldCBzZXJpZXNOYW1lID0gJyc7XG4gIGxldCBicmFuZE5hbWUgPSAnJztcblxuICBjb25zdCBicmFuZENsYXNzID0gJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCc7XG4gIGNvbnN0IHNlcmllc0NsYXNzID0gJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnO1xuXG4gIGNvbnN0IGJyYW5kTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLWxpc3QnKTtcbiAgY29uc3QgYnJhbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1jaG9pY2UnKTtcbiAgY29uc3Qgc2VyaWVzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1saXN0Jyk7XG4gIGNvbnN0IHNlcmllc0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1jaG9pY2UnKTtcbiAgY29uc3QgYnJhbmRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZWxlY3QtYnJhbmQnKTtcbiAgY29uc3Qgc2VyaWVzU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VsZWN0LXNlcmllcycpO1xuXG4gIGlmICghYnJhbmRMaXN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGN1cnJlbnRCcmFuZElkeCA9IC0xO1xuICBsZXQgY3VycmVudE9wdGlvbklkeCA9IC0xO1xuXG4gIC8vY29uc3QgYnJhbmRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKTtcbiAgY29uc3Qgc2VyaWVzV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy13cmFwcGVyJyk7XG4gIGNvbnN0IHNlcmllc1RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlcmllcycpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19saW5rJyk7XG5cbiAgY29uc3Qgb25CcmFuZENsaWNrID0gKCkgPT4ge1xuICAgIGlmICghYnJhbmRMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBicmFuZExpc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGJyYW5kTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xuICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cbiAgICAvLyBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLWxpc3QnKS5tQ3VzdG9tU2Nyb2xsYmFyKHtcbiAgICAvLyAgIHNldEhlaWdodDogMTg5LFxuICAgIC8vICAgYXV0b0hpZGVTY3JvbGxiYXI6IGZhbHNlLFxuICAgIC8vICAgdGhlbWU6ICdkYXJrJyxcbiAgICAvLyAgIG1vdXNlV2hlZWxQaXhlbHM6IDIwMCxcbiAgICAvLyAgIGNvbnRlbnRUb3VjaFNjcm9sbDogdHJ1ZVxuICAgIC8vIH0pO1xuICB9O1xuXG4gIGNvbnN0IG9uU2VyaWVzQ2xpY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFzZXJpZXNMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBzZXJpZXNMaXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdvcGVuZWQnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHNlcmllc0xpc3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIC0gd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2VyaWVzTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xuICAgICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uT3V0c2lkZUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIGxldCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKFxuICAgICAgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtY2hvaWNlJylcbiAgICAgICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWl0ZW0nKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtbGlzdCcpXG4gICAgICAmJiBicmFuZExpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JylcbiAgICApIHtcbiAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19zZXJpZXMtY2hvaWNlJylcbiAgICAgICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJylcbiAgICAgICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1saXN0JylcbiAgICAgICYmIHNlcmllc0xpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JylcbiAgICApIHtcbiAgICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBtYWtlT3B0aW9uTm9kZSA9IChhcnIpID0+IHtcbiAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgbGV0IGkgPSAwO1xuXG4gICAgYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBpdGVtWyd0aXRsZSddO1xuICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWl0ZW0nKTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaSk7XG4gICAgICBpKys7XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcblxuICAgICAgLy8gbGV0IHNlcmllc1NlbGVjdCA9IHNlcmllc1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBpdGVtWyd0aXRsZSddKTtcblxuICAgICAgLy8gaXRlbS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAgIC8vICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIC8vICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgc2VyaWVbJ3RpdGxlJ10pO1xuICAgICAgLy8gICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAvLyAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIC8vIH0pO1xuXG4gICAgICAvLyBzZXJpZXNXcmFwcGVyLmFwcGVuZENoaWxkKHNlcmllc1NlbGVjdCk7XG4gICAgfSk7XG5cbiAgICBicmFuZExpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG5cbiAgICBsZXQgZnJhZ21lbnQxID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGxldCBqID0gMDtcblxuICAgIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBsZXQgbm9kZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIG5vZGUxLnRleHRDb250ZW50ID0gaXRlbVsndGl0bGUnXTtcbiAgICAgIG5vZGUxLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fYnJhbmQtb3B0aW9uJyk7XG4gICAgICBub2RlMS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpKTtcbiAgICAgIGorKztcbiAgICAgIGZyYWdtZW50MS5hcHBlbmRDaGlsZChub2RlMSk7XG5cbiAgICAgIC8vIGxldCBzZXJpZXNTZWxlY3QgPSBzZXJpZXNUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAvLyBzZXJpZXNTZWxlY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAvLyBzZXJpZXNTZWxlY3Quc2V0QXR0cmlidXRlKCduYW1lJywgaXRlbVsndGl0bGUnXSk7XG5cbiAgICAgIC8vIGl0ZW0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAvLyAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAvLyAgIG5vZGUuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHNlcmllWyd0aXRsZSddKTtcbiAgICAgIC8vICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgICAgLy8gICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAvLyB9KTtcblxuICAgICAgLy8gc2VyaWVzV3JhcHBlci5hcHBlbmRDaGlsZChzZXJpZXNTZWxlY3QpO1xuICAgIH0pO1xuXG4gICAgYnJhbmRTZWxlY3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQxKTtcblxuXG5cbiAgICBjb25zdCBvbkJyYW5kSXRlbUNsaWNrID0gKGV2dCkgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG4gICAgICBsZXQgaWR4ID0gK3RhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpKSB7XG4gICAgICAgIGlmIChjdXJyZW50QnJhbmRJZHggPT09IGlkeCkge1xuICAgICAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudEJyYW5kSWR4ICE9PSBpZHgpIHtcbiAgICAgICAgICBzZXJpZXNMaXN0LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gJ9CS0YvQsdGA0LDRgtGMINC40Lcg0YHQv9C40YHQutCwJztcbiAgICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblxuICAgICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICBsZXQgaWR4ID0gK3RhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuICAgICAgICAgIGFycltpZHhdLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJyk7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNlcmllc0xpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICAgIGN1cnJlbnRCcmFuZElkeCA9IGlkeDtcblxuICAgICAgICAgIGJyYW5kQnV0dG9uLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICAgIGJyYW5kTmFtZSA9IHRhcmdldC50ZXh0Q29udGVudDtcbiAgICAgICAgICBpZiAoIWJyYW5kQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VyaWVzQnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgc2VyaWVzQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuXG4gICAgICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvbkJyYW5kQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgICAgY3VycmVudE9wdGlvbklkeCA9IGV2dC50YXJnZXQuc2VsZWN0ZWRJbmRleCAtIDE7XG4gICAgICBzZXJpZXNTZWxlY3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgIHNlcmllc0J1dHRvbi50ZXh0Q29udGVudCA9ICfQktGL0LHRgNCw0YLRjCDQuNC3INGB0L/QuNGB0LrQsCc7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICcnKTtcbiAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gICAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgIGlmIChzZXJpZXNTZWxlY3QuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgIHNlcmllc1NlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICB9XG5cblxuICAgICAgYXJyW2N1cnJlbnRPcHRpb25JZHhdLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnbW9kZWwtY2hvaWNlX19zZXJpZXMtb3B0aW9uJyk7XG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgfSk7XG5cbiAgICAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIGJyYW5kQnV0dG9uLnRleHRDb250ZW50ID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAgIGJyYW5kTmFtZSA9IGV2dC50YXJnZXQudmFsdWU7XG4gICAgICBpZiAoIWJyYW5kQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgfVxuXG4gICAgICBsaW5rLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIH1cblxuICAgIGNvbnN0IG9uU2VyaWVzSXRlbUNsaWNrID0gKGV2dCkgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJykpIHtcbiAgICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICBpZiAoIXNlcmllc0J1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG5cbiAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICBzZXJpZXNOYW1lID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICdpbnN0YWxsYXRpb24uaHRtbD8mJyArIGJyYW5kTmFtZSArICcmJyArIHNlcmllc05hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG9uU2VyaWVzQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAgIGlmICghc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgIH1cblxuICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgc2VyaWVzTmFtZSA9IGV2dC50YXJnZXQudmFsdWU7XG4gICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICdpbnN0YWxsYXRpb24uaHRtbD8mJyArIGJyYW5kTmFtZSArICcmJyArIHNlcmllc05hbWUpO1xuICAgIH1cblxuICAgIC8vbGV0IHNwbGl0c0RhdGEgPSBiYWNrZW5kLmxvYWQoZ2V0RGF0YSk7XG5cbiAgICAvL2JyYW5kU2VsZWN0LmFwcGVuZENoaWxkKG1ha2VPcHRpb25Ob2RlKHNwbGl0cykpO1xuICAgIC8vbWFrZU9wdGlvbk5vZGUoc3BsaXRzKTtcbiAgICAvL2JhY2tlbmQubG9hZChtYWtlT3B0aW9uTm9kZSk7XG5cblxuICAgIC8vIG1ha2VTZWxlY3QoYnJhbmRDbGFzcyk7XG4gICAgLy8gbWFrZVNlbGVjdChzZXJpZXNDbGFzcyk7XG5cbiAgICAvLyBqUXVlcnkoYnJhbmRDbGFzcykuc2VsZWN0Mignb3BlbicpO1xuICAgIC8vIGpRdWVyeShicmFuZENsYXNzKS5zZWxlY3QyKCdjbG9zZScpO1xuXG5cbiAgICAvLyBjb25zdCBzZXJpZXNTZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuXG5cbiAgICAvLyBjb25zdCBoaWRlU2VyaWVzID0gKCkgPT4ge1xuICAgIC8vICAgc2VyaWVzU2VsZWN0cy5mb3JFYWNoKChzZWxlY3QpID0+IHtcbiAgICAvLyAgICAgaWYgKCFzZWxlY3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgIC8vICAgICAgIHNlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAvLyAgICAgICBzZWxlY3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9KVxuICAgIC8vIH07XG5cbiAgICAvLyBjb25zdCBzaG93U2VyaWVzID0gKGlkeCkgPT4ge1xuICAgIC8vICAgc2VyaWVzU2VsZWN0c1tpZHhdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIC8vICAgc2VyaWVzU2VsZWN0c1tpZHhdLnNldEF0dHJpYnV0ZSgnaWQnLCAnc2VyaWVzLXNlbGVjdCcpO1xuICAgIC8vIH07XG5cbiAgICAvLyBqUXVlcnkoYnJhbmRDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAvLyAgIGxldCBpZHggPSAralF1ZXJ5KCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3Qgb3B0aW9uOnNlbGVjdGVkJykuYXR0cignZGF0YS1pZCcpO1xuXG4gICAgLy8gICBoaWRlU2VyaWVzKCk7XG4gICAgLy8gICBzaG93U2VyaWVzKGlkeCArIDEpO1xuXG4gICAgLy8gICBqUXVlcnkoJyNzZXJpZXMtc2VsZWN0Jykuc2VsZWN0Mignb3BlbicpO1xuICAgIC8vICAgalF1ZXJ5KCcjc2VyaWVzLXNlbGVjdCcpLnNlbGVjdDIoJ2Nsb3NlJyk7XG5cbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgLy8gICBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIGpRdWVyeShzZXJpZXNDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAvLyAgIGlmIChsaW5rLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkge1xuICAgIC8vICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgLy8gICB9XG5cbiAgICAvLyAgIGxldCB2YWx1ZSA9IGpRdWVyeShldnQudGFyZ2V0KS5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpO1xuICAgIC8vICAgc2VyaWVzTmFtZSA9IHZhbHVlO1xuXG5cbiAgICAvLyAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgc2VyaWVzTmFtZSk7XG5cbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIC8vIH0pO1xuXG4gICAgLy9SZXNpemUuaW5pdCgpO1xuICAgIC8vUmVzaXplLmFkZExpc3RlbmVyKCk7XG5cbiAgICBicmFuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQnJhbmRDbGljayk7XG4gICAgc2VyaWVzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TZXJpZXNDbGljayk7XG4gICAgYnJhbmRMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CcmFuZEl0ZW1DbGljayk7XG4gICAgc2VyaWVzTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU2VyaWVzSXRlbUNsaWNrKTtcbiAgICBicmFuZFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkJyYW5kQ2hhbmdlKTtcbiAgICBzZXJpZXNTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25TZXJpZXNDaGFuZ2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uT3V0c2lkZUNsaWNrKTtcbiAgfTtcblxuICBiYWNrZW5kLmxvYWQobWFrZU9wdGlvbk5vZGUpO1xuXG59KSh3aW5kb3cuYmFja2VuZCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVxdWlwbWVudF9fd3JhcHBlcicpO1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXF1aXBtZW50X19jb250YWluZXInKTtcblxuICBjb25zdCBpbml0U3dpcGVyID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgU3dpcGVyKCcuZXF1aXBtZW50X19jb250YWluZXInLCB7XG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiAnLmVxdWlwbWVudF9fcGFnaW5hdGlvbicsXG4gICAgICAgIHR5cGU6ICdidWxsZXRzJyxcbiAgICAgIH0sXG4gICAgICBsb29wOiB0cnVlLFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGFkZFNsaWRlQ2xhc3MgPSAoZWxlbWVudCkgPT4ge1xuICAgIGxldCBpdGVtcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVxdWlwbWVudF9faXRlbScpO1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXNsaWRlJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyU2xpZGVyID0gKCkgPT4ge1xuICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIGxldCB3cmFwcGVyTm9kZSA9IHdyYXBwZXIuY2xvbmVOb2RlKHRydWUpO1xuICAgIHdyYXBwZXJOb2RlLmNsYXNzTmFtZSA9ICdlcXVpcG1lbnRfX3NsaWRlLXdyYXBwZXInO1xuICAgIHdyYXBwZXJOb2RlLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci13cmFwcGVyJyk7XG5cbiAgICBsZXQgcGFnaW5hdGlvbk5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwYWdpbmF0aW9uTm9kZS5jbGFzc0xpc3QuYWRkKCdlcXVpcG1lbnRfX3BhZ2luYXRpb24nKTtcbiAgICBwYWdpbmF0aW9uTm9kZS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItcGFnaW5hdGlvbicpO1xuXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQod3JhcHBlck5vZGUpO1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHBhZ2luYXRpb25Ob2RlKTtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgYWRkU2xpZGVDbGFzcyhjb250YWluZXIpO1xuXG4gICAgaW5pdFN3aXBlcigpO1xuICB9O1xuXG4gIHJlbmRlclNsaWRlcigpO1xufSkoKTtcbiJdfQ==
