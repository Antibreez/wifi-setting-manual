lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",i=200,l=300,s=function(e,t){var s=new XMLHttpRequest;return s.timeout=1e4,s.responseType="json",s.addEventListener("load",(function(){!function(e){return e.status<i||e.status>l}(s)?e(s.response):t("Данные не загрузились. Причина: "+s.status+" "+s.statusText)})),s.addEventListener("error",(function(){t("Произошла ошибка соединения")})),s.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+s.timeout+"мс")})),s},n=function(e){e.remove()},d=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(n,2e3,t)};window.backend={load:function(i,l){var n=s(i,l||d);n.open(t,e),n.send()}}}(),function(e){window.makeSelect=function(t){e(t).select2({minimumResultsForSearch:-1})}}(jQuery),function(e){let t="#";const i=".model-choice__brand-select",l=document.querySelector(".model-choice__brand-select"),s=document.querySelector(".model-choice__series-wrapper"),n=document.querySelector("#series").content.querySelector(".model-choice__series-select"),d=document.querySelector(".model-choice__link");(e=>{let t=document.createDocumentFragment(),i=0;e.forEach(e=>{let l=document.createElement("option");l.setAttribute("value",e.title),l.textContent=e.title,l.setAttribute("data-id",i),i++,t.appendChild(l);let d=n.cloneNode(!0);d.classList.add("hidden"),d.setAttribute("name",e.title),e.series.forEach(e=>{let t=document.createElement("option");t.setAttribute("value",e.title),t.textContent=e.title,d.appendChild(t)}),s.appendChild(d)}),l.appendChild(t)})([{id:7,title:"Axioma",series:[{id:63,title:"ASX_A"},{id:62,title:"ASX_AZ"}]},{id:6,title:"Daichi",series:[{id:45,title:"Carbon DA_DVQ"},{id:46,title:"Everest DA_EVQ"},{id:43,title:"Peak DA_AVQS"},{id:42,title:"X-treme Peak DA_AVQS"}]},{id:1,title:"Daikin",series:[{id:11,title:"Comfora FTX-J/GV"},{id:26,title:"Comfora FTXP-K3"},{id:27,title:"Comfora FTXP-L"},{id:28,title:"Comfora FTXP-M"},{id:23,title:"Emura FTXG-L"},{id:18,title:"Emura FTXJ-M"},{id:20,title:"FLXS-B"},{id:16,title:"FTXB-B"},{id:65,title:"FTXS-E"},{id:64,title:"FTXS-J/G"},{id:21,title:"FVXM-F"},{id:22,title:"FVXS-F"},{id:19,title:"Nexura FVXG-K"},{id:24,title:"Perfera FTXM-N"},{id:25,title:"Perfera FTXS-K"},{id:1,title:"Sensira FTXB-C"}]},{id:2,title:"Kentatsu",series:[{id:49,title:"Bravo  KSGB_HFAN"},{id:50,title:"Bravo  KSGBA_HZAN"},{id:56,title:"KMGBA_HZAN"},{id:57,title:"KMGBB_HZAN"},{id:52,title:"Team  KSGT_HZAN"},{id:47,title:"Titan Genesis KSGX"},{id:51,title:"Turin KSGU_HZAN"}]},{id:8,title:"Midea",series:[{id:61,title:"Blanc MSMA"},{id:60,title:"Blanc MSMA ERP (MA)"},{id:59,title:"Mission MSMB (MB)"},{id:58,title:"Ultimate Comfort MSMT (MT)"}]}]),e(i),e(".model-choice__series-select"),jQuery(i).select2("open"),jQuery(i).select2("close");const o=document.querySelectorAll(".model-choice__series-select");jQuery(i).on("change",(function(e){let t=+jQuery(".model-choice__brand-select option:selected").attr("data-id");o.forEach(e=>{e.classList.contains("hidden")||(e.classList.add("hidden"),e.removeAttribute("id"))}),(e=>{o[e].classList.remove("hidden"),o[e].setAttribute("id","series-select")})(t+1),jQuery("#series-select").select2("open"),jQuery("#series-select").select2("close"),jQuery(".model-choice__brand-select").addClass("selected"),jQuery(".model-choice__series-select").removeClass("selected")})),jQuery(".model-choice__series-select").on("change",(function(e){d.classList.contains("disabled")&&d.classList.remove("disabled");let i=jQuery(e.target).children("option:selected").text();t=i,d.setAttribute("href",t),jQuery(".model-choice__series-select").addClass("selected")}))}(window.makeSelect),function(){const e=document.querySelector(".model-choice__brand-select"),t=document.querySelectorAll(".model-choice__series-select");let i=-1;const l=e=>{e.classList.remove("select2-hidden-accessible")},s=e=>{e.classList.add("select2-hidden-accessible")},n=()=>window.matchMedia("(max-width: 479px)").matches;let d=!n;const o=()=>{e.addEventListener("change",r)},c=()=>{e.removeEventListener("change",r)},r=e=>{-1!==i&&s(t[i]),i=e.target.selectedIndex,l(t[i])};n()&&(l(e),o()),window.addEventListener("resize",()=>{n()&&d&&(d=!1,l(e),-1!==i&&l(t[i]),o()),n()||d||(d=!0,s(e),-1!==i&&s(t[i]),c())})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImJhY2tlbmQuanMiLCJzZWxlY3QuanMiLCJjaG9pY2UuanMiLCJyZXNpemUuanMiXSwibmFtZXMiOlsibG90dGllIiwibG9hZEFuaW1hdGlvbiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW5kZXJlciIsImxvb3AiLCJhdXRvcGxheSIsInBhdGgiLCJSZXFVcmwiLCJSZXFNZXRob2QiLCJSZXFTdGF0dXMiLCJjcmVhdGVSZXF1ZXN0Iiwib25Mb2FkIiwib25FcnJvciIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0dXMiLCJpc0Vycm9yU3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0IiwicmVtb3ZlRWxlbWVudCIsImVsZW1lbnQiLCJyZW1vdmUiLCJvbkFueUVycm9yIiwibWVzc2FnZSIsIm5vZGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImZvbnRTaXplIiwidGV4dENvbnRlbnQiLCJib2R5IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50Iiwid2luZG93Iiwic2V0VGltZW91dCIsImJhY2tlbmQiLCJsb2FkIiwicmVxIiwib3BlbiIsInNlbmQiLCIkIiwibWFrZVNlbGVjdCIsImVsZW1lbnRDbGFzcyIsInNlbGVjdDIiLCJtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCIsImpRdWVyeSIsImxpbmtIcmVmIiwiYnJhbmRDbGFzcyIsImJyYW5kU2VsZWN0IiwicXVlcnlTZWxlY3RvciIsInNlcmllc1dyYXBwZXIiLCJzZXJpZXNUZW1wbGF0ZSIsImNvbnRlbnQiLCJsaW5rIiwiYXJyIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaSIsImZvckVhY2giLCJpdGVtIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJzZXJpZXNTZWxlY3QiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXJpZXMiLCJzZXJpZSIsIm1ha2VPcHRpb25Ob2RlIiwiaWQiLCJ0aXRsZSIsInNlcmllc1NlbGVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwib24iLCJldnQiLCJpZHgiLCJhdHRyIiwic2VsZWN0IiwiY29udGFpbnMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzaG93U2VyaWVzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInZhbHVlIiwidGFyZ2V0IiwiY2hpbGRyZW4iLCJ0ZXh0IiwiaXNNb2JpbGUiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImlzT3V0T2ZNb2JpbGUiLCJhZGRFdmVudExpc3RlbmVycyIsIm9uQnJhbmRDaGFuZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZWxlY3RlZEluZGV4Il0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBQUMsY0FBQSxDQUNBQyxVQUFBQyxTQUFBQyxlQUFBLGFBQ0FDLFNBQUEsTUFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLEtBQUEsY0NKQSxXQUNBLElBQUFDLEVBQ0EsMENBSUFDLEVBQ0EsTUFJQUMsRUFDQSxJQURBQSxFQUVBLElBVUFDLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLElBQUFDLGVBc0JBLE9BcEJBRCxFQUFBRSxRQVZBLElBV0FGLEVBQUFHLGFBQUEsT0FFQUgsRUFBQUksaUJBQUEsUUFBQSxZQVhBLFNBQUFKLEdBQ0EsT0FBQUEsRUFBQUssT0FBQVQsR0FDQUksRUFBQUssT0FBQVQsRUFVQVUsQ0FBQU4sR0FLQUYsRUFBQUUsRUFBQU8sVUFKQVIsRUFBQSxtQ0FBQUMsRUFBQUssT0FBQSxJQUFBTCxFQUFBUSxlQU9BUixFQUFBSSxpQkFBQSxTQUFBLFdBQ0FMLEVBQUEsa0NBR0FDLEVBQUFJLGlCQUFBLFdBQUEsV0FDQUwsRUFBQSxrQ0FBQUMsRUFBQUUsUUFBQSxTQUdBRixHQUdBUyxFQUFBLFNBQUFDLEdBQ0FBLEVBQUFD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T0FBQSxZQUdBLElBQUErRCxFQUFBdEMsT0FBQTZCLEVBQUFVLFFBQUFDLFNBQUEsbUJBQUFDLE9BQ0F4QyxFQUFBcUMsRUFHQTlCLEVBQUFPLGFBQUEsT0FBQWQsR0FFQUQsT0FBQSxnQ0FBQW9DLFNBQUEsZUFoSEEsQ0FtSEFoRCxPQUFBUSxZQ25IQSxXQUNBLE1BQUFPLEVBQUFuRCxTQUFBb0QsY0FBQSwrQkFDQXNCLEVBQUExRSxTQUFBMkUsaUJBQUEsZ0NBR0EsSUFBQUcsR0FBQSxFQUVBLE1BQUFPLEVBQUF2QixJQUNBQSxFQUFBSyxVQUFBNUMsT0FMQSw4QkFRQTZELEVBQUF0QixJQUNBQSxFQUFBSyxVQUFBQyxJQVRBLDhCQVlBc0IsRUFBQSxJQUNBdEQsT0FBQXVELFdBQUEsc0JBQUFDLFFBR0EsSUFBQUMsR0FBQUgsRUFFQSxNQTBCQUksRUFBQSxLQUNBM0MsRUFBQW5DLGlCQUFBLFNBQUErRSxJQUdBQyxFQUFBLEtBQ0E3QyxFQUFBOEMsb0JBQUEsU0FBQUYsSUFHQUEsRUFBQWxCLEtBQ0EsSUFBQUMsR0FDQU0sRUFBQVYsRUFBQUksSUFHQUEsRUFBQUQsRUFBQVUsT0FBQVcsY0FFQWIsRUFBQVgsRUFBQUksS0FHQVksTUFDQUwsRUFBQWxDLEdBQ0EyQyxLQUdBMUQsT0FBQXBCLGlCQUFBLFNBakRBLEtBQ0EwRSxLQUFBRyxJQUNBQSxHQUFBLEVBRUFSLEVBQUFsQyxJQUVBLElBQUEyQixHQUNBTyxFQUFBWCxFQUFBSSxJQUdBZ0IsS0FHQUosS0FBQUcsSUFDQUEsR0FBQSxFQUVBVCxFQUFBakMsSUFFQSxJQUFBMkIsR0FDQU0sRUFBQVYsRUFBQUksSUFHQWtCLE9BM0NBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICBsb3R0aWUubG9hZEFuaW1hdGlvbih7XG4gICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uJyksIC8vIHRoZSBkb20gZWxlbWVudCB0aGF0IHdpbGwgY29udGFpbiB0aGUgYW5pbWF0aW9uXG4gICAgcmVuZGVyZXI6ICdzdmcnLFxuICAgIGxvb3A6IHRydWUsXG4gICAgYXV0b3BsYXk6IHRydWUsXG4gICAgcGF0aDogJ2RhdGEuanNvbicgLy8gdGhlIHBhdGggdG8gdGhlIGFuaW1hdGlvbiBqc29uXG4gIH0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFJlcVVybCA9IHtcbiAgICBHRVQ6ICdodHRwczovL3NwbGl0LmRhaWNoaWNsb3VkLnJ1L2JyYW5kcy9hbGwnLFxuICAgIC8vUE9TVDogJ2h0dHBzOi8vanMuZHVtcC5hY2FkZW15L2tla3N0YWdyYW0nXG4gIH07XG5cbiAgdmFyIFJlcU1ldGhvZCA9IHtcbiAgICBHRVQ6ICdHRVQnLFxuICAgIFBPU1Q6ICdQT1NUJ1xuICB9O1xuXG4gIHZhciBSZXFTdGF0dXMgPSB7XG4gICAgT0s6IDIwMCxcbiAgICBNVUxUSVBMRV9DSE9JQ0VTOiAzMDAsXG4gIH07XG5cbiAgdmFyIFRJTUVPVVQgPSAxMDAwMDtcblxuICB2YXIgaXNFcnJvclN0YXR1cyA9IGZ1bmN0aW9uICh4aHIpIHtcbiAgICByZXR1cm4geGhyLnN0YXR1cyA8IFJlcVN0YXR1cy5PS1xuICAgICAgfHwgeGhyLnN0YXR1cyA+IFJlcVN0YXR1cy5NVUxUSVBMRV9DSE9JQ0VTO1xuICB9O1xuXG4gIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci50aW1lb3V0ID0gVElNRU9VVDtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNFcnJvclN0YXR1cyh4aHIpKSB7XG4gICAgICAgIG9uRXJyb3IoJ9CU0LDQvdC90YvQtSDQvdC1INC30LDQs9GA0YPQt9C40LvQuNGB0YwuINCf0YDQuNGH0LjQvdCwOiAnICsgeGhyLnN0YXR1cyArICcgJyArIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvbkxvYWQoeGhyLnJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8nKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCd0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgb25FcnJvcign0JfQsNC/0YDQvtGBINC90LUg0YPRgdC/0LXQuyDQstGL0L/QvtC70L3QuNGC0YzRgdGPINC30LAgJyArIHhoci50aW1lb3V0ICsgJ9C80YEnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgdmFyIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gIH07XG5cbiAgdmFyIG9uQW55RXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbm9kZS5zdHlsZSA9ICd6LWluZGV4OiAxMDA7IG1hcmdpbjogMCBhdXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHJlZDsnO1xuICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG5vZGUuc3R5bGUubGVmdCA9IDA7XG4gICAgbm9kZS5zdHlsZS5yaWdodCA9IDA7XG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9ICczMHB4JztcblxuICAgIG5vZGUudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbm9kZSk7XG4gICAgd2luZG93LnNldFRpbWVvdXQocmVtb3ZlRWxlbWVudCwgMjAwMCwgbm9kZSk7XG4gIH07XG5cbiAgd2luZG93LmJhY2tlbmQgPSB7XG4gICAgbG9hZDogZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yIHx8IG9uQW55RXJyb3IpO1xuICAgICAgcmVxLm9wZW4oUmVxTWV0aG9kLkdFVCwgUmVxVXJsLkdFVCk7XG4gICAgICByZXEuc2VuZCgpO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlOiBmdW5jdGlvbiAoZGF0YSwgb25Mb2FkLCBvbkVycm9yKSB7XG4gICAgLy8gICB2YXIgcmVxID0gY3JlYXRlUmVxdWVzdChvbkxvYWQsIG9uRXJyb3IpO1xuICAgIC8vICAgcmVxLm9wZW4oUmVxTWV0aG9kLlBPU1QsIFJlcVVybC5QT1NUKTtcbiAgICAvLyAgIHJlcS5zZW5kKGRhdGEpO1xuICAgIC8vIH1cbiAgfTtcbn0pKCk7XG5cblxuXG5cbiIsIi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuLy8gICAvLyAkKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIC8vICQoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIGZ1bmN0aW9uIG1ha2VTZWxlY3QoZWxlbWVudCkge1xuLy8gICAgICQoZWxlbWVudCkuc2VsZWN0Mih7XG4vLyAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgICAgfSk7XG4vLyAgIH07XG5cblxuXG5cbi8vICAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xuXG4vLyAgIGNvbnNvbGUubG9nKHdpbmRvdy5tYWtlU2VsZWN0KTtcblxuLy8gfSk7XG5cblxuKGZ1bmN0aW9uKCQpIHtcbiAgZnVuY3Rpb24gbWFrZVNlbGVjdChlbGVtZW50Q2xhc3MpIHtcbiAgICAkKGVsZW1lbnRDbGFzcykuc2VsZWN0Mih7XG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4gICAgfSk7XG4gIH07XG5cbiAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbiAobWFrZVNlbGVjdCkge1xuICBjb25zdCBzcGxpdHMgPSBbXG4gICAge1xuICAgICAgXCJpZFwiOjcsXG4gICAgICBcInRpdGxlXCI6XCJBeGlvbWFcIixcbiAgICAgIFwic2VyaWVzXCI6W1xuICAgICAgICB7XG4gICAgICAgICAgXCJpZFwiOjYzLFxuICAgICAgICAgIFwidGl0bGVcIjpcIkFTWF9BXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIFwiaWRcIjo2MixcbiAgICAgICAgICBcInRpdGxlXCI6XCJBU1hfQVpcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XCJpZFwiOjYsXCJ0aXRsZVwiOlwiRGFpY2hpXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjo0NSxcInRpdGxlXCI6XCJDYXJib24gREFfRFZRXCJ9LHtcImlkXCI6NDYsXCJ0aXRsZVwiOlwiRXZlcmVzdCBEQV9FVlFcIn0se1wiaWRcIjo0MyxcInRpdGxlXCI6XCJQZWFrIERBX0FWUVNcIn0se1wiaWRcIjo0MixcInRpdGxlXCI6XCJYLXRyZW1lIFBlYWsgREFfQVZRU1wifV19LFxuICAgIHtcImlkXCI6MSxcInRpdGxlXCI6XCJEYWlraW5cIixcInNlcmllc1wiOlt7XCJpZFwiOjExLFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYLUpcXC9HVlwifSx7XCJpZFwiOjI2LFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYUC1LM1wifSx7XCJpZFwiOjI3LFwidGl0bGVcIjpcIkNvbWZvcmEgRlRYUC1MXCJ9LHtcImlkXCI6MjgsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLU1cIn0se1wiaWRcIjoyMyxcInRpdGxlXCI6XCJFbXVyYSBGVFhHLUxcIn0se1wiaWRcIjoxOCxcInRpdGxlXCI6XCJFbXVyYSBGVFhKLU1cIn0se1wiaWRcIjoyMCxcInRpdGxlXCI6XCJGTFhTLUJcIn0se1wiaWRcIjoxNixcInRpdGxlXCI6XCJGVFhCLUJcIn0se1wiaWRcIjo2NSxcInRpdGxlXCI6XCJGVFhTLUVcIn0se1wiaWRcIjo2NCxcInRpdGxlXCI6XCJGVFhTLUpcXC9HXCJ9LHtcImlkXCI6MjEsXCJ0aXRsZVwiOlwiRlZYTS1GXCJ9LHtcImlkXCI6MjIsXCJ0aXRsZVwiOlwiRlZYUy1GXCJ9LHtcImlkXCI6MTksXCJ0aXRsZVwiOlwiTmV4dXJhIEZWWEctS1wifSx7XCJpZFwiOjI0LFwidGl0bGVcIjpcIlBlcmZlcmEgRlRYTS1OXCJ9LHtcImlkXCI6MjUsXCJ0aXRsZVwiOlwiUGVyZmVyYSBGVFhTLUtcIn0se1wiaWRcIjoxLFwidGl0bGVcIjpcIlNlbnNpcmEgRlRYQi1DXCJ9XX0sXG4gICAge1wiaWRcIjoyLFwidGl0bGVcIjpcIktlbnRhdHN1XCIsXCJzZXJpZXNcIjpbe1wiaWRcIjo0OSxcInRpdGxlXCI6XCJCcmF2byAgS1NHQl9IRkFOXCJ9LHtcImlkXCI6NTAsXCJ0aXRsZVwiOlwiQnJhdm8gIEtTR0JBX0haQU5cIn0se1wiaWRcIjo1NixcInRpdGxlXCI6XCJLTUdCQV9IWkFOXCJ9LHtcImlkXCI6NTcsXCJ0aXRsZVwiOlwiS01HQkJfSFpBTlwifSx7XCJpZFwiOjUyLFwidGl0bGVcIjpcIlRlYW0gIEtTR1RfSFpBTlwifSx7XCJpZFwiOjQ3LFwidGl0bGVcIjpcIlRpdGFuIEdlbmVzaXMgS1NHWFwifSx7XCJpZFwiOjUxLFwidGl0bGVcIjpcIlR1cmluIEtTR1VfSFpBTlwifV19LFxuICAgIHtcImlkXCI6OCxcInRpdGxlXCI6XCJNaWRlYVwiLFwic2VyaWVzXCI6W3tcImlkXCI6NjEsXCJ0aXRsZVwiOlwiQmxhbmMgTVNNQVwifSx7XCJpZFwiOjYwLFwidGl0bGVcIjpcIkJsYW5jIE1TTUEgRVJQIChNQSlcIn0se1wiaWRcIjo1OSxcInRpdGxlXCI6XCJNaXNzaW9uIE1TTUIgKE1CKVwifSx7XCJpZFwiOjU4LFwidGl0bGVcIjpcIlVsdGltYXRlIENvbWZvcnQgTVNNVCAoTVQpXCJ9XX1dO1xuXG4gIGxldCBsaW5rSHJlZiA9ICcjJztcblxuICBjb25zdCBicmFuZENsYXNzID0gJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCc7XG4gIGNvbnN0IHNlcmllc0NsYXNzID0gJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnO1xuXG4gIGNvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jyk7XG4gIGNvbnN0IHNlcmllc1dyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtd3JhcHBlcicpO1xuICBjb25zdCBzZXJpZXNUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZXJpZXMnKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKTtcblxuICBjb25zdCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fbGluaycpO1xuXG4gIGNvbnN0IG1ha2VPcHRpb25Ob2RlID0gKGFycikgPT4ge1xuICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBsZXQgaSA9IDA7XG5cbiAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd2YWx1ZScsIGl0ZW1bJ3RpdGxlJ10pO1xuICAgICAgbm9kZS50ZXh0Q29udGVudCA9IGl0ZW1bJ3RpdGxlJ107XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGkpO1xuICAgICAgaSsrO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICAgIGxldCBzZXJpZXNTZWxlY3QgPSBzZXJpZXNUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBzZXJpZXNTZWxlY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICBzZXJpZXNTZWxlY3Quc2V0QXR0cmlidXRlKCduYW1lJywgaXRlbVsndGl0bGUnXSk7XG5cbiAgICAgIGl0ZW0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHNlcmllWyd0aXRsZSddKTtcbiAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgICAgICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICB9KTtcblxuICAgICAgc2VyaWVzV3JhcHBlci5hcHBlbmRDaGlsZChzZXJpZXNTZWxlY3QpO1xuICAgIH0pO1xuXG4gICAgYnJhbmRTZWxlY3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICB9O1xuXG4gIC8vYnJhbmRTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZU9wdGlvbk5vZGUoc3BsaXRzKSk7XG4gIG1ha2VPcHRpb25Ob2RlKHNwbGl0cyk7XG5cbiAgbWFrZVNlbGVjdChicmFuZENsYXNzKTtcbiAgbWFrZVNlbGVjdChzZXJpZXNDbGFzcyk7XG5cbiAgalF1ZXJ5KGJyYW5kQ2xhc3MpLnNlbGVjdDIoJ29wZW4nKTtcbiAgalF1ZXJ5KGJyYW5kQ2xhc3MpLnNlbGVjdDIoJ2Nsb3NlJyk7XG5cblxuICBjb25zdCBzZXJpZXNTZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuXG5cbiAgY29uc3QgaGlkZVNlcmllcyA9ICgpID0+IHtcbiAgICBzZXJpZXNTZWxlY3RzLmZvckVhY2goKHNlbGVjdCkgPT4ge1xuICAgICAgaWYgKCFzZWxlY3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIHNlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICB9XG4gICAgfSlcbiAgfTtcblxuICBjb25zdCBzaG93U2VyaWVzID0gKGlkeCkgPT4ge1xuICAgIHNlcmllc1NlbGVjdHNbaWR4XS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBzZXJpZXNTZWxlY3RzW2lkeF0uc2V0QXR0cmlidXRlKCdpZCcsICdzZXJpZXMtc2VsZWN0Jyk7XG4gIH07XG5cbiAgalF1ZXJ5KGJyYW5kQ2xhc3MpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgbGV0IGlkeCA9ICtqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS5hdHRyKCdkYXRhLWlkJyk7XG5cbiAgICBoaWRlU2VyaWVzKCk7XG4gICAgc2hvd1NlcmllcyhpZHggKyAxKTtcblxuICAgIGpRdWVyeSgnI3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKCdvcGVuJyk7XG4gICAgalF1ZXJ5KCcjc2VyaWVzLXNlbGVjdCcpLnNlbGVjdDIoJ2Nsb3NlJyk7XG5cbiAgICBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICB9KTtcblxuICBqUXVlcnkoc2VyaWVzQ2xhc3MpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgaWYgKGxpbmsuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7XG4gICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgfVxuXG4gICAgbGV0IHZhbHVlID0galF1ZXJ5KGV2dC50YXJnZXQpLmNoaWxkcmVuKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgbGlua0hyZWYgPSB2YWx1ZTtcblxuXG4gICAgbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBsaW5rSHJlZik7XG5cbiAgICBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgfSk7XG5cbn0pKHdpbmRvdy5tYWtlU2VsZWN0KTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jyk7XG4gIGNvbnN0IHNlcmllc1NlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG4gIGNvbnN0IGhpZGluZ0NsYXNzID0gJ3NlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUnO1xuXG4gIGxldCBpZHggPSAtMTtcblxuICBjb25zdCByZW1vdmVDbGFzcyA9IChpdGVtKSA9PiB7XG4gICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKGhpZGluZ0NsYXNzKTtcbiAgfTtcblxuICBjb25zdCBhZGRDbGFzcyA9IChpdGVtKSA9PiB7XG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKGhpZGluZ0NsYXNzKTtcbiAgfTtcblxuICBjb25zdCBpc01vYmlsZSA9ICgpID0+IHtcbiAgICByZXR1cm4gIHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA0NzlweCknKS5tYXRjaGVzO1xuICB9O1xuXG4gIGxldCBpc091dE9mTW9iaWxlID0gIWlzTW9iaWxlO1xuXG4gIGNvbnN0IG9uUmVzaXplID0gKCkgPT4ge1xuICAgIGlmIChpc01vYmlsZSgpICYmIGlzT3V0T2ZNb2JpbGUpIHtcbiAgICAgIGlzT3V0T2ZNb2JpbGUgPSBmYWxzZTtcblxuICAgICAgcmVtb3ZlQ2xhc3MoYnJhbmRTZWxlY3QpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICByZW1vdmVDbGFzcyhzZXJpZXNTZWxlY3RzW2lkeF0pO1xuICAgICAgfVxuXG4gICAgICBhZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGlmICghaXNNb2JpbGUoKSAmJiAhaXNPdXRPZk1vYmlsZSkge1xuICAgICAgaXNPdXRPZk1vYmlsZSA9IHRydWU7XG5cbiAgICAgIGFkZENsYXNzKGJyYW5kU2VsZWN0KTtcblxuICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgYWRkQ2xhc3Moc2VyaWVzU2VsZWN0c1tpZHhdKTtcbiAgICAgIH1cblxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBhZGRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBicmFuZFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkJyYW5kQ2hhbmdlKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBicmFuZFNlbGVjdC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkJyYW5kQ2hhbmdlKTtcbiAgfTtcblxuICBjb25zdCBvbkJyYW5kQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICBhZGRDbGFzcyhzZXJpZXNTZWxlY3RzW2lkeF0pO1xuICAgIH1cblxuICAgIGlkeCA9IGV2dC50YXJnZXQuc2VsZWN0ZWRJbmRleDtcblxuICAgIHJlbW92ZUNsYXNzKHNlcmllc1NlbGVjdHNbaWR4XSk7XG4gIH07XG5cbiAgaWYgKGlzTW9iaWxlKCkpIHtcbiAgICByZW1vdmVDbGFzcyhicmFuZFNlbGVjdCk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSk7XG59KSgpO1xuIl19
