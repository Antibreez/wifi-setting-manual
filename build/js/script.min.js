lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",s=200,n=300,i=function(e,t){var i=new XMLHttpRequest;return i.timeout=1e4,i.responseType="json",i.addEventListener("load",(function(){!function(e){return e.status<s||e.status>n}(i)?e(i.response):t("Данные не загрузились. Причина: "+i.status+" "+i.statusText)})),i.addEventListener("error",(function(){t("Произошла ошибка соединения")})),i.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+i.timeout+"мс")})),i},o=function(e){e.remove()},c=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(o,2e3,t)};window.backend={load:function(s,n){var o=i(s,n||c);o.open(t,e),o.send()}}}(),function(e){window.makeSelect=function(t){e(t).select2({minimumResultsForSearch:-1})}}(jQuery),function(){const e=document.querySelector(".model-choice__brand-select"),t=document.querySelectorAll(".model-choice__series-select");let s=-1;const n=e=>{e.classList.remove("select2-hidden-accessible"),e.removeAttribute("aria-hidden"),e.removeAttribute("tabindex")},i=e=>{e.classList.add("select2-hidden-accessible"),e.setAttribute("aria-hedden","true"),e.setAttribute("tabindex","-1")},o=()=>window.matchMedia("(max-width: 479px)").matches;let c=!o;const d=()=>{o()&&c&&(c=!1,n(e),-1!==s&&n(t[s]),a()),o()||c||(c=!0,i(e),-1!==s&&i(t[s]),l())},a=()=>{e.addEventListener("change",r)},l=()=>{e.removeEventListener("change",r)},r=e=>{-1!==s&&i(t[s]),s=e.target.selectedIndex,n(t[s])};window.Resize={addListener:()=>{window.addEventListener("resize",d)},init:()=>{o()&&(n(e),a())}}}(),function(e,t,s){let n="#";const i=document.querySelector(".model-choice__brand-list"),o=document.querySelector(".model-choice__brand-choice"),c=document.querySelector(".model-choice__series-list"),d=document.querySelector(".model-choice__series-choice"),a=document.querySelector(".model-choice__select-brand"),l=document.querySelector(".model-choice__select-series");let r=-1,m=-1;document.querySelector(".model-choice__series-wrapper"),document.querySelector("#series").content.querySelector(".model-choice__series-select");const u=document.querySelector(".model-choice__link"),h=()=>{if(!i.classList.contains("show"))return i.classList.add("show"),void o.classList.add("opened");i.classList.contains("show")&&(i.classList.remove("show"),o.classList.remove("opened"))},L=()=>{if(!c.classList.contains("show"))return c.classList.add("show"),void d.classList.add("opened");c.classList.contains("show")&&(c.classList.remove("show"),d.classList.remove("opened"))},v=e=>{let t=e.target;t.classList.contains("model-choice__brand-choice")||t.classList.contains("model-choice__brand-item")||t.classList.contains("model-choice__brand-list")||!i.classList.contains("show")||(i.classList.remove("show"),o.classList.remove("opened")),t.classList.contains("model-choice__series-choice")||t.classList.contains("model-choice__series-item")||t.classList.contains("model-choice__series-list")||!c.classList.contains("show")||(c.classList.remove("show"),d.classList.remove("opened"))};e.load(e=>{let t=document.createDocumentFragment(),s=0;e.forEach(e=>{let n=document.createElement("li");n.textContent=e.title,n.classList.add("model-choice__brand-item"),n.setAttribute("data-id",s),s++,t.appendChild(n)}),i.appendChild(t);let p=document.createDocumentFragment();e.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__brand-option"),t.setAttribute("data-id",s),p.appendChild(t)}),a.appendChild(p);o.addEventListener("click",h),d.addEventListener("click",L),i.addEventListener("click",t=>{let s=t.target,n=+s.getAttribute("data-id");if(s.classList.contains("model-choice__brand-item")&&(r===n&&(i.classList.remove("show"),o.classList.remove("opened")),r!==n)){c.innerHTML="",d.textContent="Выбрать из списка",d.classList.remove("selected");let t=document.createDocumentFragment(),n=+s.getAttribute("data-id");e[n].series.forEach(e=>{let s=document.createElement("li");s.textContent=e.title,s.classList.add("model-choice__series-item"),t.appendChild(s)}),c.appendChild(t),r=n,o.textContent=s.textContent,o.classList.contains("selected")||o.classList.add("selected"),d.hasAttribute("disabled")&&d.removeAttribute("disabled"),i.classList.remove("show"),o.classList.remove("opened")}}),c.addEventListener("click",e=>{let t=e.target;t.classList.contains("model-choice__series-item")&&(d.textContent=t.textContent,d.classList.contains("selected")||d.classList.add("selected"),c.classList.remove("show"),d.classList.remove("opened"),u.classList.remove("disabled"),n=t.textContent,u.setAttribute("href",n))}),a.addEventListener("change",t=>{m=t.target.selectedIndex-1,l.innerHTML="",d.textContent="Выбрать из списка",d.classList.remove("selected");let s=document.createElement("option");s.textContent="Выбрать из списка",s.setAttribute("disabled",""),s.setAttribute("selected",""),l.appendChild(s);let n=document.createDocumentFragment();l.hasAttribute("disabled")&&l.removeAttribute("disabled"),e[m].series.forEach(e=>{let t=document.createElement("option");t.textContent=e.title,t.classList.add("model-choice__series-option"),n.appendChild(t)}),l.appendChild(n),o.textContent=t.target.value,o.classList.contains("selected")||o.classList.add("selected")}),l.addEventListener("change",e=>{d.textContent=e.target.value,d.classList.contains("selected")||d.classList.add("selected"),u.classList.remove("disabled"),n=e.target.value,u.setAttribute("href",n)}),document.addEventListener("mousedown",v)})}(window.backend,window.makeSelect,window.Resize);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi5qcyIsImJhY2tlbmQuanMiLCJzZWxlY3QuanMiLCJyZXNpemUuanMiLCJjaG9pY2UuanMiXSwibmFtZXMiOlsibG90dGllIiwibG9hZEFuaW1hdGlvbiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW5kZXJlciIsImxvb3AiLCJhdXRvcGxheSIsInBhdGgiLCJSZXFVcmwiLCJSZXFNZXRob2QiLCJSZXFTdGF0dXMiLCJjcmVhdGVSZXF1ZXN0Iiwib25Mb2FkIiwib25FcnJvciIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0dXMiLCJpc0Vycm9yU3RhdHVzIiwicmVzcG9uc2UiLCJzdGF0dXNUZXh0IiwicmVtb3ZlRWxlbWVudCIsImVsZW1lbnQiLCJyZW1vdmUiLCJvbkFueUVycm9yIiwibWVzc2FnZSIsIm5vZGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJyaWdodCIsImZvbnRTaXplIiwidGV4dENvbnRlbnQiLCJib2R5IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50Iiwid2luZG93Iiwic2V0VGltZW91dCIsImJhY2tlbmQiLCJsb2FkIiwicmVxIiwib3BlbiIsInNlbmQiLCIkIiwibWFrZVNlbGVjdCIsImVsZW1lbnRDbGFzcyIsInNlbGVjdDIiLCJtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCIsImpRdWVyeSIsImJyYW5kU2VsZWN0IiwicXVlcnlTZWxlY3RvciIsInNlcmllc1NlbGVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaWR4IiwicmVtb3ZlQ2xhc3MiLCJpdGVtIiwiY2xhc3NMaXN0IiwicmVtb3ZlQXR0cmlidXRlIiwiYWRkQ2xhc3MiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJpc01vYmlsZSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiaXNPdXRPZk1vYmlsZSIsIm9uUmVzaXplIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIm9uQnJhbmRDaGFuZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0Iiwic2VsZWN0ZWRJbmRleCIsIlJlc2l6ZSIsImFkZExpc3RlbmVyIiwiaW5pdCIsImxpbmtIcmVmIiwiYnJhbmRMaXN0IiwiYnJhbmRCdXR0b24iLCJzZXJpZXNMaXN0Iiwic2VyaWVzQnV0dG9uIiwic2VyaWVzU2VsZWN0IiwiY3VycmVudEJyYW5kSWR4IiwiY3VycmVudE9wdGlvbklkeCIsImNvbnRlbnQiLCJsaW5rIiwib25CcmFuZENsaWNrIiwiY29udGFpbnMiLCJvblNlcmllc0NsaWNrIiwib25PdXRzaWRlQ2xpY2siLCJhcnIiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpIiwiZm9yRWFjaCIsImFwcGVuZENoaWxkIiwiZnJhZ21lbnQxIiwibm9kZTEiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJzZXJpZXMiLCJzZXJpZSIsImhhc0F0dHJpYnV0ZSIsInZhbHVlIl0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBQUMsY0FBQSxDQUNBQyxVQUFBQyxTQUFBQyxlQUFBLGFBQ0FDLFNBQUEsTUFDQUMsTUFBQSxFQUNBQyxVQUFBLEVBQ0FDLEtBQUEsY0NKQSxXQUNBLElBQUFDLEVBQ0EsMENBSUFDLEVBQ0EsTUFJQUMsRUFDQSxJQURBQSxFQUVBLElBVUFDLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBLElBQUFDLGVBc0JBLE9BcEJBRCxFQUFBRSxRQVZBLElBV0FGLEVBQUFHLGFBQUEsT0FFQUgsRUFBQUksaUJBQUEsUUFBQSxZQVhBLFNBQUFKLEdBQ0EsT0FBQUEsRUFBQUssT0FBQVQsR0FDQUksRUFBQUssT0FBQVQsRUFVQVUsQ0FBQU4sR0FLQUYsRUFBQUUsRUFBQU8sVUFKQVIsRUFBQSxtQ0FBQUMsRUFBQUssT0FBQSxJQUFBTCxFQUFBUSxlQU9BUixFQUFBSSxpQkFBQSxT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Q29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICBsb3R0aWUubG9hZEFuaW1hdGlvbih7XG4gICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uJyksIC8vIHRoZSBkb20gZWxlbWVudCB0aGF0IHdpbGwgY29udGFpbiB0aGUgYW5pbWF0aW9uXG4gICAgcmVuZGVyZXI6ICdzdmcnLFxuICAgIGxvb3A6IHRydWUsXG4gICAgYXV0b3BsYXk6IHRydWUsXG4gICAgcGF0aDogJ2RhdGEuanNvbicgLy8gdGhlIHBhdGggdG8gdGhlIGFuaW1hdGlvbiBqc29uXG4gIH0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFJlcVVybCA9IHtcbiAgICBHRVQ6ICdodHRwczovL3NwbGl0LmRhaWNoaWNsb3VkLnJ1L2JyYW5kcy9hbGwnLFxuICAgIC8vUE9TVDogJ2h0dHBzOi8vanMuZHVtcC5hY2FkZW15L2tla3N0YWdyYW0nXG4gIH07XG5cbiAgdmFyIFJlcU1ldGhvZCA9IHtcbiAgICBHRVQ6ICdHRVQnLFxuICAgIFBPU1Q6ICdQT1NUJ1xuICB9O1xuXG4gIHZhciBSZXFTdGF0dXMgPSB7XG4gICAgT0s6IDIwMCxcbiAgICBNVUxUSVBMRV9DSE9JQ0VTOiAzMDAsXG4gIH07XG5cbiAgdmFyIFRJTUVPVVQgPSAxMDAwMDtcblxuICB2YXIgaXNFcnJvclN0YXR1cyA9IGZ1bmN0aW9uICh4aHIpIHtcbiAgICByZXR1cm4geGhyLnN0YXR1cyA8IFJlcVN0YXR1cy5PS1xuICAgICAgfHwgeGhyLnN0YXR1cyA+IFJlcVN0YXR1cy5NVUxUSVBMRV9DSE9JQ0VTO1xuICB9O1xuXG4gIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci50aW1lb3V0ID0gVElNRU9VVDtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNFcnJvclN0YXR1cyh4aHIpKSB7XG4gICAgICAgIG9uRXJyb3IoJ9CU0LDQvdC90YvQtSDQvdC1INC30LDQs9GA0YPQt9C40LvQuNGB0YwuINCf0YDQuNGH0LjQvdCwOiAnICsgeGhyLnN0YXR1cyArICcgJyArIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvbkxvYWQoeGhyLnJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8nKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCd0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgb25FcnJvcign0JfQsNC/0YDQvtGBINC90LUg0YPRgdC/0LXQuyDQstGL0L/QvtC70L3QuNGC0YzRgdGPINC30LAgJyArIHhoci50aW1lb3V0ICsgJ9C80YEnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgdmFyIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gIH07XG5cbiAgdmFyIG9uQW55RXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbm9kZS5zdHlsZSA9ICd6LWluZGV4OiAxMDA7IG1hcmdpbjogMCBhdXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHJlZDsnO1xuICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG5vZGUuc3R5bGUubGVmdCA9IDA7XG4gICAgbm9kZS5zdHlsZS5yaWdodCA9IDA7XG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9ICczMHB4JztcblxuICAgIG5vZGUudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbm9kZSk7XG4gICAgd2luZG93LnNldFRpbWVvdXQocmVtb3ZlRWxlbWVudCwgMjAwMCwgbm9kZSk7XG4gIH07XG5cbiAgd2luZG93LmJhY2tlbmQgPSB7XG4gICAgbG9hZDogZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yIHx8IG9uQW55RXJyb3IpO1xuICAgICAgcmVxLm9wZW4oUmVxTWV0aG9kLkdFVCwgUmVxVXJsLkdFVCk7XG4gICAgICByZXEuc2VuZCgpO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlOiBmdW5jdGlvbiAoZGF0YSwgb25Mb2FkLCBvbkVycm9yKSB7XG4gICAgLy8gICB2YXIgcmVxID0gY3JlYXRlUmVxdWVzdChvbkxvYWQsIG9uRXJyb3IpO1xuICAgIC8vICAgcmVxLm9wZW4oUmVxTWV0aG9kLlBPU1QsIFJlcVVybC5QT1NUKTtcbiAgICAvLyAgIHJlcS5zZW5kKGRhdGEpO1xuICAgIC8vIH1cbiAgfTtcbn0pKCk7XG5cblxuXG5cbiIsIi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuLy8gICAvLyAkKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIC8vICQoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIGZ1bmN0aW9uIG1ha2VTZWxlY3QoZWxlbWVudCkge1xuLy8gICAgICQoZWxlbWVudCkuc2VsZWN0Mih7XG4vLyAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgICAgfSk7XG4vLyAgIH07XG5cblxuXG5cbi8vICAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xuXG4vLyAgIGNvbnNvbGUubG9nKHdpbmRvdy5tYWtlU2VsZWN0KTtcblxuLy8gfSk7XG5cblxuKGZ1bmN0aW9uKCQpIHtcbiAgZnVuY3Rpb24gbWFrZVNlbGVjdChlbGVtZW50Q2xhc3MpIHtcbiAgICAkKGVsZW1lbnRDbGFzcykuc2VsZWN0Mih7XG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4gICAgfSk7XG4gIH07XG5cbiAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jyk7XG4gIGNvbnN0IHNlcmllc1NlbGVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG4gIGNvbnN0IGhpZGluZ0NsYXNzID0gJ3NlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUnO1xuXG4gIGxldCBpZHggPSAtMTtcblxuICBjb25zdCByZW1vdmVDbGFzcyA9IChpdGVtKSA9PiB7XG4gICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKGhpZGluZ0NsYXNzKTtcbiAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcbiAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgfTtcblxuICBjb25zdCBhZGRDbGFzcyA9IChpdGVtKSA9PiB7XG4gICAgaXRlbS5jbGFzc0xpc3QuYWRkKGhpZGluZ0NsYXNzKTtcbiAgICBpdGVtLnNldEF0dHJpYnV0ZSgnYXJpYS1oZWRkZW4nLCAndHJ1ZScpO1xuICAgIGl0ZW0uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICB9O1xuXG4gIGNvbnN0IGlzTW9iaWxlID0gKCkgPT4ge1xuICAgIHJldHVybiAgd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQ3OXB4KScpLm1hdGNoZXM7XG4gIH07XG5cbiAgbGV0IGlzT3V0T2ZNb2JpbGUgPSAhaXNNb2JpbGU7XG5cbiAgY29uc3Qgb25SZXNpemUgPSAoKSA9PiB7XG4gICAgaWYgKGlzTW9iaWxlKCkgJiYgaXNPdXRPZk1vYmlsZSkge1xuICAgICAgaXNPdXRPZk1vYmlsZSA9IGZhbHNlO1xuXG4gICAgICByZW1vdmVDbGFzcyhicmFuZFNlbGVjdCk7XG5cbiAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgIHJlbW92ZUNsYXNzKHNlcmllc1NlbGVjdHNbaWR4XSk7XG4gICAgICB9XG5cbiAgICAgIGFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgaWYgKCFpc01vYmlsZSgpICYmICFpc091dE9mTW9iaWxlKSB7XG4gICAgICBpc091dE9mTW9iaWxlID0gdHJ1ZTtcblxuICAgICAgYWRkQ2xhc3MoYnJhbmRTZWxlY3QpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBhZGRDbGFzcyhzZXJpZXNTZWxlY3RzW2lkeF0pO1xuICAgICAgfVxuXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFkZEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGJyYW5kU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQnJhbmRDaGFuZ2UpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGJyYW5kU2VsZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQnJhbmRDaGFuZ2UpO1xuICB9O1xuXG4gIGNvbnN0IG9uQnJhbmRDaGFuZ2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgIGFkZENsYXNzKHNlcmllc1NlbGVjdHNbaWR4XSk7XG4gICAgfVxuXG4gICAgaWR4ID0gZXZ0LnRhcmdldC5zZWxlY3RlZEluZGV4O1xuXG4gICAgcmVtb3ZlQ2xhc3Moc2VyaWVzU2VsZWN0c1tpZHhdKTtcbiAgfTtcblxuICBcblxuICB3aW5kb3cuUmVzaXplID0ge1xuICAgIGFkZExpc3RlbmVyOiAoKSA9PiB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xuICAgIH0sXG5cbiAgICBpbml0OiAoKSA9PiB7XG4gICAgICBpZiAoaXNNb2JpbGUoKSkge1xuICAgICAgICByZW1vdmVDbGFzcyhicmFuZFNlbGVjdCk7XG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFxufSkoKTtcbiIsIihmdW5jdGlvbiAoYmFja2VuZCwgbWFrZVNlbGVjdCwgUmVzaXplKSB7XG4gIC8vIGNvbnN0IHNwbGl0cyA9IFtcbiAgLy8gICB7XG4gIC8vICAgICBcImlkXCI6NyxcbiAgLy8gICAgIFwidGl0bGVcIjpcIkF4aW9tYVwiLFxuICAvLyAgICAgXCJzZXJpZXNcIjpbXG4gIC8vICAgICAgIHtcbiAgLy8gICAgICAgICBcImlkXCI6NjMsXG4gIC8vICAgICAgICAgXCJ0aXRsZVwiOlwiQVNYX0FcIlxuICAvLyAgICAgICB9LFxuICAvLyAgICAgICB7XG4gIC8vICAgICAgICAgXCJpZFwiOjYyLFxuICAvLyAgICAgICAgIFwidGl0bGVcIjpcIkFTWF9BWlwiXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIF1cbiAgLy8gICB9LFxuICAvLyAgIHtcImlkXCI6NixcInRpdGxlXCI6XCJEYWljaGlcIixcInNlcmllc1wiOlt7XCJpZFwiOjQ1LFwidGl0bGVcIjpcIkNhcmJvbiBEQV9EVlFcIn0se1wiaWRcIjo0NixcInRpdGxlXCI6XCJFdmVyZXN0IERBX0VWUVwifSx7XCJpZFwiOjQzLFwidGl0bGVcIjpcIlBlYWsgREFfQVZRU1wifSx7XCJpZFwiOjQyLFwidGl0bGVcIjpcIlgtdHJlbWUgUGVhayBEQV9BVlFTXCJ9XX0sXG4gIC8vICAge1wiaWRcIjoxLFwidGl0bGVcIjpcIkRhaWtpblwiLFwic2VyaWVzXCI6W3tcImlkXCI6MTEsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFgtSlxcL0dWXCJ9LHtcImlkXCI6MjYsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLUszXCJ9LHtcImlkXCI6MjcsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLUxcIn0se1wiaWRcIjoyOCxcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtTVwifSx7XCJpZFwiOjIzLFwidGl0bGVcIjpcIkVtdXJhIEZUWEctTFwifSx7XCJpZFwiOjE4LFwidGl0bGVcIjpcIkVtdXJhIEZUWEotTVwifSx7XCJpZFwiOjIwLFwidGl0bGVcIjpcIkZMWFMtQlwifSx7XCJpZFwiOjE2LFwidGl0bGVcIjpcIkZUWEItQlwifSx7XCJpZFwiOjY1LFwidGl0bGVcIjpcIkZUWFMtRVwifSx7XCJpZFwiOjY0LFwidGl0bGVcIjpcIkZUWFMtSlxcL0dcIn0se1wiaWRcIjoyMSxcInRpdGxlXCI6XCJGVlhNLUZcIn0se1wiaWRcIjoyMixcInRpdGxlXCI6XCJGVlhTLUZcIn0se1wiaWRcIjoxOSxcInRpdGxlXCI6XCJOZXh1cmEgRlZYRy1LXCJ9LHtcImlkXCI6MjQsXCJ0aXRsZVwiOlwiUGVyZmVyYSBGVFhNLU5cIn0se1wiaWRcIjoyNSxcInRpdGxlXCI6XCJQZXJmZXJhIEZUWFMtS1wifSx7XCJpZFwiOjEsXCJ0aXRsZVwiOlwiU2Vuc2lyYSBGVFhCLUNcIn1dfSxcbiAgLy8gICB7XCJpZFwiOjIsXCJ0aXRsZVwiOlwiS2VudGF0c3VcIixcInNlcmllc1wiOlt7XCJpZFwiOjQ5LFwidGl0bGVcIjpcIkJyYXZvICBLU0dCX0hGQU5cIn0se1wiaWRcIjo1MCxcInRpdGxlXCI6XCJCcmF2byAgS1NHQkFfSFpBTlwifSx7XCJpZFwiOjU2LFwidGl0bGVcIjpcIktNR0JBX0haQU5cIn0se1wiaWRcIjo1NyxcInRpdGxlXCI6XCJLTUdCQl9IWkFOXCJ9LHtcImlkXCI6NTIsXCJ0aXRsZVwiOlwiVGVhbSAgS1NHVF9IWkFOXCJ9LHtcImlkXCI6NDcsXCJ0aXRsZVwiOlwiVGl0YW4gR2VuZXNpcyBLU0dYXCJ9LHtcImlkXCI6NTEsXCJ0aXRsZVwiOlwiVHVyaW4gS1NHVV9IWkFOXCJ9XX0sXG4gIC8vICAge1wiaWRcIjo4LFwidGl0bGVcIjpcIk1pZGVhXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjo2MSxcInRpdGxlXCI6XCJCbGFuYyBNU01BXCJ9LHtcImlkXCI6NjAsXCJ0aXRsZVwiOlwiQmxhbmMgTVNNQSBFUlAgKE1BKVwifSx7XCJpZFwiOjU5LFwidGl0bGVcIjpcIk1pc3Npb24gTVNNQiAoTUIpXCJ9LHtcImlkXCI6NTgsXCJ0aXRsZVwiOlwiVWx0aW1hdGUgQ29tZm9ydCBNU01UIChNVClcIn1dfV07XG5cbiAgbGV0IGxpbmtIcmVmID0gJyMnO1xuXG4gIGNvbnN0IGJyYW5kQ2xhc3MgPSAnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0JztcbiAgY29uc3Qgc2VyaWVzQ2xhc3MgPSAnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCc7XG5cbiAgY29uc3QgYnJhbmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtbGlzdCcpO1xuICBjb25zdCBicmFuZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLWNob2ljZScpO1xuICBjb25zdCBzZXJpZXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VyaWVzLWxpc3QnKTtcbiAgY29uc3Qgc2VyaWVzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VyaWVzLWNob2ljZScpO1xuICBjb25zdCBicmFuZFNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3NlbGVjdC1icmFuZCcpO1xuICBjb25zdCBzZXJpZXNTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZWxlY3Qtc2VyaWVzJyk7XG5cbiAgbGV0IGN1cnJlbnRCcmFuZElkeCA9IC0xO1xuICBsZXQgY3VycmVudE9wdGlvbklkeCA9IC0xO1xuXG4gIC8vY29uc3QgYnJhbmRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKTtcbiAgY29uc3Qgc2VyaWVzV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy13cmFwcGVyJyk7XG4gIGNvbnN0IHNlcmllc1RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlcmllcycpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuXG4gIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19saW5rJyk7XG5cbiAgY29uc3Qgb25CcmFuZENsaWNrID0gKCkgPT4ge1xuICAgIGlmICghYnJhbmRMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBicmFuZExpc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGJyYW5kTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xuICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cbiAgICAvLyBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLWxpc3QnKS5tQ3VzdG9tU2Nyb2xsYmFyKHtcbiAgICAvLyAgIHNldEhlaWdodDogMTg5LFxuICAgIC8vICAgYXV0b0hpZGVTY3JvbGxiYXI6IGZhbHNlLFxuICAgIC8vICAgdGhlbWU6ICdkYXJrJyxcbiAgICAvLyAgIG1vdXNlV2hlZWxQaXhlbHM6IDIwMCxcbiAgICAvLyAgIGNvbnRlbnRUb3VjaFNjcm9sbDogdHJ1ZVxuICAgIC8vIH0pO1xuICB9O1xuXG4gIGNvbnN0IG9uU2VyaWVzQ2xpY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFzZXJpZXNMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBzZXJpZXNMaXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdvcGVuZWQnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHNlcmllc0xpc3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIC0gd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2VyaWVzTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xuICAgICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uT3V0c2lkZUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIGxldCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKFxuICAgICAgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtY2hvaWNlJylcbiAgICAgICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWl0ZW0nKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtbGlzdCcpXG4gICAgICAmJiBicmFuZExpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JylcbiAgICApIHtcbiAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19zZXJpZXMtY2hvaWNlJylcbiAgICAgICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJylcbiAgICAgICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1saXN0JylcbiAgICAgICYmIHNlcmllc0xpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JylcbiAgICApIHtcbiAgICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBtYWtlT3B0aW9uTm9kZSA9IChhcnIpID0+IHtcbiAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgbGV0IGkgPSAwO1xuXG4gICAgYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBpdGVtWyd0aXRsZSddO1xuICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWl0ZW0nKTtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaSk7XG4gICAgICBpKys7XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcblxuICAgICAgLy8gbGV0IHNlcmllc1NlbGVjdCA9IHNlcmllc1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIC8vIHNlcmllc1NlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBpdGVtWyd0aXRsZSddKTtcblxuICAgICAgLy8gaXRlbS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAgIC8vICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIC8vICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgc2VyaWVbJ3RpdGxlJ10pO1xuICAgICAgLy8gICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgICAvLyAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIC8vIH0pO1xuXG4gICAgICAvLyBzZXJpZXNXcmFwcGVyLmFwcGVuZENoaWxkKHNlcmllc1NlbGVjdCk7XG4gICAgfSk7XG5cbiAgICBicmFuZExpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG5cbiAgICBsZXQgZnJhZ21lbnQxID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGxldCBqID0gMDtcblxuICAgIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBsZXQgbm9kZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIG5vZGUxLnRleHRDb250ZW50ID0gaXRlbVsndGl0bGUnXTtcbiAgICAgIG5vZGUxLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fYnJhbmQtb3B0aW9uJyk7XG4gICAgICBub2RlMS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpKTtcbiAgICAgIGorKztcbiAgICAgIGZyYWdtZW50MS5hcHBlbmRDaGlsZChub2RlMSk7XG5cbiAgICAgIC8vIGxldCBzZXJpZXNTZWxlY3QgPSBzZXJpZXNUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAvLyBzZXJpZXNTZWxlY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAvLyBzZXJpZXNTZWxlY3Quc2V0QXR0cmlidXRlKCduYW1lJywgaXRlbVsndGl0bGUnXSk7XG5cbiAgICAgIC8vIGl0ZW0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgICAvLyAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAvLyAgIG5vZGUuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHNlcmllWyd0aXRsZSddKTtcbiAgICAgIC8vICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgICAgLy8gICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAvLyB9KTtcblxuICAgICAgLy8gc2VyaWVzV3JhcHBlci5hcHBlbmRDaGlsZChzZXJpZXNTZWxlY3QpO1xuICAgIH0pO1xuXG4gICAgYnJhbmRTZWxlY3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQxKTtcblxuXG5cbiAgICBjb25zdCBvbkJyYW5kSXRlbUNsaWNrID0gKGV2dCkgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG4gICAgICBsZXQgaWR4ID0gK3RhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpKSB7XG4gICAgICAgIGlmIChjdXJyZW50QnJhbmRJZHggPT09IGlkeCkge1xuICAgICAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudEJyYW5kSWR4ICE9PSBpZHgpIHtcbiAgICAgICAgICBzZXJpZXNMaXN0LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gJ9CS0YvQsdGA0LDRgtGMINC40Lcg0YHQv9C40YHQutCwJztcbiAgICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblxuICAgICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICBsZXQgaWR4ID0gK3RhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuICAgICAgICAgIGFycltpZHhdLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJyk7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNlcmllc0xpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICAgIGN1cnJlbnRCcmFuZElkeCA9IGlkeDtcblxuICAgICAgICAgIGJyYW5kQnV0dG9uLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICAgIGlmICghYnJhbmRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZXJpZXNCdXR0b24uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICBzZXJpZXNCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvbkJyYW5kQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgICAgY3VycmVudE9wdGlvbklkeCA9IGV2dC50YXJnZXQuc2VsZWN0ZWRJbmRleCAtIDE7XG4gICAgICBzZXJpZXNTZWxlY3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgIHNlcmllc0J1dHRvbi50ZXh0Q29udGVudCA9ICfQktGL0LHRgNCw0YLRjCDQuNC3INGB0L/QuNGB0LrQsCc7XG4gICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBcItCS0YvQsdGA0LDRgtGMINC40Lcg0YHQv9C40YHQutCwXCI7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnJyk7XG5cbiAgICAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChub2RlKTtcblxuICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICBpZiAoc2VyaWVzU2VsZWN0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgICAgICBzZXJpZXNTZWxlY3QucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgfVxuXG5cbiAgICAgIGFycltjdXJyZW50T3B0aW9uSWR4XS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fc2VyaWVzLW9wdGlvbicpO1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG4gICAgICBicmFuZEJ1dHRvbi50ZXh0Q29udGVudCA9IGV2dC50YXJnZXQudmFsdWU7XG4gICAgICBpZiAoIWJyYW5kQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG9uU2VyaWVzSXRlbUNsaWNrID0gKGV2dCkgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJykpIHtcbiAgICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICBpZiAoIXNlcmllc0J1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG5cbiAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgICBsaW5rSHJlZiA9IHRhcmdldC50ZXh0Q29udGVudDtcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBsaW5rSHJlZik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb25TZXJpZXNDaGFuZ2UgPSAoZXZ0KSA9PiB7XG4gICAgICBzZXJpZXNCdXR0b24udGV4dENvbnRlbnQgPSBldnQudGFyZ2V0LnZhbHVlO1xuICAgICAgaWYgKCFzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgfVxuXG4gICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgICBsaW5rSHJlZiA9IGV2dC50YXJnZXQudmFsdWU7XG4gICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGxpbmtIcmVmKTtcbiAgICB9XG5cbiAgICAvL2xldCBzcGxpdHNEYXRhID0gYmFja2VuZC5sb2FkKGdldERhdGEpO1xuXG4gICAgLy9icmFuZFNlbGVjdC5hcHBlbmRDaGlsZChtYWtlT3B0aW9uTm9kZShzcGxpdHMpKTtcbiAgICAvL21ha2VPcHRpb25Ob2RlKHNwbGl0cyk7XG4gICAgLy9iYWNrZW5kLmxvYWQobWFrZU9wdGlvbk5vZGUpO1xuXG5cbiAgICAvLyBtYWtlU2VsZWN0KGJyYW5kQ2xhc3MpO1xuICAgIC8vIG1ha2VTZWxlY3Qoc2VyaWVzQ2xhc3MpO1xuXG4gICAgLy8galF1ZXJ5KGJyYW5kQ2xhc3MpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAvLyBqUXVlcnkoYnJhbmRDbGFzcykuc2VsZWN0MignY2xvc2UnKTtcblxuXG4gICAgLy8gY29uc3Qgc2VyaWVzU2VsZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKTtcblxuXG4gICAgLy8gY29uc3QgaGlkZVNlcmllcyA9ICgpID0+IHtcbiAgICAvLyAgIHNlcmllc1NlbGVjdHMuZm9yRWFjaCgoc2VsZWN0KSA9PiB7XG4gICAgLy8gICAgIGlmICghc2VsZWN0LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAvLyAgICAgICBzZWxlY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgLy8gICAgICAgc2VsZWN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSlcbiAgICAvLyB9O1xuXG4gICAgLy8gY29uc3Qgc2hvd1NlcmllcyA9IChpZHgpID0+IHtcbiAgICAvLyAgIHNlcmllc1NlbGVjdHNbaWR4XS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAvLyAgIHNlcmllc1NlbGVjdHNbaWR4XS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Nlcmllcy1zZWxlY3QnKTtcbiAgICAvLyB9O1xuXG4gICAgLy8galF1ZXJ5KGJyYW5kQ2xhc3MpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgLy8gICBsZXQgaWR4ID0gK2pRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0IG9wdGlvbjpzZWxlY3RlZCcpLmF0dHIoJ2RhdGEtaWQnKTtcblxuICAgIC8vICAgaGlkZVNlcmllcygpO1xuICAgIC8vICAgc2hvd1NlcmllcyhpZHggKyAxKTtcblxuICAgIC8vICAgalF1ZXJ5KCcjc2VyaWVzLXNlbGVjdCcpLnNlbGVjdDIoJ29wZW4nKTtcbiAgICAvLyAgIGpRdWVyeSgnI3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKCdjbG9zZScpO1xuXG4gICAgLy8gICBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLXNlbGVjdCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIC8vICAgalF1ZXJ5KCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0JykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgLy8gfSk7XG5cbiAgICAvLyBqUXVlcnkoc2VyaWVzQ2xhc3MpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgLy8gICBpZiAobGluay5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHtcbiAgICAvLyAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgIC8vICAgfVxuXG4gICAgLy8gICBsZXQgdmFsdWUgPSBqUXVlcnkoZXZ0LnRhcmdldCkuY2hpbGRyZW4oJ29wdGlvbjpzZWxlY3RlZCcpLnRleHQoKTtcbiAgICAvLyAgIGxpbmtIcmVmID0gdmFsdWU7XG5cblxuICAgIC8vICAgbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBsaW5rSHJlZik7XG5cbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIC8vIH0pO1xuXG4gICAgLy9SZXNpemUuaW5pdCgpO1xuICAgIC8vUmVzaXplLmFkZExpc3RlbmVyKCk7XG5cbiAgICBicmFuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQnJhbmRDbGljayk7XG4gICAgc2VyaWVzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TZXJpZXNDbGljayk7XG4gICAgYnJhbmRMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CcmFuZEl0ZW1DbGljayk7XG4gICAgc2VyaWVzTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU2VyaWVzSXRlbUNsaWNrKTtcbiAgICBicmFuZFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkJyYW5kQ2hhbmdlKTtcbiAgICBzZXJpZXNTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25TZXJpZXNDaGFuZ2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uT3V0c2lkZUNsaWNrKTtcbiAgfTtcblxuICBiYWNrZW5kLmxvYWQobWFrZU9wdGlvbk5vZGUpO1xuXG59KSh3aW5kb3cuYmFja2VuZCwgd2luZG93Lm1ha2VTZWxlY3QsIHdpbmRvdy5SZXNpemUpO1xuIl19
